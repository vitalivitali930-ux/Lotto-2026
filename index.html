<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Swiss Lotto - VCHF Engine 3.2</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        :root { 
            --main-color: #d4af37; 
            --main-glow: rgba(212, 175, 55, 0.5);
            --profit-green: #00ff41; /* –¢–æ—Ç —Å–∞–º—ã–π —Å–æ—á–Ω—ã–π –∑–µ–ª–µ–Ω—ã–π –¥–ª—è –±–∞–ª–∞–Ω—Å–∞ */
            --neon-blue: #00f3ff; 
            --neon-orange: #ff8c00;
            --bg-deep: #000407;
            --glass: rgba(255, 255, 255, 0.05);
            --glass-border: rgba(255, 255, 255, 0.1);
        } 

        body, html { 
            background: var(--bg-deep); color: #fff; 
            font-family: 'Orbitron', sans-serif; margin: 0; padding: 0;
            height: 100vh; width: 100vw; overflow: hidden;
            user-select: none; -webkit-tap-highlight-color: transparent;
        }

        /* –ü–ê–õ–ò–¢–†–ê –ò–ó –¢–í–û–ï–ì–û –í–ò–î–ï–û (–ê–î–ê–ü–¢–ê–¶–ò–Ø –®–ê–†–û–í) */
        body.theme-cherry { --main-color: #C511A4; --main-glow: rgba(197, 17, 164, 0.5); }
        body.theme-silver { --main-color: #c0c0c0; --main-glow: rgba(192, 192, 192, 0.5); }
        body.theme-lime { --main-color: #32CD32; --main-glow: rgba(50, 205, 50, 0.5); }
        body.theme-cyan { --main-color: #00ffff; --main-glow: rgba(0, 255, 255, 0.5); }
        body.theme-gold { --main-color: #d4af37; --main-glow: rgba(212, 175, 55, 0.5); }

        /* INTRO: –í–ó–†–´–í –°–§–ï–† (–ë–ê–†–ê–ë–ê–ù) */
        #monolith-intro {
            position: fixed; inset: 0; background: #000; z-index: 99999;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
        }
        .drum-animation {
            width: 150px; height: 150px; border: 3px solid var(--main-color);
            border-radius: 50%; position: relative;
            animation: drum-rotate 2s infinite linear;
            box-shadow: 0 0 40px var(--main-glow);
        }
        .drum-animation::before {
            content: ''; position: absolute; inset: -10px;
            border: 2px dashed var(--neon-blue); border-radius: 50%;
            animation: drum-rotate-rev 4s infinite linear;
        }
        @keyframes drum-rotate { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
        @keyframes drum-rotate-rev { from { transform: rotate(360deg); } to { transform: rotate(0deg); } }

        /* –ò–ù–¢–ï–†–§–ï–ô–° */
        #app-content { display: none; opacity: 0; transition: 1.5s ease; height: 100vh; flex-direction: column; }
        
        /* –ö–û–®–ï–õ–¨–ö–ò –° –ó–ï–õ–ï–ù–´–ú–ò –¶–ò–§–†–ê–ú–ò */
        .balance-container { display: flex; gap: 12px; padding: 15px; margin-top: 5px; }
        .bal-card { 
            flex: 1; background: var(--glass); border: 1px solid var(--glass-border);
            border-radius: 15px; padding: 15px; transition: 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative; overflow: hidden;
        }
        .bal-card.active-wallet { 
            border-color: var(--main-color); 
            background: rgba(255, 255, 255, 0.08); 
            box-shadow: 0 0 20px var(--main-glow), inset 0 0 10px var(--main-glow);
            transform: translateY(-2px);
        }
        .bal-val { 
            font-size: 22px; font-weight: 900; 
            color: var(--profit-green); /* –ó–ï–õ–ï–ù–´–ô –¶–í–ï–¢ –ò–ó –í–ò–î–ï–û */
            text-shadow: 0 0 10px rgba(0, 255, 65, 0.5);
        }
        .bal-label { font-size: 10px; color: var(--main-color); font-weight: 700; margin-top: 5px; }

        /* –í–ï–ï–† –Ø–ó–´–ö–û–í */
        .lang-fan {
            display: flex; justify-content: center; gap: 15px; margin: 10px 0;
            perspective: 1000px;
        }
        .lang-item {
            font-size: 24px; cursor: pointer; transition: 0.4s;
            filter: grayscale(0.5); transform: rotateY(20deg);
        }
        .lang-item.active { filter: grayscale(0); transform: scale(1.3) rotateY(0deg); text-shadow: 0 0 15px #fff; }

        /* –°–ï–¢–ö–ê –° –®–ê–†–ê–ú–ò –ü–û–î –ü–ê–õ–ò–¢–†–£ */
        .grid { display: grid; grid-template-columns: repeat(7, 1fr); gap: 10px; padding: 15px; }
        .cell { 
            aspect-ratio: 1; border-radius: 50%; 
            background: radial-gradient(circle at 30% 30%, #333, #000);
            display: flex; align-items: center; justify-content: center;
            font-size: 16px; font-weight: 700; color: rgba(255,255,255,0.2);
            border: 1px solid rgba(255,255,255,0.1); transition: 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        .cell.selected { 
            background: radial-gradient(circle at 35% 35%, var(--main-color) 0%, #1a1a1a 70%, #000 100%);
            color: #fff; transform: scale(1.2); border: 2px solid #fff;
            box-shadow: 0 0 25px var(--main-glow), inset 0 0 10px var(--main-glow);
            z-index: 10;
        }

        /* –ú–û–ù–û–õ–ò–¢–ù–´–ô –ë–õ–û–ö –ö–ù–û–ü–ö–ò –ò –°–£–ú–ú–´ */
        .control-panel {
            background: rgba(0,0,0,0.8); margin: 15px; padding: 0;
            border-radius: 20px; border: 1px solid var(--main-color);
            overflow: hidden; box-shadow: 0 0 30px var(--main-glow);
        }
        .total-info { padding: 15px; border-bottom: 1px solid var(--glass-border); text-align: center; }
        .btn-confirm {
            width: 100%; padding: 20px; border: none;
            background: var(--main-color); color: #000;
            font-family: 'Orbitron', sans-serif; font-weight: 900; font-size: 16px;
            cursor: pointer; transition: 0.3s;
        }
        .btn-confirm:active { filter: brightness(1.3); }

        .nav-bar {
            position: fixed; bottom: 0; left: 0; width: 100%; height: 80px;
            background: rgba(0,0,0,0.95); display: flex; justify-content: space-around;
            align-items: center; border-top: 1px solid var(--main-color);
        }
    </style>
</head>
<body class="theme-gold">

<div id="monolith-intro">
    <div class="drum-animation" id="drum-logo">
        </div>
    <div class="auth-text" id="auth-status" style="margin-top:40px; color:var(--main-color); letter-spacing:5px;">
        VCHF ENGINE ACTIVATING...
    </div>
</div>

<div id="app-content">
    <div class="header-section" style="padding: 10px 15px;">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
            <div style="color: var(--main-color); font-weight: 900; font-size: 14px;">SPARK V3.2</div>
            <div onclick="document.querySelector('.theme-panel').classList.toggle('open')" style="cursor:pointer; font-size: 22px;">üé®</div>
        </div>
        
        <div class="balance-container">
            <div class="bal-card active-wallet" id="card-vchf" onclick="switchCurrency('VCHF')">
                <div class="bal-val" id="vchf-val">100.00</div>
                <div class="bal-label">VIRTUAL VCHF</div>
            </div>
            <div class="bal-card" id="card-chf" onclick="switchCurrency('CHF')">
                <div class="bal-val" id="chf-val">0.00</div>
                <div class="bal-label">REAL ACCOUNT</div>
            </div>
        </div>
    </div>

    <div class="lang-fan" id="lang-fan-container">
        </div>

    <div id="page-play" class="page active">
        <div id="spark-voice" style="height: 20px; text-align: center; color: var(--neon-blue); font-size: 10px; margin-bottom: 10px; font-style: italic;"></div>
        
        <div style="display: flex; justify-content: center; gap: 10px; margin-bottom: 15px;">
            <button onclick="toggleSmartTool('hot')" id="btn-hot" style="background:none; border:1px solid var(--neon-orange); color:var(--neon-orange); padding:8px 15px; border-radius:20px; font-size:11px; font-weight:700;">üî• HOT</button>
            <button onclick="toggleSmartTool('cold')" id="btn-cold" style="background:none; border:1px solid #1e90ff; color:#1e90ff; padding:8px 15px; border-radius:20px; font-size:11px; font-weight:700;">‚ùÑÔ∏è COLD</button>
            <button onclick="fullRandomFill()" style="background:none; border:1px solid #fff; color:#fff; padding:8px 15px; border-radius:20px; font-size:11px; font-weight:700;">üé≤ RANDOM</button>
        </div>

        <div class="grid" id="main-grid"></div>
        
        <div id="l-super-title" style="text-align:center; font-size:12px; margin:10px 0; color:var(--main-color); font-weight:900; text-transform:uppercase;">Superzahl</div>
        <div id="super-grid" style="display: flex; justify-content: center; gap: 10px; padding-bottom: 20px;"></div>

        <div class="control-panel">
            <div class="total-info">
                <span id="l-total-text" style="font-size:12px; opacity:0.7; text-transform:uppercase;">Total:</span>
                <span id="display-sum" style="font-size:24px; font-weight:900; color:var(--main-color); margin-left:10px;">2.50 VCHF</span>
            </div>
            <button class="btn-confirm" id="confirm-action" onclick="processTicket()">CONFIRM TICKET</button>
        </div>
    </div>

    <div id="page-stats" class="page" style="padding: 20px;">
        <div style="display: flex; justify-content: space-around; margin-bottom: 20px;">
            <button onclick="loadStats('month')" class="btn-confirm" style="padding:10px; font-size:10px; width:45%;">MONTH</button>
            <button onclick="loadStats('year')" class="btn-confirm" style="padding:10px; font-size:10px; width:45%;">YEAR</button>
        </div>
        <div id="stats-content" style="background:var(--glass); border-radius:15px; padding:20px; border:1px solid var(--glass-border);">
            <p style="color:var(--main-color); text-align:center;">Analyzing Swiss Lotto Data...</p>
        </div>
    </div>

    <div class="nav-bar">
        <div class="nav-item active" onclick="switchTab('play', this)"><span>üé≤</span><label id="n-game">Game</label></div>
        <div class="nav-item" onclick="switchTab('stats', this)"><span>üìä</span><label id="n-stats">Stats</label></div>
    </div>
</div>

<div class="theme-panel">
    <div class="dot" style="background: #d4af37;" onclick="applyTheme('gold')"></div>
    <div class="dot" style="background: #32CD32;" onclick="applyTheme('lime')"></div>
    <div class="dot" style="background: #00ffff;" onclick="applyTheme('cyan')"></div>
    <div class="dot" style="background: #C511A4;" onclick="applyTheme('cherry')"></div>
    <div class="dot" style="background: #c0c0c0;" onclick="applyTheme('silver')"></div>
</div>
<script>
    const tg = window.Telegram.WebApp;
    tg.expand();

    let selected = [], superNum = null, currentLang = 'ru', currentCurrency = 'VCHF';
    let activeTool = null;

    const languages = {
        ru: { btn: "–ü–û–î–¢–í–ï–†–î–ò–¢–¨", total: "–ò—Ç–æ–≥–æ", game: "–ò–ì–†–ê", stats: "–°–¢–ê–¢–°", voice: "–°–∏—Å—Ç–µ–º–∞ Spark v3.2 –≥–æ—Ç–æ–≤–∞, Wanderer.", welcome: "–î–û–ë–†–û –ü–û–ñ–ê–õ–û–í–ê–¢–¨" },
        ua: { btn: "–ü–Ü–î–¢–í–ï–†–î–ò–¢–ò", total: "–†–∞–∑–æ–º", game: "–ì–†–ê", stats: "–°–¢–ê–¢–°", voice: "–°–∏—Å—Ç–µ–º—É Spark v3.2 –∞–∫—Ç–∏–≤–æ–≤–∞–Ω–æ.", welcome: "–í–Ü–¢–ê–Ñ–ú–û" },
        de: { btn: "BEST√ÑTIGEN", total: "Gesamt", game: "SPIEL", stats: "STATS", voice: "Spark v3.2 ist bereit.", welcome: "WILLKOMMEN" },
        fr: { btn: "CONFIRMER", total: "Total", game: "JEU", stats: "STATS", voice: "Syst√®me Spark v3.2 activ√©.", welcome: "BIENVENUE" },
        en: { btn: "CONFIRM", total: "Total", game: "GAME", stats: "STATS", voice: "Spark v3.2 ready, Wanderer.", welcome: "WELCOME" }
    };

    const flags = { ru: 'üá∑üá∫', ua: 'üá∫üá¶', de: 'üá©üá™', fr: 'üá´üá∑', en: 'üá∫üá∏' };

    // –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –ò–ù–¢–†–û (–í–ó–†–´–í –ë–ê–†–ê–ë–ê–ù–ê)
    function initIntro() {
        const drum = document.getElementById('drum-logo');
        for(let i=0; i<12; i++) {
            let p = document.createElement('div');
            p.style.cssText = `position:absolute; width:8px; height:8px; background:var(--main-color); border-radius:50%; top:50%; left:50%;`;
            drum.appendChild(p);
        }
        
        setTimeout(() => {
            drum.style.transition = "1s cubic-bezier(0.6, -0.28, 0.735, 0.045)";
            drum.style.transform = "scale(0)";
            document.getElementById('monolith-intro').style.opacity = "0";
            setTimeout(() => {
                document.getElementById('monolith-intro').remove();
                const app = document.getElementById('app-content');
                app.style.display = "flex";
                setTimeout(() => app.style.opacity = "1", 50);
            }, 800);
        }, 3200);
    }

    // –õ–û–ì–ò–ö–ê –í–ï–ï–†–ê –Ø–ó–´–ö–û–í
    function renderLangFan() {
        const container = document.getElementById('lang-fan-container');
        container.innerHTML = '';
        Object.keys(flags).forEach((lang, index) => {
            const span = document.createElement('span');
            span.className = `lang-item ${lang === currentLang ? 'active' : ''}`;
            span.innerHTML = flags[lang];
            span.style.transitionDelay = `${index * 0.1}s`;
            span.onclick = () => {
                currentLang = lang;
                updateUI();
                tg.HapticFeedback.impactOccurred('light');
            };
            container.appendChild(span);
        });
    }

    function updateUI() {
        const l = languages[currentLang];
        document.getElementById('confirm-action').innerText = l.btn;
        document.getElementById('l-total-text').innerText = l.total;
        document.getElementById('n-game').innerText = l.game;
        document.getElementById('n-stats').innerText = l.stats;
        document.getElementById('spark-voice').innerText = l.voice;
        document.getElementById('auth-status').innerText = l.welcome;
        renderLangFan();
    }

    // –ò–°–ü–†–ê–í–õ–ï–ù–ù–´–ô RANDOM (–û–ß–ò–°–¢–ö–ê –ü–ï–†–ï–î –ó–ê–ü–û–õ–ù–ï–ù–ò–ï–ú)
    function fullRandomFill() {
        // 1. –ü–æ–ª–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞
        selected = [];
        superNum = null;
        refreshGrids();
        
        // 2. –ù–µ–±–æ–ª—å—à–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –¥–ª—è –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ —ç—Ñ—Ñ–µ–∫—Ç–∞ –æ—á–∏—Å—Ç–∫–∏
        setTimeout(() => {
            while(selected.length < 6) {
                let r = Math.floor(Math.random() * 42) + 1;
                if(!selected.includes(r)) selected.push(r);
            }
            superNum = Math.floor(Math.random() * 6) + 1;
            refreshGrids();
            tg.HapticFeedback.notificationOccurred('success');
        }, 100);
    }

    function refreshGrids() {
        const mainGrid = document.getElementById('main-grid');
        mainGrid.innerHTML = '';
        for (let i = 1; i <= 42; i++) {
            const c = document.createElement('div');
            c.className = `cell ${selected.includes(i) ? 'selected' : ''}`;
            if(activeTool === 'hot' && [7, 14, 23, 33, 40].includes(i)) c.style.borderColor = 'var(--neon-orange)';
            if(activeTool === 'cold' && [2, 11, 19, 28].includes(i)) c.style.borderColor = '#1e90ff';
            c.innerText = i;
            c.onclick = () => toggleNumber(i);
            mainGrid.appendChild(c);
        }

        const sGrid = document.getElementById('super-grid');
        sGrid.innerHTML = '';
        for (let i = 1; i <= 6; i++) {
            const sc = document.createElement('div');
            sc.className = `cell ${superNum === i ? 'selected' : ''}`;
            sc.style.width = '45px';
            sc.innerText = i;
            sc.onclick = () => { superNum = i; refreshGrids(); tg.HapticFeedback.impactOccurred('light'); };
            sGrid.appendChild(sc);
        }
    }

    function toggleNumber(n) {
        if (selected.includes(n)) selected = selected.filter(x => x !== n);
        else if (selected.length < 6) {
            selected.push(n);
            tg.HapticFeedback.impactOccurred('medium');
        }
        refreshGrids();
    }

    function switchCurrency(c) {
        currentCurrency = c;
        document.querySelectorAll('.bal-card').forEach(card => card.classList.remove('active-wallet'));
        document.getElementById(`card-${c.toLowerCase()}`).classList.add('active-wallet');
        document.getElementById('display-sum').innerText = `2.50 ${c}`;
    }

    function applyTheme(t) {
        document.body.className = 'theme-' + t;
        tg.HapticFeedback.impactOccurred('medium');
    }

    function switchTab(tab, el) {
        document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
        document.getElementById('page-' + tab).classList.add('active');
        document.querySelectorAll('.nav-item').forEach(i => i.classList.remove('active'));
        el.classList.add('active');
    }

    function toggleSmartTool(type) {
        activeTool = (activeTool === type) ? null : type;
        refreshGrids();
    }

    window.onload = () => {
        initIntro();
        updateUI();
        refreshGrids();
    };
</script>
</body>
</html>
