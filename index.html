<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>–ü–µ–Ω—Ç—Ö–∞—É—Å –£–¥–∞—á–∏ - –î–≤–∏–∂–æ–∫ VCHF</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root { 
            --main-color: #d4af37; 
            --main-gradient: linear-gradient(145deg, #f9e27d, #d4af37);
            --hot-color: #ff4500;
            --cold-color: #1e90ff;
            --bg-glass: rgba(10, 10, 10, 0.95);
        }

        /* –ü–£–ù–ö–¢ 1: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π Hintergrund */
        body { 
            background: #000 url('Hintergrund.png') no-repeat center center fixed; 
            background-size: cover; color: #fff; 
            font-family: -apple-system, sans-serif; margin: 0;
        }

        #intro-container { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #000; z-index: 50000; display: flex; justify-content: center; align-items: center; }
        .intro-img { position: absolute; width: 80%; opacity: 0; pointer-events: none; }
        .intro-img.active { animation: shakePop 0.8s ease-out forwards; }
        @keyframes shakePop { 0% { transform: scale(0.3); opacity: 0; } 50% { transform: scale(1.05); opacity: 1; } 100% { transform: scale(1); opacity: 1; } }

        #app-content { display: none; opacity: 0; transition: opacity 0.8s ease; padding: 15px; }
        .module-card { background: var(--bg-glass); border-radius: 20px; border: 1px solid var(--main-color); padding: 15px; margin-bottom: 15px; box-shadow: 0 10px 30px rgba(0,0,0,0.8); }

        /* –ü–£–ù–ö–¢ 2: –ü–∞–ª–∏—Ç—Ä–∞ (–ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–Ω—ã—Ö —Å—Ç–∏–ª–µ–π –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —è–∑—ã–∫–∞/–≤—ã–±–æ—Ä–∞) */
        .lang-panel { display: flex; justify-content: center; gap: 10px; margin-bottom: 15px; }
        .lang-btn { font-size: 22px; cursor: pointer; transition: 0.3s; filter: grayscale(1); }
        .lang-btn.active-lang { filter: grayscale(0); transform: scale(1.2); }

        .tab-header { display: flex; justify-content: space-around; margin-bottom: 15px; border-bottom: 1px solid #222; padding-bottom: 8px; }
        .tab-link { color: #555; cursor: pointer; font-size: 9px; font-weight: bold; text-transform: uppercase; }
        .tab-link.active { color: var(--main-color); border-bottom: 2px solid var(--main-color); }

        .grid { display: grid; grid-template-columns: repeat(7, 1fr); gap: 10px; max-width: 380px; margin: 0 auto; }
        .cell { padding: 12px 0; font-weight: bold; color: #444; font-size: 18px; cursor: pointer; border-radius: 50%; }
        .cell.selected { background: var(--main-gradient); color: #000 !important; transform: scale(1.15); box-shadow: 0 0 15px var(--main-color); }
        .cell.is-hot { color: var(--hot-color) !important; text-shadow: 0 0 8px var(--hot-color); }
        .cell.is-cold { color: var(--cold-color) !important; text-shadow: 0 0 8px var(--cold-color); }

        /* –ü–£–ù–ö–¢ 3: –î–∏–∑–∞–π–Ω —Å—á—ë—Ç—á–∏–∫–∞ */
        .price-counter { font-size: 12px; color: var(--main-color); margin: 10px 0; font-weight: bold; }
        
        .btn-main { width: 100%; padding: 18px; border-radius: 15px; background: var(--main-gradient); color: #000; border: none; font-weight: 900; cursor: pointer; text-transform: uppercase; }
        #agb-module { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #000; z-index: 45000; display: none; justify-content: center; align-items: center; padding: 25px; box-sizing: border-box; }
    </style>
</head>
<body>

<div id="intro-container">
    <img src="Bild1.png" id="intro1" class="intro-img">
    <img src="Bild2.png" id="intro2" class="intro-img">
    <img src="Bild3.png" id="intro3" class="intro-img">
</div>

<div id="agb-module">
    <div class="module-card">
        <h2 style="color: var(--main-color); text-align: center;">–ó–ê–ö–û–ù VCHF</h2>
        <p style="font-size: 12px; color: #ccc;">–°–æ–≤–µ—Å—Ç—å ‚Äî —ç—Ç–æ —á–∞—Å—Ç–∏—Ü–∞ –±–æ–≥–∞ –≤ —á–µ–ª–æ–≤–µ–∫–µ. –ñ–∏—Ç—å –ø–æ —Å–æ–≤–µ—Å—Ç–∏ ‚Äî –∑–Ω–∞—á–∏—Ç –ø—Ä–∏–∑–Ω–∞–≤–∞—Ç—å —Å–≤–æ–∏ —Ä–µ—à–µ–Ω–∏—è.</p>
        <button onclick="acceptAgb()" class="btn-main">–ü–†–ò–ù–Ø–¢–¨ –ü–†–ê–í–ò–õ–ê</button>
    </div>
</div>

<div id="app-content">
    <div class="lang-panel">
        <span class="lang-btn" id="l-ru" onclick="setLang('ru')">üá∑üá∫</span>
        <span class="lang-btn" id="l-ua" onclick="setLang('ua')">üá∫üá¶</span>
        <span class="lang-btn" id="l-de" onclick="setLang('de')">üá©üá™</span>
        <span class="lang-btn" id="l-fr" onclick="setLang('fr')">üá´üá∑</span>
        <span class="lang-btn" id="l-it" onclick="setLang('it')">üáÆüáπ</span>
    </div>

    <div class="module-card">
        <div id="penthouse-name" style="font-size:18px; color:var(--main-color); font-weight:900;">–ü–ï–ù–¢–•–ê–£–° –£–î–ê–ß–ò</div>
        <div id="penthouse-sub" style="font-size:10px; color:#888; margin-bottom:10px;">–¢–∞–º, –≥–¥–µ –∂–∏–≤—É—Ç —Ç–≤–æ–∏ –±—É–¥—É—â–∏–µ –º–∏–ª–ª–∏–æ–Ω—ã</div>
    </div>

    <div class="module-card">
        <div class="tab-header">
            <span onclick="switchTab('active')" id="tab-active" class="tab-link active">–°–ï–ô–§ –° –ê–ö–¶–ò–Ø–ú–ò</span>
            <span onclick="switchTab('archive')" id="tab-archive" class="tab-link">–í–ò–ù–ù–´–ô –ü–û–ì–†–ï–ë</span>
            <span onclick="switchTab('stats')" id="tab-stats" class="tab-link">–°–ò–ì–ê–†–ù–ê–Ø –ö–û–ú–ù–ê–¢–ê</span>
        </div>
        <div id="sec-active"><div style="border: 1px solid var(--main-color); padding: 10px; border-radius:10px; font-size:12px;">–ú–ê–†–ê–§–û–ù –í –ü–û–¢–û–ö–ï</div></div>
        <div id="sec-archive" style="display:none;">–í–∏–Ω—Ç–∞–∂–Ω—ã–µ —Ç–∏—Ä–∞–∂–∏ –ø—É—Å—Ç—ã.</div>
        <div id="sec-stats" style="display:none;">–°—Ç—Ä–∞—Ç–µ–≥–∏—è –º–∏–ª–ª–∏–æ–Ω–µ—Ä–∞...</div>
    </div>

    <div class="module-card">
        <div class="smart-tools" style="display:flex; justify-content:center; gap:8px; margin-bottom:10px;">
            <button class="tool-btn" style="padding:8px 12px; border-radius:10px; border:1px solid #333; background:#000; color:#fff;" onclick="toggleStatsMode('hot')" id="btn-hot">üî• HOT</button>
            <button class="tool-btn" style="padding:8px 12px; border-radius:10px; border:1px solid #333; background:#000; color:#fff;" onclick="toggleStatsMode('cold')" id="btn-cold">‚ùÑÔ∏è COLD</button>
        </div>
        
        <div id="stats-nav" style="display:none; justify-content:center; gap:5px; margin-bottom:10px;">
            <button class="tool-btn" style="font-size:8px;" onclick="setPeriod('month', this)" id="p-month">–ú–ï–°–Ø–¶</button>
            <button class="tool-btn" style="font-size:8px;" onclick="setPeriod('year', this)" id="p-year">–ì–û–î</button>
            <button class="tool-btn" style="font-size:8px;" onclick="setPeriod('all', this)" id="p-all">–í–°–Å –í–†–ï–ú–Ø</button>
        </div>

        <div id="stat-info" style="min-height:20px; font-size:10px; color:#666; margin-bottom:10px;"></div>

        <div class="grid" id="main-grid"></div>

        <div class="price-counter" id="calc-text">1 –ë–∏–ª–µ—Ç √ó 2.50 = 2.50 CHF</div>
        
        <button class="btn-main" id="main-btn" onclick="runEngine()">–ü–û–î–ü–ò–°–ê–¢–¨ –ö–û–ù–¢–†–ê–ö–¢</button>
    </div>
</div>

<script>
    const tg = window.Telegram.WebApp;
    let selected = [];
    let currentLang = 'ru';
    let activeType = null;
    let currentPeriod = 'month';
    let lastClickedNum = null;

    const STATS_DATA = {
        hot: { month: [7, 12, 18, 22, 31, 37], year: [5, 12, 19, 24, 33, 41], all: [1, 10, 20, 30, 40, 42] },
        cold: { month: [2, 15, 29, 42, 10, 3], year: [8, 14, 21, 27, 35, 39], all: [4, 11, 23, 31, 36, 38] }
    };

    const dict = {
        ru: { title: "–ü–ï–ù–¢–•–ê–£–° –£–î–ê–ß–ò", sub: "–¢–∞–º, –≥–¥–µ –∂–∏–≤—É—Ç —Ç–≤–æ–∏ –±—É–¥—É—â–∏–µ –º–∏–ª–ª–∏–æ–Ω—ã", tabs: ["–°–ï–ô–§ –° –ê–ö–¶–ò–Ø–ú–ò", "–í–ò–ù–ù–´–ô –ü–û–ì–†–ï–ë", "–°–ò–ì–ê–†–ù–ê–Ø –ö–û–ú–ù–ê–¢–ê"], btn: "–ü–û–î–ü–ò–°–ê–¢–¨ –ö–û–ù–¢–†–ê–ö–¢", calc: "1 –ë–∏–ª–µ—Ç √ó 2.50 = 2.50 CHF", hot: "–í –æ–≥–Ω–µ!", cold: "–°–ø—è—â–∏–π –≥–∏–≥–∞–Ω—Ç.", neut: "–ñ–¥–µ—Ç —á–∞—Å–∞." },
        de: { title: "GL√úCKS-PENTHOUSE", sub: "Wo Ihre zuk√ºnftigen Millionen leben", tabs: ["AKTIEN-TRESOR", "WEINKELLER", "ZIGARRENZIMMER"], btn: "VERTRAG SIGNIEREN", calc: "1 Ticket √ó 2.50 = 2.50 CHF", hot: "Brennt!", cold: "Schlafender Riese.", neut: "Wartet ab." },
        ua: { title: "–ü–ï–ù–¢–•–ê–£–° –£–î–ê–ß–Ü", sub: "–î–µ –∂–∏–≤—É—Ç—å —Ç–≤–æ—ó –º–∞–π–±—É—Ç–Ω—ñ –º—ñ–ª—å–π–æ–Ω–∏", tabs: ["–°–ï–ô–§ –ó –ê–ö–¶–Ü–Ø–ú–ò", "–í–ò–ù–ù–ò–ô –õ–¨–û–•", "–°–ò–ì–ê–†–ù–ê –ö–Ü–ú–ù–ê–¢–ê"], btn: "–ü–Ü–î–ü–ò–°–ê–¢–ò –ö–û–ù–¢–†–ê–ö–¢", calc: "1 –ë—ñ–ª–µ—Ç √ó 2.50 = 2.50 CHF", hot: "–£ –≤–æ–≥–Ω—ñ!", cold: "–°–ø–ª—è—á–∏–π –≥—ñ–≥–∞–Ω—Ç.", neut: "–ß–µ–∫–∞—î —á–∞—Å—É." },
        fr: { title: "PENTHOUSE DE LA CHANCE", sub: "O√π vivent vos futurs millions", tabs: ["COFFRE D'ACTIONS", "CAVE √Ä VIN", "FUMOIR"], btn: "SIGNER LE CONTRAT", calc: "1 Billet √ó 2.50 = 2.50 CHF", hot: "En feu!", cold: "G√©ant endormi.", neut: "Attend son heure." },
        it: { title: "ATTICO DELLA FORTUNA", sub: "Dove vivono i tuoi futuri milioni", tabs: ["CASSAFORTE AZIONARIA", "CANTINA", "SALA SIGARI"], btn: "FIRMA IL CONTRATTO", calc: "1 Biglietto √ó 2.50 = 2.50 CHF", hot: "In fiamme!", cold: "Gigante dormiente.", neut: "In attesa." }
    };

    function runIntro() {
        const steps = [{id:'intro1',s:400,e:2000},{id:'intro2',s:2200,e:3800},{id:'intro3',s:4000,e:5600}];
        steps.forEach(st => {
            setTimeout(() => document.getElementById(st.id).classList.add('active'), st.s);
            setTimeout(() => document.getElementById(st.id).style.opacity='0', st.e);
        });
        setTimeout(() => {
            document.getElementById('intro-container').style.display='none';
            document.getElementById('agb-module').style.display='flex';
        }, 6000);
    }
    window.onload = runIntro;

    function acceptAgb() {
        document.getElementById('agb-module').style.display='none';
        const app = document.getElementById('app-content');
        app.style.display='block';
        setTimeout(() => app.style.opacity='1', 50);
        setLang('ru');
    }

    const gridDiv = document.getElementById('main-grid');
    for (let i = 1; i <= 42; i++) {
        const c = document.createElement('div');
        c.className = 'cell'; c.id = `cell-${i}`; c.innerText = i;
        c.onclick = () => { handleCellClick(i, c); lastClickedNum = i; updateAnalyticLang(); };
        gridDiv.appendChild(c);
    }

    function handleCellClick(i, el) {
        if(selected.includes(i)) { selected = selected.filter(n => n !== i); el.classList.remove('selected'); }
        else if(selected.length < 6) { selected.push(i); el.classList.add('selected'); tg.HapticFeedback.impactOccurred('light'); }
    }

    /* –ü–£–ù–ö–¢ 4: –ê–≤—Ç–æ-–ø–µ—Ä–µ–≤–æ–¥ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ */
    function updateAnalyticLang() {
        if(!lastClickedNum) return;
        const box = document.getElementById('stat-info');
        const d = dict[currentLang];
        let msg = d.neut;
        if (STATS_DATA.hot[currentPeriod].includes(lastClickedNum)) msg = `üî• ${d.hot}`;
        else if (STATS_DATA.cold[currentPeriod].includes(lastClickedNum)) msg = `‚ùÑÔ∏è ${d.cold}`;
        box.innerText = msg;
    }

    function setLang(l) {
        currentLang = l;
        const d = dict[l];
        document.getElementById('penthouse-name').innerText = d.title;
        document.getElementById('penthouse-sub').innerText = d.sub;
        document.getElementById('tab-active').innerText = d.tabs[0];
        document.getElementById('tab-archive').innerText = d.tabs[1];
        document.getElementById('tab-stats').innerText = d.tabs[2];
        document.getElementById('main-btn').innerText = d.btn;
        document.getElementById('calc-text').innerText = d.calc;
        
        document.querySelectorAll('.lang-btn').forEach(b => b.classList.remove('active-lang'));
        document.getElementById('l-' + l).classList.add('active-lang');
        
        updateAnalyticLang(); // –ú–≥–Ω–æ–≤–µ–Ω–Ω—ã–π –ø–µ—Ä–µ—Å—á–µ—Ç —è–∑—ã–∫–∞ –æ–ø–∏—Å–∞–Ω–∏—è
        tg.HapticFeedback.selectionChanged();
    }

    function toggleStatsMode(type) {
        const nav = document.getElementById('stats-nav');
        if (activeType === type) { activeType = null; nav.style.display = 'none'; }
        else { activeType = type; nav.style.display = 'flex'; }
        applyHeatmap();
    }

    function applyHeatmap() {
        document.querySelectorAll('.cell').forEach(c => c.classList.remove('is-hot', 'is-cold'));
        if (!activeType) return;
        STATS_DATA[activeType][currentPeriod].forEach(n => {
            const cell = document.getElementById(`cell-${n}`);
            if (cell) cell.classList.add(activeType === 'hot' ? 'is-hot' : 'is-cold');
        });
    }

    function switchTab(tab) {
        ['active', 'archive', 'stats'].forEach(t => { document.getElementById('sec-' + t).style.display = 'none'; document.getElementById('tab-' + t).classList.remove('active'); });
        document.getElementById('sec-' + tab).style.display = 'block'; document.getElementById('tab-' + tab).classList.add('active');
    }

    function runEngine() {
        if(selected.length < 6) { tg.showAlert("–í—ã–±–µ—Ä–∏—Ç–µ 6 —á–∏—Å–µ–ª!"); return; }
        tg.showAlert("–ö–æ–Ω—Ç—Ä–∞–∫—Ç –ø–æ–¥–ø–∏—Å–∞–Ω!");
    }
</script>
</body>
</html>
