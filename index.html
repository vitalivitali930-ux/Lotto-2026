    if(logo) logo.style.opacity = '1';
    
    setTimeout(() => {
        document.getElementById('ui-layer').style.opacity = '0';
        document.getElementById('app-content').style.display = 'block';
        setTimeout(() => {
            document.getElementById('app-content').style.opacity = '1';
            document.getElementById('ui-layer').style.display = 'none';
        }, 500);
    }, 2500);
}, 500);
/* Spark Memory: Final Window 4
   - Draw Check: Ð¡Ð¸Ð¼ÑƒÐ»Ñ Ñ†Ð¸Ñ Ñ‚Ð¸Ñ€Ð°Ð¶Ð° Swiss Lotto
   - Steuerlogik: Ð Ð²Ñ‚Ð¾-ÑƒÐ´ÐµÑ€Ð¶Ð°Ð½Ð¸Ðµ 35 % Ð¿Ñ€Ð¸ Ð²Ñ‹Ð¸Ð³Ñ€Ñ‹ÑˆÐµ > 1,2 Mio
   - VIP-Protokoll: ÐŸÐµÑ€ÐµÑ…Ð¾Ð´ Ð½Ð° Ð¿ÐµÑ€Ñ Ð¾Ð½Ð°Ð»ÑŒÐ½Ð¾Ðµ Ð¾Ð±Ñ Ð»ÑƒÐ¶Ð¸Ð²Ð°Ð½Ð¸Ðµ
   - Integrität: ÐœÐ°Ð½Ð¸Ñ„ÐµÑ Ñ‚ ÐœÐ¾Ð½Ð¾Ð»Ð¸Ñ‚Ð° Ð·Ð°Ð²ÐµÑ€ÑˆÐµÐ½. */

// --- 1. Ð¡Ð˜ÐœÐ£Ð›Ð¯Ð¦Ð˜Ð¯ Ð¢Ð˜Ð Ð Ð–Ð Ð˜ ÐŸÐ ÐžÐ'Ð•Ð ÐšÐ Ð'Ð«Ð˜Ð“Ð Ð«Ð¨Ð ---
function simulateDraw(ticketId) {
    const ticket = myTickets.find(t => t.id === ticketId);
    if (!ticket || ticket.status.includes("CHECKED")) return;

    tg.showConfirm("Ð'Ñ‹Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÑŒ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÑƒ Ð±Ð¸Ð»ÐµÑ‚Ð° Ñ‡ÐµÑ€ÐµÐ· Ð¦ÐµÐ½Ñ‚Ñ€ ÐžÐ±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¸?", (ok) => {
        Falls (!ok) Rückgabe;

        // Ð“ÐµÐ½ÐµÑ€Ð°Ñ†Ð¸Ñ "Ð'Ñ‹Ð¸Ð³Ñ€Ñ‹ÑˆÐ½Ð¾Ð¹ ÐºÐ¾Ð¼Ð±Ð¸Ð½Ð°Ñ†Ð¸Ð¸" (Ð˜Ð¼Ð¸Ñ‚Ð°Ñ†Ð¸Ñ Ñ ÐµÑ€Ð²ÐµÑ€Ð° Swisslos)
        const winningNums = [];
        while(winningNums.length < 6) {
            let r = Math.floor(Math.random() * 42) + 1;
            if(!winningNums.includes(r)) winningNums.push(r);
        }
        const winningSuper = Math.floor(Math.random() * 6) + 1;

        // Ð¡Ñ‡Ð¸Ñ‚Ð°ÐµÐ¼ Ñ Ð¾Ð²Ð¿Ð°Ð´ÐµÐ½Ð¸Ñ
        const matches = ticket.nums.filter(n => winningNums.includes(n));
        const isSuperMatch = ticket.super === WinningSuper;

        // Ð›Ð¾Ð³Ð¸ÐºÐ° Ð½Ð°Ð³Ñ€Ð°Ð´ (ÐœÐ°Ñ ÑˆÑ‚Ð°Ð±Ð¸Ñ€ÑƒÐµÐ¼Ð°Ñ Ð¼Ð¾Ð´ÐµÐ»ÑŒ)
        let winAmount = 0;
        if (matches.length === 3) winAmount = 10.00;
        if (matches.length === 3 && isSuperMatch) winAmount = 25.00;
        if (matches.length === 4) winAmount = 100.00;
        if (matches.length === 5) winAmount = 5000.00;
        if (matches.length === 6 && isSuperMatch) winAmount = 25000000.00; // Ð”Ð–Ð•ÐšÐŸÐžÐ¢!

        processPrize(ticket, winAmount, winningNums, winningSuper);
    });
}

// --- 2. Ð Ð Ð›ÐžÐ“ÐžÐ'Ð«Ð™ Ð¤Ð˜Ð›Ð¬Ð¢Ð Ð˜ VIP-ÐŸÐ ÐžÐ¢ÐžÐšÐžÐ› ---
function processPrize(ticket, amount, winningNums, winningSuper) {
    ticket.status = "CHECKED";
    sei endgültige Zahlung = Betrag;
    let taxNote = "";

    if (amount > 1200000) {
        // ÐŸÑ€Ð¾Ñ‚Ð¾ÐºÐ¾Ð» Ð Ð³ÐµÐ½Ñ‚Ð°: Ð Ð°Ð»Ð¾Ð³Ð¾Ð²Ñ‹Ð¹ Ñ„Ð¸Ð»ÑŒÑ‚Ñ€ 35% (Verauslagung)
        const tax = amount * 0.35;
        Endbetrag = Betrag - Steuer;
        taxNote = `\n(Ð Ð°Ð»Ð¾Ð³ 35% ÑƒÐ´ÐµÑ€Ð¶Ð°Ð½: ${tax.toFixed(2)} CHF)`;
        
        tg.showAlert(`ðŸ“¥ðŸ“¥ VIP Ð'Ð«Ð˜Ð“Ð Ð«Ð¨! ðŸ“¥ðŸ“¥\nÐ¡ÑƒÐ¼Ð¼Ð°: ${amount.toFixed(2)} CHF${taxNote}\n\nÐ¡ Ð²Ð°Ð¼Ð¸ Ñ ​​Ð²Ñ Ð¶ÐµÑ‚Ñ Ñ Ð¿ÐµÑ€Ñ Ð¾Ð½Ð°Ð»ÑŒÐ½Ñ‹Ð¹ Ð Ð³ÐµÐ½Ñ‚ Wanderer Ð´Ð»Ñ Ð¾Ñ„Ð¾Ñ€Ð¼Ð»ÐµÐ½Ð¸Ñ Ð¿ÐµÑ€ÐµÐ²Ð¾Ð´Ð°.`);
    } else if (amount > 0) {
        // Ð—Ð°Ñ‡Ð¸Ñ Ð»ÐµÐ½Ð¸Ðµ Ð½Ð° VCHF Ð±Ð°Ð»Ð°Ð½Ñ (Ð Ð³ÐµÐ½Ñ‚Ñ ÐºÐ°Ñ ÐºÐ¾Ð¼Ð¸Ñ Ñ Ð¸Ñ 1%+1% ÑƒÐ¶Ðµ Ð²Ð½ÑƒÑ‚Ñ€Ð¸ ÐºÑƒÑ€Ñ Ð° Ð¸Ð»Ð¸ Ñ Ð²ÐµÑ€Ñ…Ñƒ)
        Benutzerguthaben.VCHF += Endgehalt;
        updateWalletUI();
        tg.showAlert(`ÐŸÐžÐ—Ð“Ð Ð Ð'Ð›Ð¯Ð•Ðœ!\nÐ'Ñ‹Ð¸Ð³Ñ€Ñ‹Ñˆ: ${finalPay.toFixed(2)} V CHF\nÐ¡Ð¾Ð²Ð¿Ð°Ð´ÐµÐ½Ð¸Ñ : ${winningNums.join(', ')}`);
    } anders {
        tg.showAlert(`Ðš Ñ Ð¾Ð¶Ð°Ð»ÐµÐ½Ð¸ÑŽ, Ð±Ð¸Ð»ÐµÑ‚ Ð±ÐµÐ· Ð²Ñ‹Ð¸Ð³Ñ€Ñ‹ÑˆÐ°.\nÐ'Ñ‹Ð¿Ð°Ð»Ð¸: ${winningNums.join(', ')} |.
    }

    localStorage.setItem('vchf_tickets', JSON.stringify(myTickets));
    renderTicketsList();
}

// --- 3. ÐŸÐžÐŸÐžÐ›Ð Ð•Ð Ð˜Ð• (Ð'Ð Ð ÐšÐžÐ'Ð¡ÐšÐ Ð¯ Ð—Ð Ð“Ð›Ð£Ð¨ÐšÐ ) ---
function openBankDeposit() {
    tg.showConfirm("Swiss QR-bill 50.00 CHF?", (ok) => {
        if(ok) {
            tg.showProgressTree ? tg.showProgressTree(true) : null;
            setTimeout(() => {
                userBalance.CHF += 50.00;
                updateWalletUI();
                tg.showAlert("ÐžÐŸÐ›Ð Ð¢Ð ÐŸÐžÐ”Ð¢Ð'Ð•Ð Ð–Ð”Ð•Ð Ð !\n50.00 CHF Ð·Ð°Ñ‡Ð¸Ñ Ð»ÐµÐ½Ñ‹ Ð½Ð° Ð²Ð°Ñˆ Ð±Ð°Ð»Ð°Ð½Ñ .");
                tg.HapticFeedback.notificationOccurred('success');
            }, 2500);
        }
    });
}

// ÐŸÐµÑ€ÐµÑ…Ð²Ð°Ñ‚Ñ‹Ð²Ð°ÐµÐ¼ ÐºÐ»Ð¸ÐºÐ¸ Ð½Ð° Ð±Ð¸Ð»ÐµÑ‚Ñ‹ Ð² Ñ Ð¿Ð¸Ñ ÐºÐµ
document.addEventListener('click', (e) => {
    const card = e.target.closest('.ticket-card-ui'); // Ð•Ñ Ð»Ð¸ Ð±Ñ‹ Ð¼Ñ‹ Ð´Ð¾Ð±Ð°Ð²Ð¸Ð»Ð¸ ÐºÐ»Ð°Ñ Ñ
    // Ð“Ð»Ñ Ñ‚ÐµÐºÑƒÑ‰ÐµÐ³Ð¾ ÑƒÐ¿Ñ€Ð¾Ñ‰ÐµÐ½Ð½Ð¾Ð³Ð¾ Ñ€ÐµÐ½Ð´ÐµÑ€Ð° Ð´Ð¾Ð±Ð°Ð²Ð¸Ð¼ Ð²Ñ‹Ð·Ð¾Ð² Ð² renderTicketsList
});

// Ð”Ð¾Ð¿. Ð¿Ñ€Ð°Ð²ÐºÐ° Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¸ Ñ€ÐµÐ½Ð´ÐµÑ€Ð° Ð´Ð»Ñ ÐºÐ»Ð¸ÐºÐ°Ð±ÐµÐ»ÑŒÐ½Ð¾Ñ Ñ‚Ð¸ (Ð¸Ð· Window 2)
function renderTicketsList() {
    const list = document.getElementById('active-list');
    if (myTickets.length === 0) {
        list.innerHTML = `<div style="padding:50px; color:#666;">Ð'Ð¸Ð»ÐµÑ‚Ð¾Ð² Ð¿Ð¾ÐºÐ° Ð½ÐµÑ‚</div>`;
        zurückkehren;
    }
    list.innerHTML = myTickets.map(t => `
        <div onclick="simulateDraw('${t.id}')" style="background:#111; border:1px solid ${t.status === 'CHECKED' ? '#222' : 'var(--main-color)'}; margin:10px; padding:15px; border-radius:12px; text-align:left; position:relative; cursor:pointer;">
            <div style="color:var(--main-color); font-size:10px;">${t.id}</div>
            <div style="font-weight:bold; margin:5px 0; letter-spacing:2px;">${t.nums.join(' ')} | <span style="color:var(--main-color)">${t.super}</span></div>
            <div style="font-size:10px; color:#666;">${t.date}</div>
            <div style="position:absolute; right:15px; top:15px; font-size:8px; background:#222; padding:3px 6px; border-radius:4px;">${t.status}</div>
        </div>
    `).reverse().join('');
}

// --- 4. Ð—Ð ÐšÐ Ð«Ð¢Ð˜Ð• ÐœÐžÐ ÐžÐ›Ð˜Ð¢Ð ---
console.log("Engine 'Lotto Bi-Turbo' initialisiert. Modus: Agent Courier.");
</script>
</body>
        </html>
