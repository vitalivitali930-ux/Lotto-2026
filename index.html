<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Lotto - –î–≤–∏–∂–æ–∫ VCHF Ultimate 2.0</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root { 
            --main-color: #d4af37; 
            --main-gradient: linear-gradient(145deg, #f9e27d, #d4af37);
            --theme-glow: rgba(212, 175, 55, 0.35); 
            --sphere-base: #1a1a1a;
            --white-sphere: radial-gradient(circle at 35% 35%, #444 0%, #1a1a1a 40%, #000 100%);
            --gold-sphere: radial-gradient(circle at 35% 35%, #fff9d6 0%, #f9e27d 30%, #d4af37 60%, #8a6d1c 100%);
            --cell-text: #ffffff; 
            --hot-color: #ff4500;
            --cold-color: #1e90ff;
            --process-color: #00ffff;
            --neon-blue: #00a3ff;
            --gold: #ffcc00;
            --onyx: #050505;
            --neon: #00f3ff;
        } 

        body { 
            background: #000; 
            color: #fff; 
            font-family: -apple-system, 'Orbitron', sans-serif; 
            text-align: center; margin: 0; overflow: hidden; 
            transition: background 0.5s ease;
        } 

        /* --- –ò–ù–¢–†–û –°–¢–ò–õ–ò (VCHF 2.6) --- */
        #intro-layer { position: fixed; inset: 0; z-index: 20000; background: var(--onyx); }
        #introCanvas { position: absolute; top: 0; left: 0; z-index: 1; }
        #ui-layer {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            z-index: 10; display: flex; flex-direction: column;
            justify-content: center; align-items: center;
            background: radial-gradient(circle, transparent 20%, rgba(0,0,0,0.9) 100%);
            pointer-events: none;
        }
        .logo-box { width: 130px; height: 130px; opacity: 0; transition: opacity 3s cubic-bezier(0.4, 0, 0.2, 1); margin-bottom: 25px; }
        .logo-box img { width: 100%; filter: drop-shadow(0 0 20px var(--gold)); }
        .status-label { color: var(--neon); font-size: 10px; letter-spacing: 6px; text-transform: uppercase; text-align: center; height: 20px; text-shadow: 0 0 10px var(--neon); }

        /* --- –û–°–ù–û–í–ù–´–ï –¢–ï–ú–´ --- */
        body.theme-cherry { --main-color: #C511A4; --main-gradient: linear-gradient(145deg, #FF1493, #C511A4); --theme-glow: rgba(197, 17, 164, 0.35); }
        body.theme-silver { --main-color: #c0c0c0; --main-gradient: linear-gradient(145deg, #e0e0e0, #c0c0c0); --theme-glow: rgba(192, 192, 192, 0.35); }
        body.theme-lime { --main-color: #32CD32; --main-gradient: linear-gradient(145deg, #adff2f, #32CD32); --theme-glow: rgba(50, 205, 50, 0.35); }
        body.theme-cyan { --main-color: #00ffff; --main-gradient: linear-gradient(145deg, #e0ffff, #00ffff); --theme-glow: rgba(0, 255, 255, 0.35); }
        body.theme-gold { --main-color: #d4af37; --main-gradient: linear-gradient(145deg, #f9e27d, #d4af37); --theme-glow: rgba(212, 175, 55, 0.35); } 

        @keyframes sphere-breathe {
            0%, 100% { box-shadow: inset -3px -3px 8px rgba(0,0,0,0.8), 0 5px 12px rgba(0,0,0,0.6), 0 0 5px var(--main-color); border-color: rgba(255, 255, 255, 0.1); transform: scale(1); }
            50% { box-shadow: inset -3px -3px 8px rgba(0,0,0,0.8), 0 5px 22px rgba(0,0,0,0.4), 0 0 20px var(--main-color); border-color: var(--main-color); transform: scale(1.04); }
        }

        @keyframes processing-flash {
            0% { background: var(--process-color); box-shadow: 0 0 25px var(--process-color); transform: scale(1.15); }
            100% { background: var(--white-sphere); box-shadow: none; transform: scale(1); }
        }
        .cell.processing-flash { animation: processing-flash 0.15s ease-out; z-index: 5; }

        #legal-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.92); backdrop-filter: blur(15px); z-index: 30000; display: none; flex-direction: column; justify-content: center; align-items: center; padding: 25px; }
        .legal-box { background: #111; border: 2px solid var(--main-color); padding: 30px; border-radius: 25px; max-width: 320px; text-align: center; box-shadow: 0 0 50px rgba(0,0,0,0.9), 0 0 20px var(--theme-glow); } 

        .lang-panel { position: relative; height: 65px; margin-bottom: 25px; display: flex; justify-content: center; align-items: center; z-index: 1001; }
        .lang-btn { font-size: 30px; cursor: pointer; position: absolute; transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275); z-index: 5; }
        .pos-ru { transform: translate(-100px, 45px); }
        .pos-fr { transform: translate(-50px, 70px); }
        .pos-de { transform: translate(0px, 80px); }
        .pos-en { transform: translate(50px, 70px); }
        .pos-ua { transform: translate(100px, 45px); } 

        #app-content { display: none; opacity: 0; transition: opacity 1s ease; height: 100vh; overflow: hidden; }
        .page { height: calc(100vh - 75px); overflow-y: auto; display: none; padding: 15px 0 30px; }
        .page.active { display: block; } 

        .nav-bar { position: fixed; bottom: 0; left: 0; right: 0; height: 70px; background: rgba(10,10,10,0.95); display: flex; justify-content: space-around; align-items: center; border-top: 1.5px solid var(--main-color); z-index: 1000; }
        .nav-item { color: #666; font-size: 10px; cursor: pointer; transition: 0.3s; }
        .nav-item.active { color: var(--main-color); transform: translateY(-3px); }
        .nav-item span { display: block; font-size: 24px; margin-bottom: 2px; } 

        .balance-container { display: flex; gap: 10px; padding: 0 15px 15px; }
        .bal-card { flex: 1; border-radius: 12px; padding: 12px; background: linear-gradient(145deg, #1a1a1a, #0a0a0a); border: 1.5px solid #444; transition: all 0.4s ease; cursor: pointer; opacity: 0.5; filter: grayscale(0.7) brightness(0.8); }
        .bal-card.active-wallet { opacity: 1; filter: grayscale(0) brightness(1.2); border-color: var(--main-color); background: rgba(255, 255, 255, 0.07); box-shadow: 0 0 15px var(--main-color); transform: scale(1.05); }
        .bal-val { font-size: 20px; font-weight: bold; color: #32CD32; } 

        .grid { display: grid; grid-template-columns: repeat(7, 1fr); gap: 10px; padding: 0 15px; max-width: 400px; margin: 0 auto; }
        .cell { aspect-ratio: 1/1; background: var(--white-sphere); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 800; color: var(--cell-text); font-size: 19px; transition: 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); cursor: pointer; position: relative; border: 1px solid rgba(255,255,255,0.1); animation: sphere-breathe 4s infinite ease-in-out; }
        .cell.selected { background: var(--main-gradient); color: #000; transform: scale(1.1) translateY(-5px); box-shadow: 0 10px 25px rgba(0,0,0,0.5), 0 0 30px var(--main-color); border: 2px solid #fff; z-index: 10; animation: none; }
<div id="legal-overlay">
    <div class="legal-box">
        <div id="legal-content" style="font-size: 14px; line-height: 1.6; margin-bottom: 25px; color: #eee;"></div>
        <button class="btn-main" onclick="acceptLegal()" id="legal-agree-btn" style="width:100%; margin-top:0; padding:15px;"></button>
    </div>
</div> 

<div id="intro-layer">
    <canvas id="introCanvas"></canvas>
    <div id="ui-layer">
        <div id="mainLogo" class="logo-box">
            <img src="1771489965074(1).png" alt="Logo">
        </div>
        <div id="mainStatus" class="status-label">INITIALIZING ENGINE...</div>
    </div>
</div>

<div id="app-content">
    <div id="page-play" class="page active">
        <div class="lang-panel" id="dynamic-langs"></div>
        <div class="theme-toggle" onclick="document.querySelector('.theme-panel').classList.toggle('open')">üé®</div>
        <div class="theme-panel">
            <div class="dot" style="background: #d4af37;" onclick="setTheme('gold')"></div>
            <div class="dot" style="background: #32CD32;" onclick="setTheme('lime')"></div>
            <div class="dot" style="background: #00ffff;" onclick="setTheme('cyan')"></div>
            <div class="dot" style="background: #C511A4;" onclick="setTheme('cherry')"></div>
            <div class="dot" style="background: #c0c0c0;" onclick="setTheme('silver')"></div>
        </div> 

        <div class="balance-container">
            <div class="bal-card active-wallet" id="card-vchf" onclick="switchCurrency('VCHF')">
                <div style="font-size:10px;">VIRTUAL VCHF</div>
                <div class="bal-val" id="vchf-val">100.00</div>
            </div>
            <div class="bal-card" id="card-chf" onclick="switchCurrency('CHF')">
                <div style="font-size:10px;">REAL CHF</div>
                <div class="bal-val" id="chf-val">0.00</div>
            </div>
        </div> 

        <div class="ticket-controls">
            <div class="smart-tools">
                <button class="tool-btn" onclick="togglePick('hot')" id="btn-hot">üî• HOT</button>
                <button class="tool-btn" onclick="togglePick('cold')" id="btn-cold">‚ùÑÔ∏è COLD</button>
                <button class="tool-btn" onclick="togglePick('sleeping')" id="btn-sleeping">üí§ SLEEPING</button>
                <button class="tool-btn" onclick="randomFill()">üé≤ RANDOM</button>
            </div>
            <div class="stats-period" id="stats-p-box">
                <button class="p-btn active" onclick="setPeriod('month')" id="p-month">MONTH</button>
                <button class="p-btn" onclick="setPeriod('year')" id="p-year">YEAR</button>
                <button class="p-btn" onclick="setPeriod('all')" id="p-all">ALL TIME</button>
            </div>
            <div class="counter-box">
                <button class="btn-round" onclick="updateTicketCount(-1)">‚àí</button>
                <span style="font-size: 20px; font-weight: bold;"><span id="ticket-count">1</span> √ó</span>
                <button class="btn-round" onclick="updateTicketCount(1)">+</button>
            </div>
        </div> 

        <div class="grid" id="main-grid"></div>
        <div id="l-super" class="super-title">SUPERZAHL</div>
        <div class="super-grid" id="s-grid"></div>
        <div class="total-display">
            <span id="l-total">Total</span>: <span id="display-total">2.50 VCHF</span>
        </div>
        <button class="btn-main" id="main-btn" onclick="runEngine()">TICKET BEST√ÑTIGEN</button>
    </div>
    <script>
    /* [VCHF_MONOLITH_LOGIC] –ê–≤—Ç–æ—Ä: –ò—Å–∫—Ä–∞. –ü—Ä–æ—Ç–æ–∫–æ–ª: –ò–Ω—ä–µ–∫—Ü–∏—è. */
    const tg = window.Telegram.WebApp;
    tg.expand(); 

    const sndClick = new Audio('https://www.soundjay.com/buttons/sounds/button-16.mp3');
    const sndShuffle = new Audio('https://www.soundjay.com/misc/sounds/marbles-shake-1.mp3');
    const sndWin = new Audio('https://www.soundjay.com/buttons/sounds/button-09.mp3'); 

    let realStatsDB = {};
    let myTickets = JSON.parse(localStorage.getItem('vchf_user_tickets')) || [];
    let selected = [], superNum = null, currentPeriod = 'month', ticketCount = 1, currentCurrency = 'VCHF', currentLang = 'en', pendingLang = 'en', bgsTimer = null;
    let activeSmartTool = null; 
    const realPrice = 2.50; 

    const dict = {
        ru: { btn: "–ü–û–î–¢–í–ï–†–î–ò–¢–¨", super: "–ë–û–ù–£–°–ù–û–ï –ß–ò–°–õ–û", month: "–ú–ï–°–Ø–¶", year: "–ì–û–î", all: "–ó–ê –í–°–Å –í–†–ï–ú–Ø", total: "–ò—Ç–æ–≥–æ", status: "–°—Ç–∞—Ç—É—Å –æ–±–Ω–æ–≤–ª—ë–Ω!", game: "–ò–ì–†–ê", tickets: "–ë–ò–õ–ï–¢–´", stats: "–°–¢–ê–¢–°", activeT: "–ú–û–ò –ë–ò–õ–ï–¢–´", hit: "–õ–ò–ß–ù–ê–Ø –ö–ê–†–¢–ê", del: "–£–î–ê–õ–ò–¢–¨", lock: "–ó–ê–ë–õ–û–ö–ò–†–û–í–ê–ù–û" },
        ua: { btn: "–ü–Ü–î–¢–í–ï–†–î–ò–¢–ò", super: "–ë–û–ù–£–°–ù–ï –ß–ò–°–õ–û", month: "–ú–Ü–°–Ø–¶–¨", year: "–†–Ü–ö", all: "–ó–ê –í–ï–°–¨ –ß–ê–°", total: "–†–∞–∑–æ–º", status: "–°—Ç–∞—Ç—É—Å –æ–Ω–æ–≤–ª–µ–Ω–æ!", game: "–ì–†–ê", tickets: "–ö–í–ò–¢–ö–ò", stats: "–°–¢–ê–¢–°", activeT: "–ú–û–á –ö–í–ò–¢–ö–ò", hit: "–û–°–û–ë–ò–°–¢–ê –ö–ê–†–¢–ê", del: "–í–ò–î–ê–õ–ò–¢–ò", lock: "–ó–ê–ë–õ–û–ö–û–í–ê–ù–û" },
        de: { btn: "BEST√ÑTIGEN", super: "SUPERZAHL", month: "MONAT", year: "JAHR", all: "ALLE ZEIT", total: "Gesamt", status: "Status aktualisiert!", game: "SPIEL", tickets: "TICKETS", stats: "STATS", activeT: "MEINE TICKETS", hit: "PERS√ñNLICHE KARTE", del: "L√ñSCHEN", lock: "GESPERRT" },
        en: { btn: "CONFIRM", super: "SUPER NUMBER", month: "MONTH", year: "YEAR", all: "ALL TIME", total: "Total", status: "Status updated!", game: "GAME", tickets: "TICKETS", stats: "STATS", activeT: "MY TICKETS", hit: "PERSONAL MAP", del: "DELETE", lock: "LOCKED" },
        fr: { btn: "CONFIRMER", super: "SUPER NOMBRE", month: "MOIS", year: "AN", all: "TOUT LE TEMPS", total: "Total", status: "Statut mis √† jour!", game: "JEU", tickets: "BILLETS", stats: "STATS", activeT: "MES BILLETS", hit: "CARTE PERSO", del: "SUPPRIMER", lock: "VERROUILL√â" }
    }; 

    // --- –ù–û–í–´–ô –î–í–ò–ì–ê–¢–ï–õ–¨ –ò–ù–¢–†–û vchf 2.6 ---
    function startIntroSequence() {
        const canvasI = document.getElementById('introCanvas');
        const ctxI = canvasI.getContext('2d');
        const statusI = document.getElementById('mainStatus');
        const logoI = document.getElementById('mainLogo');
        const introLayer = document.getElementById('intro-layer');

        canvasI.width = window.innerWidth;
        canvasI.height = window.innerHeight;

        const spheres = [
            { x: 0.15, y: 0.25, colors: ['#000', '#ffcc00', '#000'], label: 'DE' },
            { x: 0.85, y: 0.25, colors: ['#eee', '#ffffff', '#eee'], label: 'EN' },
            { x: 0.15, y: 0.50, colors: ['#0057b7', '#ffd700'], label: 'UA' },
            { x: 0.85, y: 0.50, colors: ['#fff', '#0039a6', '#d52b1e'], label: 'RU' },
            { x: 0.15, y: 0.75, colors: ['#002395', '#ffffff', '#ed2939'], label: 'FR' },
            { x: 0.85, y: 0.75, colors: ['#008c45', '#f4f5f0', '#cd212a'], label: 'IT' }
        ];

        let drawnItems = spheres.map(s => ({ ...s, grow: 0, ink: 0 }));
        let l1 = { x: canvasI.width/2, y: 0 }, l2 = { x: canvasI.width/2, y: canvasI.height };
        let step1 = 0, step2 = 0, active2 = false, fade = 1.0;

        function drawSphere(s) {
            if (s.grow <= 0) return;
            const x = s.x * canvasI.width, y = s.y * canvasI.height, r = 42 * s.grow;
            ctxI.shadowBlur = 30; ctxI.shadowColor = 'rgba(0,0,0,1)';
            ctxI.fillStyle = '#000'; ctxI.beginPath(); ctxI.arc(x, y, r, 0, 7); ctxI.fill();
            ctxI.shadowBlur = 0;
            let gBody = ctxI.createRadialGradient(x-15, y-15, r/10, x, y, r);
            gBody.addColorStop(0, '#fff'); gBody.addColorStop(0.5, '#444'); gBody.addColorStop(1, '#050505');
            ctxI.fillStyle = gBody; ctxI.beginPath(); ctxI.arc(x, y, r, 0, 7); ctxI.fill();
            if (s.ink > 0) {
                ctxI.save(); ctxI.beginPath(); ctxI.arc(x, y, r-2, 0, 7); ctxI.clip();
                let gFlag = ctxI.createLinearGradient(x-r, y-r, x+r, y+r);
                s.colors.forEach((c, i) => gFlag.addColorStop(i/(s.colors.length-1), c));
                ctxI.globalAlpha = s.ink; ctxI.fillStyle = gFlag; ctxI.fill();
                ctxI.restore(); ctxI.globalAlpha = 1;
            }
            let gGlass = ctxI.createRadialGradient(x-15, y-15, 2, x-10, y-10, r);
            gGlass.addColorStop(0, 'rgba(255,255,255,0.9)'); gGlass.addColorStop(0.3, 'rgba(255,255,255,0.1)'); gGlass.addColorStop(1, 'rgba(0,0,0,0.5)');
            ctxI.fillStyle = gGlass; ctxI.beginPath(); ctxI.arc(x, y, r, 0, 7); ctxI.fill();
        }

        function animateIntro() {
            if (fade <= 0.05) { 
                introLayer.style.display = 'none'; 
                document.getElementById('app-content').style.display = 'block';
                setTimeout(() => document.getElementById('app-content').style.opacity = '1', 50);
                return; 
            }
            ctxI.clearRect(0,0, canvasI.width, canvasI.height);
            ctxI.globalAlpha = fade;
            if (step1 < spheres.length) {
                let target = drawnItems[step1]; let tx = target.x * canvasI.width, ty = target.y * canvasI.height;
                ctxI.beginPath(); ctxI.moveTo(canvasI.width/2, 0); ctxI.lineTo(l1.x, l1.y);
                ctxI.strokeStyle = '#00f3ff'; ctxI.lineWidth = 1; ctxI.stroke();
                l1.x += (tx - l1.x) * 0.08; l1.y += (ty - l1.y) * 0.08;
                if (Math.abs(l1.x-tx)<2) { if (target.grow < 1) target.grow += 0.04; else step1++; }
            }
            if (active2 && step2 < spheres.length) {
                let target = drawnItems[step2]; let tx = target.x * canvasI.width, ty = target.y * canvasI.height;
                ctxI.beginPath(); ctxI.moveTo(canvasI.width/2, canvasI.height); ctxI.lineTo(l2.x, l2.y);
                ctxI.strokeStyle = '#ffcc00'; ctxI.lineWidth = 1.5; ctxI.stroke();
                l2.x += (tx - l2.x) * 0.08; l2.y += (ty - l2.y) * 0.08;
                if (Math.abs(l2.x-tx)<2) { if (target.ink < 1) target.ink += 0.03; else step2++; }
            }
            drawnItems.forEach(drawSphere);
            if (step2 === spheres.length) {
                statusI.innerText = "GLOBAL LOTTO POOL"; statusI.style.color = "var(--gold)";
                setTimeout(() => { fade -= 0.015; }, 2500);
            }
            requestAnimationFrame(animateIntro);
        }

        setTimeout(() => {
            logoI.style.opacity = '1';
            statusI.innerText = "HELVETIC LUCK LOADING...";
            setTimeout(() => requestAnimationFrame(animateIntro), 2000);
            setTimeout(() => active2 = true, 3000);
        }, 1000);
    }

    /* –í–°–Ø –õ–û–ì–ò–ö–ê –ù–ò–ñ–ï –°–ö–û–ü–ò–†–û–í–ê–ù–ê –ë–ï–ó –ò–ó–ú–ï–ù–ï–ù–ò–ô [cite: 2026-02-24] */
    function togglePick(type) {
        activeSmartTool = type; 
        const btns = { hot: 'btn-hot', cold: 'btn-cold', sleeping: 'btn-sleeping' };
        document.querySelectorAll('.tool-btn').forEach(b => b.classList.remove('active-tool'));
        if (btns[type]) document.getElementById(btns[type]).classList.add('active-tool');
        selected = [];
        document.querySelectorAll('.cell').forEach(c => { c.classList.remove('is-hot', 'is-cold', 'is-sleeping', 'selected'); c.style.animation = 'none'; });
        const pIdx = currentPeriod === 'month' ? 0 : currentPeriod === 'year' ? 1 : 2;
        let sorted = Object.keys(realStatsDB).map(n => ({ num: parseInt(n), val: realStatsDB[n][pIdx] }));
        if (type === 'hot') sorted.sort((a, b) => b.val - a.val);
        else if (type === 'cold' || type === 'sleeping') sorted.sort((a, b) => a.val - b.val);
        selected = sorted.slice(0, 6).map(i => i.num);
        selected.forEach(n => {
            const el = document.getElementById(`cell-${n}`);
            if (el) el.classList.add('selected', `is-${type}`);
        });
        superNum = Math.floor(Math.random() * 6) + 1;
        document.querySelectorAll('.super-cell').forEach((sc, idx) => sc.classList.toggle('selected', idx + 1 === superNum));
        tg.HapticFeedback.notificationOccurred('success'); sndWin.play();
    }
    // ... (–û—Å—Ç–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ 1-–≤-1: refreshGrid, randomFill, runEngine, –∏ —Ç.–¥.)
    
    // (–Ø –æ–±—Ä–µ–∑–∞—é —Ç–µ–∫—Å—Ç –∑–¥–µ—Å—å –¥–ª—è –æ–∫–Ω–∞, –Ω–æ –ø—Ä–∏ –≤—Å—Ç–∞–≤–∫–µ —Ç—ã —Å–æ—Ö—Ä–∞–Ω–∏—à—å –≤—Å–µ —Å–≤–æ–∏ —Ñ—É–Ω–∫—Ü–∏–∏ –∏–∑ –∏—Å—Ö–æ–¥–Ω–∏–∫–∞)
    // –ö–æ–Ω–µ—Ü Window 3 –≤–∫–ª—é—á–∞–µ—Ç –≤ —Å–µ–±—è window.onload —Å –≤—ã–∑–æ–≤–æ–º startIntroSequence()
    window.onload = () => {
        const saved = localStorage.getItem('vchf_lang');
        if (saved) { currentLang = saved; setLang(currentLang); } 
        for(let i=1; i<=42; i++) realStatsDB[i] = [Math.floor(Math.random()*5), Math.floor(Math.random()*20), 300+Math.floor(Math.random()*200)];
        refreshGrid(); updatePriceDisplay();
        startIntroSequence(); // –¢–≤–æ–π –Ω–æ–≤—ã–π –≤—Ö–æ–¥
    };
    </script>
</body>
</html>
