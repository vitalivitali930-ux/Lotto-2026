<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Helvetia Lucky | VCHF Monolith</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;900&family=JetBrains+Mono:wght@300;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --gold: #d4af37;
            --swiss-red: #e30a17;
            --deep-black: #050505;
            --cherry-deep: #3d0505;
            --cherry-velvet: radial-gradient(circle at center, #800020 0%, #2a000a 100%);
            --steel-gradient: linear-gradient(145deg, #1a1a1a, #000);
            --red-genius: #FF0000;
            --green-active: #00FF41;
            --gold-swiss: #d4af37;
        }
        * { -webkit-tap-highlight-color: transparent; box-sizing: border-box; outline: none; margin: 0; padding: 0; }
        body, html { 
            width: 100%; height: 100%; 
            background: #000; overflow: hidden; 
            font-family: 'Orbitron', sans-serif; color: var(--gold);
        }

        /* --- –ò–ù–¢–†–û: –°–ï–ô–§ --- */
        #wheel-layer {
            position: fixed; inset: 0; background: #000; z-index: 5000;
            display: flex; align-items: center; justify-content: center;
            transition: opacity 1.2s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .safe-wheel-container {
            position: relative; width: 340px; height: 340px;
            display: flex; align-items: center; justify-content: center;
            transition: transform 1.5s cubic-bezier(0.19, 1, 0.22, 1);
        }
        .wheel-center {
            width: 80px; height: 80px; background: radial-gradient(circle, #222, #000);
            border: 3px solid var(--gold); border-radius: 50%; z-index: 10;
            box-shadow: 0 0 40px rgba(212, 175, 55, 0.4);
        }
        .flag-node {
            position: absolute; width: 60px; height: 60px;
            background: #0a0a0a; border: 2px solid var(--gold);
            border-radius: 50%; display: flex; align-items: center; justify-content: center;
            font-size: 28px; cursor: pointer; z-index: 20;
            transform: translate(-50%, -50%); transition: 0.5s;
        }
        .wheel-vanishing .flag-node { opacity: 0; transform: translate(-50%, -50%) scale(0); transition: 0.8s; }

        /* --- –ò–ù–¢–†–û: –î–í–ï–†–ò --- */
        #brand-layer {
            position: fixed; inset: 0; background: var(--deep-black); z-index: 4000;
            display: none; flex-direction: column; align-items: center; justify-content: center;
            pointer-events: none;
        }
        .door-left, .door-right {
            position: absolute; top: 0; width: 50%; height: 100%; background: #0a0a0a;
            border: 1px solid rgba(212, 175, 55, 0.05); transition: 2s cubic-bezier(0.77, 0, 0.175, 1);
        }
        .door-left { left: 0; border-right: 2px solid var(--gold); }
        .door-right { right: 0; border-left: 2px solid var(--gold); }
        .opened .door-left { transform: translateX(-100%); }
        .opened .door-right { transform: translateX(100%); }

        /* --- –õ–û–ë–ë–ò: –ó–ê–õ --- */
        #main-ui {
            display: none; opacity: 0; width: 100%; height: 100%; 
            background: radial-gradient(circle at center, #2a000a 0%, #050505 70%, #000000 100%);
            overflow-y: auto; overflow-x: hidden; transition: opacity 2s ease;
            padding-bottom: 120px;
        }
        header {
            padding: 20px 10px; text-align: center; background: rgba(0,0,0,0.9);
            border-bottom: 1px solid rgba(212, 175, 55, 0.3);
            position: sticky; top: 0; z-index: 1000;
        }
        .casino-floor { display: flex; flex-wrap: wrap; justify-content: space-around; gap: 60px 20px; padding: 60px 20px; }
        
        /* –°–¢–û–õ–´ –í –ó–ê–õ–ï */
        .table-wrap { position: relative; width: 130px; height: 130px; cursor: pointer; transition: 0.4s; }
        .table-wrap:nth-child(even) { transform: translateY(30px); }
        .table-surface-lobby {
            width: 100%; height: 100%; background: radial-gradient(circle, #800020 0%, #2a000a 100%);
            border: 2px solid #1a0005; border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            box-shadow: 0 20px 40px rgba(0,0,0,0.8); position: relative;
        }

        /* –ù–ê–í–ò–ì–ê–¶–ò–Ø */
        .nav-bar {
            position: fixed; bottom: 0; left: 0; width: 100%; height: 85px;
            background: rgba(0, 0, 0, 0.85); backdrop-filter: blur(10px);
            border-top: 1px solid var(--gold-swiss);
            display: flex; justify-content: center; align-items: center; gap: 20px; z-index: 3500;
        }
        .nav-btn {
            width: 150px; height: 45px; background: #000; border: 1.5px solid var(--gold-swiss);
            color: var(--gold-swiss); font-family: 'Orbitron'; font-size: 11px;
            display: flex; align-items: center; justify-content: center;
            clip-path: polygon(10% 0, 100% 0, 90% 100%, 0 100%); cursor: pointer;
        }

        /* –ü–†–ê–í–ò–õ–ê (MODAL) */
        #rules-overlay {
            position: fixed; inset: 0; background: rgba(0,0,0,0.95);
            z-index: 6000; display: none; align-items: center; justify-content: center; padding: 25px;
        }
        .rules-box {
            background: #0a0a0a; border: 2px solid var(--gold); padding: 30px;
            max-width: 450px; width: 100%; text-align: center; box-shadow: 0 0 60px rgba(212,175,55,0.2);
        }
        .rules-content {
            font-family: 'JetBrains Mono'; color: #fff; font-size: 12px;
            text-align: left; margin: 20px 0; line-height: 1.6; max-height: 300px; overflow-y: auto;
        }
        .rules-btn-ok {
            width: 100%; padding: 15px; background: var(--gold); color: #000;
            font-family: 'Orbitron'; font-weight: 900; border: none; cursor: pointer;
        }

        /* –ò–ì–†–û–í–ê–Ø –ö–û–ú–ù–ê–¢–ê (–î—É—Ä–∞–∫) */
        #game-room { position: fixed; inset: 0; display: none; opacity: 0; background: #000; z-index: 500; transition: 2s; }
        #velvet-table {
            position: absolute; bottom: -40%; left: 50%; transform: translateX(-50%);
            width: 180%; height: 100%; 
            background: radial-gradient(circle at 50% 0%, var(--cherry-deep) 0%, #000 70%);
            border-radius: 50% / 40%; border: 25px solid #080808;
        }
    </style>
</head>
<body>
    <div id="wheel-layer"><div class="safe-wheel-container" id="main-wheel"><div class="wheel-center"></div></div></div>
    
    <div id="brand-layer">
        <div class="door-left"></div><div class="door-right"></div>
        <div style="z-index:4100; text-align:center;">
            <div style="width:60px; height:60px; background:var(--swiss-red); margin:0 auto 20px; border-radius:8px; position:relative;">
                <div style="position:absolute; background:#fff; width:10px; height:30px; left:25px; top:15px;"></div>
                <div style="position:absolute; background:#fff; width:30px; height:10px; left:15px; top:25px;"></div>
            </div>
            <h1 style="letter-spacing:10px;">HELVETIA LUCKY</h1>
        </div>
    </div>

    <div id="main-ui">
        <header><div style="font-size:24px; letter-spacing:6px;">HELVETIA LUCK</div></header>
        <div class="casino-floor" id="floor"></div>
        <div class="nav-bar">
            <div class="nav-btn">–ë–ê–† (CHAT) üç∑</div>
            <div class="nav-btn">–î–†–£–ì–ò–ï –ò–ì–†–´ üÉè</div>
        </div>
    </div>

    <div id="rules-overlay">
        <div class="rules-box">
            <h2 id="rules-title" style="letter-spacing:5px;"></h2>
            <div id="rules-text" class="rules-content"></div>
            <button class="rules-btn-ok" onclick="confirmRules()">–Ø –ü–†–ò–ù–ò–ú–ê–Æ / ACCEPT</button>
        </div>
    </div>

    <div id="game-room">
        <div id="velvet-table">
            <div id="deck-zone"></div>
            <div id="trump-card" style="position:absolute; top:40%; left:22%; width:110px; height:75px; background:#fff; border-radius:6px; display:flex; align-items:center; justify-content:center; transform:rotate(95deg); opacity:0; transition:1s;"></div>
            <div id="player-hand" style="position:absolute; bottom:60px; width:100%; display:flex; justify-content:center;"></div>
            <div id="ai-hand" style="position:absolute; top:60px; width:100%; display:flex; justify-content:center; opacity:0.5; transform:scale(0.8);"></div>
        </div>
    </div>
<script>
    /** * –ú–ê–ù–ò–§–ï–°–¢ –ú–û–ù–û–õ–ò–¢–ê. [2026-02-23]
     * –ö–æ–¥ –Ω–∞–ø–∏—Å–∞–Ω –°–ø–∞—Ä–∫ –¥–ª—è –í–∏—Ç–∞–ª–∏—è (Wanderer). 
     * –õ–æ–≥–∏–∫–∞: Safe -> Doors -> Game Init -> Lobby -> Rules Popup.
     */
    const tg = window.Telegram.WebApp; tg.ready(); tg.expand();
    
    let audioCtx = null;
    let selectedLang = 'üá¨üáß';
    let mainDeck = [], playerHandData = [], aiHandData = [], tableZone = [];
    let isPlayerTurn = true, gameActive = false, trumpSuit = '', currentVCHF = 1000;
    
    const SUITS = ['‚ô†', '‚ô£', '‚ô•', '‚ô¶'], RANKS = ['6', '7', '8', '9', '10', 'J', 'Q', 'K', 'A'];

    // --- –ü–†–ê–í–ò–õ–ê –ò–ì–†–´ (DURAK RULES) ---
    const translations = {
        'üá∑üá∫': {
            title: '–ü–†–ê–í–ò–õ–ê: –ü–û–î–ö–ò–î–ù–û–ô –î–£–†–ê–ö',
            text: '1. –†–∞–∑–¥–∞–µ—Ç—Å—è –ø–æ 6 –∫–∞—Ä—Ç.\n2. –ö–æ–∑—ã—Ä—å –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –æ—Ç–∫—Ä—ã—Ç–æ–π –∫–∞—Ä—Ç–æ–π –ø–æ–¥ –∫–æ–ª–æ–¥–æ–π.\n3. –ü–µ—Ä–≤—ã–π —Ö–æ–¥ –¥–µ–ª–∞–µ—Ç –∏–≥—Ä–æ–∫ —Å –Ω–∞–∏–º–µ–Ω—å—à–∏–º –∫–æ–∑—ã—Ä–µ–º.\n4. –¶–µ–ª—å: –∏–∑–±–∞–≤–∏—Ç—å—Å—è –æ—Ç –≤—Å–µ—Ö –∫–∞—Ä—Ç. –ü–æ—Å–ª–µ–¥–Ω–∏–π –æ—Å—Ç–∞–≤—à–∏–π—Å—è —Å –∫–∞—Ä—Ç–∞–º–∏ ‚Äî "–î—É—Ä–∞–∫".\n5. –í –Ω–∞—à–µ–º —ç–ª–∏—Ç–Ω–æ–º –∫–ª—É–±–µ VCHF ‚Äî –≤–∞—à–∞ –≤–∞–ª—é—Ç–∞ —á–µ—Å—Ç–∏.'
        },
        'üá¨üáß': {
            title: 'RULES: DURAK (CLASSIC)',
            text: '1. Each player gets 6 cards.\n2. Trump suit is defined by the card under the deck.\n3. Player with the lowest trump goes first.\n4. Goal: Get rid of all cards. The last one with cards is the "Durak" (Fool).\n5. VCHF is your currency of honor in this room.'
        },
        'üá©üá™': {
            title: 'REGELN: DURAK (KLASSISCH)',
            text: '1. Jeder Spieler erh√§lt 6 Karten.\n2. Die Trumpffarbe wird durch die Karte unter dem Stapel bestimmt.\n3. Der Spieler mit dem niedrigsten Trumpf beginnt.\n4. Ziel: Alle Karten loswerden. Wer zuletzt Karten hat, ist der "Durak".'
        },
        'üá´üá∑': {
            title: 'R√àGLES: DURAK (CLASSIQUE)',
            text: '1. Chaque joueur re√ßoit 6 cartes.\n2. L\'atout est d√©fini par la carte sous le paquet.\n3. Le joueur avec l\'atout le plus bas commence.\n4. But: Se d√©barrasser de toutes les cartes. Le dernier est le "Durak".'
        },
        'üáÆüáπ': {
            title: 'REGOLE: DURAK (CLASSICO)',
            text: '1. Ogni giocatore riceve 6 carte.\n2. Il seme di briscola √® definito dalla carta sotto il mazzo.\n3. Inizia il giocatore con la briscola pi√π bassa.\n4. Scopo: Rimanere senza carte. L\'ultimo √® il "Durak".'
        },
        'üá∫üá¶': {
            title: '–ü–†–ê–í–ò–õ–ê: –ü–Ü–î–ö–ò–î–ù–ò–ô –î–£–†–ï–ù–¨',
            text: '1. –†–æ–∑–¥–∞—î—Ç—å—Å—è –ø–æ 6 –∫–∞—Ä—Ç.\n2. –ö–æ–∑–∏—Ä –≤–∏–∑–Ω–∞—á–∞—î—Ç—å—Å—è –≤—ñ–¥–∫—Ä–∏—Ç–æ—é –∫–∞—Ä—Ç–æ—é –ø—ñ–¥ –∫–æ–ª–æ–¥–æ—é.\n3. –ü–µ—Ä—à–∏–π —Ö—ñ–¥ —Ä–æ–±–∏—Ç—å –≥—Ä–∞–≤–µ—Ü—å –∑ –Ω–∞–π–º–µ–Ω—à–∏–º –∫–æ–∑–∏—Ä–µ–º.\n4. –ú–µ—Ç–∞: –ø–æ–∑–±—É—Ç–∏—Å—è –≤—Å—ñ—Ö –∫–∞—Ä—Ç. –û—Å—Ç–∞–Ω–Ω—ñ–π ‚Äî "–î—É—Ä–µ–Ω—å".'
        }
    };

    // --- AUDIO ENGINE ---
    function playSound(f, d, t, v) {
        try {
            if(!audioCtx) audioCtx = new (window.AudioContext || window.webkitAudioContext)();
            const o = audioCtx.createOscillator(), g = audioCtx.createGain();
            o.type = t; o.frequency.setValueAtTime(f, audioCtx.currentTime);
            g.gain.setValueAtTime(v, audioCtx.currentTime);
            g.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + d);
            o.connect(g); g.connect(audioCtx.destination);
            o.start(); o.stop(audioCtx.currentTime + d);
        } catch(e){}
    }

    // --- WHEEL LOGIC (SAFE) ---
    const wheel = document.getElementById('main-wheel');
    Object.keys(translations).forEach((flag, i) => {
        const node = document.createElement('div');
        node.className = 'flag-node'; node.innerHTML = flag;
        const angle = i * 60, r = 145;
        node.style.left = `calc(50% + ${Math.sin(angle*Math.PI/180)*r}px)`;
        node.style.top = `calc(50% + ${-Math.cos(angle*Math.PI/180)*r}px)`;
        node.onclick = () => {
            selectedLang = flag;
            playSound(100, 1, 'triangle', 0.3);
            wheel.style.transform = `rotate(${-angle + 1080}deg)`;
            wheel.classList.add('wheel-vanishing');
            setTimeout(() => {
                document.getElementById('wheel-layer').style.opacity = '0';
                setTimeout(() => {
                    document.getElementById('wheel-layer').style.display = 'none';
                    openSwissPortal();
                }, 1000);
            }, 1800);
        };
        wheel.appendChild(node);
    });

    function openSwissPortal() {
        const bl = document.getElementById('brand-layer');
        bl.style.display = 'flex';
        playSound(40, 2, 'sawtooth', 0.2);
        setTimeout(() => {
            bl.classList.add('opened');
            setTimeout(initLobby, 2500);
        }, 500);
    }

    // --- LOBBY & RULES INITIALIZATION ---
    function initLobby() {
        const ui = document.getElementById('main-ui');
        ui.style.display = 'block';
        setTimeout(() => { 
            ui.style.opacity = '1'; 
            showRulesPopup();
        }, 100);
        buildCasinoFloor();
    }

    function showRulesPopup() {
        const overlay = document.getElementById('rules-overlay');
        const content = translations[selectedLang];
        document.getElementById('rules-title').innerText = content.title;
        document.getElementById('rules-text').innerText = content.text;
        overlay.style.display = 'flex';
    }

    function confirmRules() {
        playSound(800, 0.2, 'sine', 0.1);
        document.getElementById('rules-overlay').style.opacity = '0';
        setTimeout(() => {
            document.getElementById('rules-overlay').style.display = 'none';
            // –ü–æ—Å–ª–µ –∑–∞–∫—Ä—ã—Ç–∏—è –ø—Ä–∞–≤–∏–ª –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Ñ–æ–Ω–æ–≤–∞—è —Ä–∞–∑–¥–∞—á–∞ –∫–∞—Ä—Ç (–≤–∏–∑—É–∞–ª—å–Ω—ã–π —ç—Ñ—Ñ–µ–∫—Ç)
            initGameEngine();
        }, 500);
    }

    function buildCasinoFloor() {
        const floor = document.getElementById('floor');
        for(let i=1; i<=12; i++) {
            const wrap = document.createElement('div');
            wrap.className = 'table-wrap';
            const status = (i === 1 || i === 5) ? 'active' : 'waiting';
            wrap.innerHTML = `
                <div class="table-surface-lobby">
                    <div class="lamp l-t ${status}" style="position:absolute; top:10px; width:8px; height:8px; border-radius:50%;"></div>
                    <img src="1771489965074(1).png" class="table-logo" style="width:50%;">
                </div>
                <div style="position:absolute; bottom:-25px; width:100%; text-align:center; font-size:8px; opacity:0.5;">VCHF-UNIT ${i}</div>
            `;
            floor.appendChild(wrap);
        }
    }
    // --- GAME ENGINE (DURAK LOGIC) ---
    function initGameEngine() {
        document.getElementById('game-room').style.display = 'block';
        setTimeout(() => document.getElementById('game-room').style.opacity = '1', 100);
        initMatrix();
        buildDeck();
    }

    function initMatrix() {
        const m = document.createElement('div'); m.id = 'matrix-overlay';
        // –ú–∞—Ç—Ä–∏—Ü–∞ —Å—Ñ–µ—Ä –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∫–∞—Ä—Ç
        m.style.cssText = "position:fixed; top:15%; right:20px; width:120px; display:grid; grid-template-columns:repeat(3, 1fr); gap:8px; z-index:100;";
        document.body.appendChild(m);
        for(let i=1; i<=36; i++) {
            const s = document.createElement('div'); 
            s.className = 'sphere-node';
            s.id = `sphere-${i}`; 
            s.innerText = i;
            s.style.cssText = "width:30px; height:30px; border-radius:50%; border:1px solid rgba(212,175,55,0.3); background:#000; display:flex; align-items:center; justify-content:center; font-size:10px;";
            m.appendChild(s);
        }
    }

    function buildDeck() {
        const zone = document.getElementById('deck-zone');
        zone.innerHTML = '';
        for(let i=0; i<36; i++) {
            const c = document.createElement('div'); c.className = 'card-monolith';
            c.style.cssText = "position:absolute; width:80px; height:115px; background:var(--steel-gradient); border:1.5px solid #222; border-radius:6px; box-shadow:0 15px 35px rgba(0,0,0,0.9); top:40%; left:45%; transition:0.6s;";
            zone.appendChild(c);
            setTimeout(() => { 
                c.style.top = '38%'; 
                c.style.left = '16%'; 
                c.style.transform = 'rotate(-1deg)';
                c.style.zIndex = i; 
            }, i * 30);
        }
        
        mainDeck = [];
        SUITS.forEach(s => {
            RANKS.forEach(r => {
                mainDeck.push({
                    suit: s, 
                    rank: r, 
                    color: (s === '‚ô•' || s === '‚ô¶') ? 'var(--swiss-red)' : '#fff'
                });
            });
        });
        mainDeck.sort(() => Math.random() - 0.5);
        
        setTimeout(setTrump, 2000);
    }

    function setTrump() {
        const t = mainDeck[0]; 
        trumpSuit = t.suit;
        const el = document.getElementById('trump-card');
        el.innerHTML = `<span style="color:${t.color}; font-size:30px;">${t.rank}${t.suit}</span>`;
        el.style.opacity = '1';
        el.style.zIndex = "1";
        dealInitial();
    }

    function dealInitial() {
        for(let i=0; i<6; i++) {
            setTimeout(() => {
                drawCard(true);
                drawCard(false);
                playSound(600 + (i * 100), 0.1, 'sine', 0.05);
            }, i * 400);
        }
        gameActive = true;
    }

    function drawCard(isPlayer) {
        if(mainDeck.length === 0) return;
        const data = mainDeck.pop();
        const container = document.getElementById(isPlayer ? 'player-hand' : 'ai-hand');
        if(isPlayer) playerHandData.push(data); else aiHandData.push(data);
        renderCard(data, container, isPlayer);
    }

    function renderCard(data, container, isPlayer) {
        const c = document.createElement('div'); 
        c.className = 'card-monolith';
        c.style.position = 'relative'; 
        c.style.margin = '0 -20px';
        c.style.transition = '0.5s';
        
        if(isPlayer) {
            c.style.background = '#fff'; 
            c.style.color = data.color;
            c.innerHTML = `<div style="font-size:12px; font-weight:900;">${data.rank}${data.suit}</div><div style="font-size:32px; text-align:center; margin-top:10px;">${data.suit}</div>`;
            c.style.cursor = 'pointer';
            c.onclick = () => playerAttack(data, c);
        } else {
            c.style.background = 'var(--steel-gradient)';
            c.innerHTML = `<div style="width:100%; height:100%; border:1px solid var(--gold); border-radius:4px; opacity:0.3;"></div>`;
        }
        container.appendChild(c);
        updateMatrixNode(data, 'hot');
    }

    function updateMatrixNode(d, status) {
        const idx = (SUITS.indexOf(d.suit) * 9) + RANKS.indexOf(d.rank) + 1;
        const el = document.getElementById(`sphere-${idx}`);
        if(el) {
            if(status === 'hot') {
                el.style.borderColor = 'var(--swiss-red)';
                el.style.boxShadow = '0 0 10px var(--swiss-red)';
                el.style.color = '#fff';
            } else {
                el.style.borderColor = 'rgba(212,175,55,0.3)';
                el.style.boxShadow = 'none';
                el.style.color = 'var(--gold)';
            }
        }
    }

    function playerAttack(data, el) {
        if(!isPlayerTurn || !gameActive) return;
        el.style.position = 'fixed'; 
        el.style.left = '50%'; 
        el.style.top = '45%';
        el.style.transform = 'translate(-50%, -50%)';
        el.style.zIndex = "1000";
        tableZone.push({data, el});
        isPlayerTurn = false;
        setTimeout(sparkResponse, 1000);
    }

    function sparkResponse() {
        const attack = tableZone[tableZone.length - 1].data;
        let defIdx = aiHandData.findIndex(c => 
            (c.suit === attack.suit && RANKS.indexOf(c.rank) > RANKS.indexOf(attack.rank)) || 
            (c.suit === trumpSuit && attack.suit !== trumpSuit)
        );
        
        if(defIdx !== -1) {
            const d = aiHandData[defIdx];
            const el = document.getElementById('ai-hand').children[defIdx];
            el.style.background = '#fff'; 
            el.style.color = d.color;
            el.innerHTML = `<div style="font-size:12px; font-weight:900;">${d.rank}${d.suit}</div><div style="font-size:32px; text-align:center; margin-top:10px;">${d.suit}</div>`;
            el.style.position = 'fixed'; 
            el.style.left = '55%'; 
            el.style.top = '42%';
            el.style.zIndex = "1001";
            tableZone.push({data: d, el});
            aiHandData.splice(defIdx, 1);
            setTimeout(clearTable, 1500);
        } else {
            sparkTakes();
        }
    }

    function clearTable() {
        tableZone.forEach(o => {
            o.el.style.left = '150%'; 
            o.el.style.opacity = '0';
            updateMatrixNode(o.data, 'cold');
        });
        tableZone = []; 
        isPlayerTurn = true;
        checkRefill();
    }

    function sparkTakes() {
        tableZone.forEach(o => {
            o.el.style.top = '-100px'; 
            o.el.style.opacity = '0';
            aiHandData.push(o.data);
        });
        tableZone = []; 
        isPlayerTurn = true;
        checkRefill();
    }

    function checkRefill() {
        while(playerHandData.length < 6 && mainDeck.length > 0) drawCard(true);
        while(aiHandData.length < 6 && mainDeck.length > 0) drawCard(false);
    }

    // –í–ê–õ–Æ–¢–ê –ß–ï–°–¢–ò
    document.body.insertAdjacentHTML('beforeend', `
        <div style="position:fixed; top:20px; left:20px; z-index:4500; background:rgba(0,0,0,0.8); border:1px solid var(--gold); padding:10px 20px; pointer-events:none;">
            VCHF: <span id="vchf-val" style="color:#fff; font-weight:900;">1000</span>
        </div>
    `);

    console.log("–ú–∞–Ω–∏—Ñ–µ—Å—Ç –ú–æ–Ω–æ–ª–∏—Ç–∞: –°–∏—Å—Ç–µ–º–∞ –∞–∫—Ç–∏–≤–Ω–∞. –ü—Ä–æ—Ç–æ–∫–æ–ª '–î—É—Ä–∞–∫' –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω.");
</script>
</body>
</html>
