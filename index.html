<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>HELVETIA LUCK | VCHF ENGINE</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@900&family=JetBrains+Mono:wght@700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-deep: radial-gradient(circle at center, #2a000a 0%, #050505 70%, #000000 100%);
            --cherry-table: radial-gradient(circle, #800020 0%, #2a000a 100%);
            --gold-swiss: #d4af37;
            --gold: #d4af37;
            --swiss-red: #e30a17;
            --deep-black: #050505;
            --red-genius: #FF0000;
            --green-active: #00FF41;
            --velvet-green: #072a1a;
        } 

        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body, html { 
            width: 100%; height: 100%; background: #000; 
            color: var(--gold-swiss); font-family: 'JetBrains Mono', monospace;
            overflow: hidden;
        } 

        /* –≠–¢–ê–ü 1: –®–¢–£–†–í–ê–õ –°–ï–ô–§–ê */
        #wheel-layer {
            position: fixed; inset: 0; background: #000; z-index: 5000;
            display: flex; align-items: center; justify-content: center;
            transition: opacity 0.8s ease-out;
        }
        .safe-wheel-container {
            position: relative; width: 320px; height: 320px;
            display: flex; align-items: center; justify-content: center;
            transition: transform 1.2s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .wheel-center {
            width: 70px; height: 70px; background: radial-gradient(circle, #333, #000);
            border: 3px solid var(--gold); border-radius: 50%; z-index: 10;
            box-shadow: 0 0 25px rgba(212, 175, 55, 0.5);
        }
        .spoke {
            position: absolute; width: 6px; height: 130px;
            background: linear-gradient(to top, var(--gold), transparent);
            transform-origin: bottom center; bottom: 50%; left: calc(50% - 3px);
        }
        .flag-node {
            position: absolute; width: 55px; height: 55px;
            background: #0a0a0a; border: 2px solid var(--gold);
            border-radius: 50%; display: flex; align-items: center; justify-content: center;
            font-size: 26px; cursor: pointer; z-index: 20;
            transform: translate(-50%, -50%); transition: 0.4s;
            box-shadow: 0 4px 10px rgba(0,0,0,0.8);
        }
        .flag-node:active { transform: translate(-50%, -50%) scale(0.9); }
        .wheel-vanishing .flag-node { opacity: 0; transform: translate(-50%, -50%) scale(0.5); transition: 0.6s; }

        /* –≠–¢–ê–ü 2: –î–í–ï–†–ò */
        #brand-layer {
            position: fixed; inset: 0; background: var(--deep-black); z-index: 4000;
            display: none; flex-direction: column; align-items: center; justify-content: center;
            opacity: 0; transition: opacity 0.5s ease;
        }
        .door-left, .door-right {
            position: absolute; top: 0; width: 50%; height: 100%; background: #0a0a0a;
            border: 1px solid rgba(212, 175, 55, 0.1); transition: 1.5s cubic-bezier(0.7, 0, 0.3, 1);
        }
        .door-left { left: 0; border-right: 1px solid var(--gold); }
        .door-right { right: 0; border-left: 1px solid var(--gold); }
        .opened .door-left { transform: translateX(-100%); }
        .opened .door-right { transform: translateX(100%); }

        .swiss-shield {
            width: 50px; height: 50px; background: var(--swiss-red);
            margin: 0 auto 20px; position: relative; border-radius: 5px;
            box-shadow: 0 0 30px rgba(227, 10, 23, 0.5);
        }
        .swiss-shield::after { content: ''; position: absolute; background: white; width: 10px; height: 30px; left: 20px; top: 10px; }
        .swiss-shield::before { content: ''; position: absolute; background: white; width: 30px; height: 10px; left: 10px; top: 20px; }
        h1.brand-name { color: var(--gold); font-size: 24px; letter-spacing: 8px; margin: 0; text-align: center; font-family: 'Orbitron'; }

        /* –≠–¢–ê–ü 3: –ó–ê–õ –°–û –°–¢–û–õ–ê–ú–ò */
        #main-ui {
            display: none; opacity: 0; width: 100%; height: 100%; 
            background: var(--bg-deep); overflow-y: auto; transition: opacity 2s ease;
            padding-bottom: 100px;
        } 
        header {
            padding: 20px 10px; text-align: center; background: rgba(0,0,0,0.9);
            border-bottom: 1px solid rgba(212, 175, 55, 0.3);
            position: sticky; top: 0; z-index: 1000;
        }
        .brand-main { font-family: 'Orbitron'; font-size: 24px; letter-spacing: 6px; }
        .brand-sub { font-family: 'Orbitron'; font-size: 10px; letter-spacing: 4.2px; opacity: 0.6; margin-top: 5px; } 

        .casino-floor {
            display: flex; flex-wrap: wrap; justify-content: space-around;
            gap: 60px 20px; padding: 60px 20px;
        }
        .table-wrap { position: relative; width: 130px; height: 130px; cursor: pointer; transition: 0.4s; }
        .table-wrap:nth-child(even) { transform: translateY(30px); }
        .table-wrap:hover { transform: scale(1.1) translateY(0) !important; } 

        .table-surface {
            width: 100%; height: 100%; background: var(--cherry-table);
            border: 2px solid #1a0005; border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            box-shadow: 0 20px 40px rgba(0,0,0,0.8); position: relative;
        }
        .table-logo { width: 50%; filter: drop-shadow(0 0 8px rgba(212, 175, 55, 0.4)); } 

        .lamp { position: absolute; width: 8px; height: 8px; border-radius: 50%; }
        .l-t { top: 10px; left: 50%; transform: translateX(-50%); }
        .l-b { bottom: 10px; left: 50%; transform: translateX(-50%); }
        .l-l { left: 10px; top: 50%; transform: translateY(-50%); }
        .l-r { right: 10px; top: 50%; transform: translateY(-50%); }
        .active { background: var(--green-active); box-shadow: 0 0 12px var(--green-active); }
        .waiting { background: var(--red-genius); box-shadow: 0 0 6px var(--red-genius); opacity: 0.4; } 

        .nav-bar {
            position: fixed; bottom: 0; left: 0; width: 100%;
            height: 85px; background: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(10px);
            border-top: 1px solid var(--gold-swiss);
            display: flex; justify-content: center; align-items: center;
            gap: 20px; z-index: 2000; padding-bottom: 10px;
        }
        .nav-btn {
            width: 160px; height: 45px;
            background: #000; border: 1.5px solid var(--gold-swiss);
            color: var(--gold-swiss); font-family: 'Orbitron';
            font-size: 11px; letter-spacing: 2px;
            display: flex; align-items: center; justify-content: center;
            cursor: pointer; transition: 0.3s;
            clip-path: polygon(10% 0, 100% 0, 90% 100%, 0 100%);
        }
        .nav-btn:active { transform: scale(0.95); background: var(--gold-swiss); color: #000; }

        /* –≠–¢–ê–ü 4: –ò–ì–†–û–í–û–ô –°–¢–û–õ (–ë–ê–†–•–ê–¢–ù–´–ô –ó–ê–õ) */
        #game-room {
            position: fixed; inset: 0; display: none; opacity: 0;
            background: radial-gradient(circle at 50% 20%, rgba(212,175,55,0.08) 0%, #000 85%);
            transition: 1s ease-in-out; z-index: 6000;
        }
        #velvet-table {
            position: absolute; bottom: -25%; left: 50%; transform: translateX(-50%);
            width: 150%; height: 80%; background: var(--velvet-green);
            border-radius: 50% / 35%; border: 15px solid #111;
            box-shadow: inset 0 0 200px #000, 0 50px 150px #000;
            background-image: url("https://www.transparenttextures.com/patterns/dark-leather.png");
        }
        .table-light {
            position: absolute; top: -50px; left: 50%; transform: translateX(-50%);
            width: 500px; height: 100px; background: rgba(255,252,210,0.04);
            filter: blur(80px); pointer-events: none;
        }
        .card-monolith {
            position: absolute; width: 68px; height: 100px;
            background: linear-gradient(135deg, #1a1a1a, #000);
            border: 1px solid #333; border-radius: 6px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.6);
            transition: all 3s cubic-bezier(0.19, 1, 0.22, 1);
        }
        .deck-stacked {
            top: 40% !important; left: 18% !important; transform: rotate(-1deg) !important;
            box-shadow: -2px 2px 0 #333, -6px 6px 20px #000 !important;
        }
        #trump-card {
            position: absolute; top: 41%; left: 22%; width: 100px; height: 68px;
            background: #fff; border-radius: 6px; transform: rotate(90deg);
            display: flex; align-items: center; justify-content: center;
            font-weight: 900; font-size: 22px; border: 2px solid var(--gold);
            opacity: 0; transition: 1.8s; z-index: 5;
        }
    </style>
</head>
<body>

<div id="wheel-layer">
    <div class="safe-wheel-container" id="main-wheel">
        <div class="wheel-center"></div>
        </div>
</div>

<div id="brand-layer">
    <div class="door-left"></div>
    <div class="door-right"></div>
    <div style="z-index: 10; text-align: center;">
        <div class="swiss-shield"></div>
        <h1 class="brand-name">HELVETIA LUCKY</h1>
    </div>
</div>

<div id="main-ui">
    <header>
        <div class="brand-main">HELVETIA LUCK</div>
        <div class="brand-sub">GLOBAL LOTTO POOL</div>
    </header>

    <div class="casino-floor" id="floor">
        </div>

    <div class="nav-bar">
        <div class="nav-btn" onclick="console.log('BAR')">–ë–ê–† (CHAT) üç∑</div>
        <div class="nav-btn" onclick="console.log('GAMES')">–î–†–£–ì–ò–ï –ò–ì–†–´ üÉè</div>
    </div>
</div>

<div id="game-room">
    <div id="velvet-table">
        <div class="table-light"></div>
        <div id="deck-zone"></div>
        <div id="trump-card">‚ô† A</div>
        
        <div id="slots-grid" style="position:absolute; inset:0; pointer-events:none;"></div>
    </div>
</div>

<script>
    /** * –ú–ê–ù–ò–§–ï–°–¢ –ú–û–ù–û–õ–ò–¢–ê. [cite: 2026-02-27]
     * –ö–æ–¥ –Ω–∞–ø–∏—Å–∞–Ω –º–Ω–æ–π (Gemini), —Å–ª–µ–¥—É—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –í–∏—Ç–∞–ª–∏—è.
     * –ó–∞–ø–∏—Å–∫–∞ –ø–∞–º—è—Ç–∏: Warten –∏ Erwarten. [cite: 2026-02-26]
     */
    const tg = window.Telegram.WebApp;
    tg.ready();
    tg.expand();

    let audioCtx = null;

    function initAudio() {
        if (!audioCtx) {
            audioCtx = new (window.AudioContext || window.webkitAudioContext)();
        }
    }

    function playSound(freq, duration, type, volume) {
        initAudio();
        const oscillator = audioCtx.createOscillator();
        const gainNode = audioCtx.createGain();

        oscillator.type = type;
        oscillator.frequency.setValueAtTime(freq, audioCtx.currentTime);
        gainNode.gain.setValueAtTime(volume, audioCtx.currentTime);
        gainNode.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + duration);

        oscillator.connect(gainNode);
        gainNode.connect(audioCtx.destination);

        oscillator.start();
        oscillator.stop(audioCtx.currentTime + duration);
    }

    // --- –õ–û–ì–ò–ö–ê –®–¢–£–†–í–ê–õ–ê ---
    const flags = ['üá∑üá∫', 'üá©üá™', 'üá´üá∑', 'üáÆüáπ', 'üá∫üá¶', 'üá¨üáß'];
    const wheel = document.getElementById('main-wheel');

    flags.forEach((flag, i) => {
        const angle = i * 60;
        const spoke = document.createElement('div');
        spoke.className = 'spoke';
        spoke.style.transform = `rotate(${angle}deg)`;

        const node = document.createElement('div');
        node.className = 'flag-node';
        node.innerHTML = flag;

        const radius = 145;
        const x = Math.sin(angle * Math.PI / 180) * radius;
        const y = -Math.cos(angle * Math.PI / 180) * radius;

        node.style.left = `calc(50% + ${x}px)`;
        node.style.top = `calc(50% + ${y}px)`;

        node.onclick = () => {
            playSound(60, 1, 'triangle', 0.4);
            wheel.style.transform = `rotate(${-angle + 720}deg)`;
            wheel.classList.add('wheel-vanishing');

            setTimeout(() => {
                const wl = document.getElementById('wheel-layer');
                wl.style.opacity = '0';
                setTimeout(() => {
                    wl.style.display = 'none';
                    openDoors();
                }, 800);
            }, 1200);
        };

        wheel.appendChild(spoke);
        wheel.appendChild(node);
    });

    // --- –õ–û–ì–ò–ö–ê –î–í–ï–†–ï–ô (–ë–ò–¢ –í –ë–ò–¢ –° –§–ò–ö–°–û–ú –ó–ê–î–ï–†–ñ–ö–ò) ---
    function openDoors() {
        const bl = document.getElementById('brand-layer');
        bl.style.display = 'flex';
        
        // –ú–∏–∫—Ä–æ–ø–∞—É–∑–∞ –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π –æ—Ç—Ä–∏—Å–æ–≤–∫–∏ –ø–µ—Ä–µ–¥ –∞–Ω–∏–º–∞—Ü–∏–µ–π
        setTimeout(() => {
            bl.style.opacity = '1';
            setTimeout(() => {
                playSound(800, 0.1, 'square', 0.1);
                setTimeout(() => playSound(40, 1.5, 'sawtooth', 0.3), 150);
                bl.classList.add('opened');
                setTimeout(initCasinoFloor, 1500);
            }, 50);
        }, 10);
    }
    // --- –õ–û–ì–ò–ö–ê –ì–õ–ê–í–ù–û–ì–û –ó–ê–õ–ê (12 –°–¢–û–õ–û–í) ---
    function initCasinoFloor() {
        const mainUI = document.getElementById('main-ui');
        const floor = document.getElementById('floor');
        
        mainUI.style.display = 'block';
        // –ü–ª–∞–≤–Ω–æ–µ –ø—Ä–æ—è–≤–ª–µ–Ω–∏–µ –∑–∞–ª–∞
        setTimeout(() => {
            mainUI.style.opacity = '1';
        }, 50);

        // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è 12 —Å—Ç–æ–ª–æ–≤ VCHF-UNIT
        for (let i = 1; i <= 12; i++) {
            const wrap = document.createElement('div');
            wrap.className = 'table-wrap';
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ª–∞–º–ø –∏ –ª–æ–≥–æ—Ç–∏–ø–∞ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
            wrap.innerHTML = `
                <div class="table-surface">
                    <div class="lamp l-t waiting"></div>
                    <div class="lamp l-b active"></div>
                    <div class="lamp l-l waiting"></div>
                    <div class="lamp l-r waiting"></div>
                    <img src="1771489965074(1).png" class="table-logo" alt="Logo">
                </div>
                <div style="position:absolute; bottom:-25px; width:100%; text-align:center; font-size:8px; font-family:'Orbitron'; opacity:0.5; color:var(--gold-swiss);">
                    VCHF-UNIT ${i}
                </div>
            `;

            wrap.onclick = () => {
                playSound(600, 0.2, 'sine', 0.2);
                enterGameRoom(i);
            };
            
            floor.appendChild(wrap);
        }
    }

    // --- –ü–ï–†–ï–•–û–î –í –ò–ì–†–û–í–û–ô –ó–ê–õ ---
    function enterGameRoom(tableId) {
        const mainUI = document.getElementById('main-ui');
        const gameRoom = document.getElementById('game-room');

        mainUI.style.opacity = '0';
        setTimeout(() => {
            mainUI.style.display = 'none';
            gameRoom.style.display = 'block';
            setTimeout(() => {
                gameRoom.style.opacity = '1';
                startCardEngine();
            }, 100);
        }, 800);
    }

    // --- –õ–û–ì–ò–ö–ê –ö–ê–†–¢ (–ò–°–•–û–î–ù–ò–ö ‚Ññ3 - –ú–û–ù–û–õ–ò–¢–ù–ê–Ø –í–ï–†–°–ò–Ø) ---
    function startCardEngine() {
        const deckZone = document.getElementById('deck-zone');
        deckZone.innerHTML = ''; // –û—á–∏—Å—Ç–∫–∞ –ø–µ—Ä–µ–¥ —Ä–∞–∑–¥–∞—á–µ–π

        // –°–æ–∑–¥–∞–µ–º 36 –∫–∞—Ä—Ç (–î—É—Ä–∞–∫)
        for (let i = 0; i < 36; i++) {
            const card = document.createElement('div');
            card.className = 'card-monolith';
            
            // –ù–∞—á–∞–ª—å–Ω—ã–π —Ö–∞–æ—Ç–∏—á–Ω—ã–π —Ä–∞–∑–ª–µ—Ç (–∫–∞–∫ –≤ —Ç–≤–æ–µ–º –æ—Ä–∏–≥–∏–Ω–∞–ª–µ)
            card.style.top = (Math.random() * 40 + 20) + '%';
            card.style.left = (Math.random() * 50 + 25) + '%';
            card.style.transform = `rotate(${Math.random() * 360}deg)`;
            
            deckZone.appendChild(card);

            // –°–±–æ—Ä–∫–∞ –≤ –∫–æ–ª–æ–¥—É —á–µ—Ä–µ–∑ –ø–∞—É–∑—É
            setTimeout(() => {
                card.classList.add('deck-stacked');
                card.style.zIndex = i;
                // –ó–≤—É–∫ –ø–µ—Ä–µ–ª–∏—Å—Ç—ã–≤–∞–Ω–∏—è –∫–∞–∂–¥–æ–π 4-–π –∫–∞—Ä—Ç—ã
                if (i % 4 === 0) playSound(1200, 0.05, 'sine', 0.02);
            }, 1000 + (i * 35));
        }

        // –ü–æ—è–≤–ª–µ–Ω–∏–µ –∫–æ–∑—ã—Ä—è
        setTimeout(() => {
            const trump = document.getElementById('trump-card');
            trump.style.opacity = '1';
            trump.style.left = '25%'; // –§–∏–Ω–∞–ª—å–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è –ø–æ–¥ –∫–æ–ª–æ–¥–æ–π
            playSound(600, 0.2, 'triangle', 0.05);
            
            // –ü–æ—Å–ª–µ –∫–æ–∑—ã—Ä—è –∞–∫—Ç–∏–≤–∏—Ä—É–µ–º —Å–µ—Ç–∫—É —Å–ª–æ—Ç–æ–≤
            initSlots();
        }, 4000);
    }

    // --- –ì–ï–ù–ï–†–ê–¶–ò–Ø 24 –°–õ–û–¢–û–í (–ü–û–î–ì–û–¢–û–í–ö–ê –ü–û–î –°–ï–¢–ö–£) ---
    function initSlots() {
        const grid = document.getElementById('slots-grid');
        // –ó–¥–µ—Å—å –±—É–¥–µ—Ç —Ä–∞–∑–º–µ—Ç–∫–∞ 24 —Å–ª–æ—Ç–æ–≤ —Å —Ç–≤–æ–∏–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ (Wide/Tall)
        console.log("Slots Engine Ready. Waiting for next window logic.");
    }
</script>
</body>
</html>
