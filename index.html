<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Lotto - –î–≤–∏–∂–æ–∫ VCHF Ultimate 3.0 (Spark Vision)</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root { 
            --gold: #d4af37; 
            --gold-bright: #f9e27d;
            --gold-glow: rgba(212, 175, 55, 0.45);
            --bg-deep: #050505;
            --glass-bg: rgba(20, 20, 20, 0.7);
            --glass-border: rgba(212, 175, 55, 0.2);
            --neon-cyan: #00ffff;
            --neon-hot: #ff4500;
            --neon-cold: #1e90ff;
            --font-main: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, sans-serif;
        } 

        body { 
            background: var(--bg-deep); 
            color: #fff; 
            font-family: var(--font-main);
            margin: 0; padding: 0;
            overflow: hidden;
            height: 100vh;
            user-select: none;
            -webkit-tap-highlight-color: transparent;
        }

        /* –§–æ–Ω–æ–≤—ã–π —ç—Ñ—Ñ–µ–∫—Ç - –ñ–∏–≤–∞—è —Ç—å–º–∞ */
        body::before {
            content: '';
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: radial-gradient(circle at 50% 50%, #111 0%, #000 100%);
            z-index: -1;
        }

        /* –ö–∞—Å—Ç–æ–º–Ω—ã–π –°–∫—Ä–æ–ª–ª */
        ::-webkit-scrollbar { width: 0px; }

        /* –ò–ò-–î–∏–∑–∞–π–Ω –ó–∞–≥–æ–ª–æ–≤–∫–∞ */
        .vchf-dashboard {
            background: linear-gradient(180deg, rgba(0,0,0,0.8) 0%, transparent 100%);
            padding: 30px 20px 20px;
            border-bottom: 1px solid var(--glass-border);
            backdrop-filter: blur(15px);
            position: relative; z-index: 100;
        }

        .vchf-title-glow {
            font-size: 10px; color: var(--gold);
            letter-spacing: 5px; text-transform: uppercase;
            margin-bottom: 10px; opacity: 0.8;
        }

        /* –ë–∞–ª–∞–Ω—Å - –∫–∞–∫ –≤ –±–∞–Ω–∫–æ–≤—Å–∫–∏—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö –±—É–¥—É—â–µ–≥–æ */
        .balance-master {
            display: flex; justify-content: space-between; gap: 15px;
            margin-top: 10px;
        }

        .wallet-card {
            flex: 1; padding: 15px;
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: 20px;
            transition: 0.5s cubic-bezier(0.2, 0.8, 0.2, 1);
            position: relative; overflow: hidden;
        }

        .wallet-card.active {
            border-color: var(--gold);
            box-shadow: 0 0 25px var(--gold-glow);
            transform: scale(1.03);
            background: rgba(212, 175, 55, 0.05);
        }

        .wallet-card::after {
            content: ''; position: absolute; top: -50%; left: -50%;
            width: 200%; height: 200%;
            background: radial-gradient(circle, var(--gold-glow) 0%, transparent 70%);
            opacity: 0; transition: 0.5s;
        }
        .wallet-card.active::after { opacity: 0.3; }

        .wallet-label { font-size: 9px; color: #888; text-transform: uppercase; letter-spacing: 1px; }
        .wallet-value { font-size: 24px; font-weight: 200; margin-top: 5px; }
        .wallet-value span { color: var(--gold); font-weight: bold; }

        /* –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –ø–µ—Ä–∏–æ–¥–∞–º */
        .period-selector {
            display: flex; justify-content: center; gap: 10px;
            margin: 20px 0;
        }

        .period-chip {
            padding: 8px 18px; border-radius: 30px;
            font-size: 11px; color: #666;
            background: rgba(255,255,255,0.03);
            border: 1px solid transparent;
            transition: 0.4s; cursor: pointer;
        }

        .period-chip.active {
            color: #fff; background: rgba(212, 175, 55, 0.1);
            border-color: var(--gold);
            box-shadow: 0 0 15px var(--gold-glow);
        }

        /* –°–ï–¢–ö–ê –°–§–ï–† - Spark Heatmap Edition */
        .lotto-grid-container {
            flex: 1; overflow-y: auto; padding: 10px 20px;
            display: grid; grid-template-columns: repeat(7, 1fr);
            gap: 12px; align-content: start;
        }

        .vchf-sphere {
            aspect-ratio: 1; border-radius: 50%;
            background: radial-gradient(circle at 30% 30%, #333 0%, #050505 100%);
            display: flex; align-items: center; justify-content: center;
            font-size: 18px; font-weight: 600; color: #fff;
            position: relative; transition: 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            border: 1px solid rgba(255,255,255,0.05);
            box-shadow: 0 5px 15px rgba(0,0,0,0.5);
            animation: sphere-float 4s infinite ease-in-out;
        }

        @keyframes sphere-float {
            0%, 100% { transform: translateY(0); box-shadow: 0 5px 15px rgba(0,0,0,0.5); }
            50% { transform: translateY(-5px); box-shadow: 0 12px 20px rgba(0,0,0,0.4); }
        }

        .vchf-sphere.selected {
            background: var(--gold);
            background: radial-gradient(circle at 35% 35%, var(--gold-bright) 0%, var(--gold) 100%);
            color: #000; transform: scale(1.2) !important;
            box-shadow: 0 0 30px var(--gold);
            border-color: #fff; z-index: 10;
        }

        /* –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã Heatmap */
        .vchf-sphere.is-hot::before {
            content: ''; position: absolute; inset: -3px; border-radius: 50%;
            border: 2px solid var(--neon-hot); opacity: 0.6; animation: neon-pulse 1.5s infinite;
        }
        .vchf-sphere.is-cold::before {
            content: ''; position: absolute; inset: -3px; border-radius: 50%;
            border: 2px solid var(--neon-cold); opacity: 0.6; animation: neon-pulse 2s infinite;
        }

        @keyframes neon-pulse {
            0% { transform: scale(1); opacity: 0.6; }
            50% { transform: scale(1.1); opacity: 0.2; }
            100% { transform: scale(1); opacity: 0.6; }
        }

        /* –§—É—Ç–µ—Ä –∏ –ö–Ω–æ–ø–∫–∞ Bi-Turbo */
        .vchf-footer {
            padding: 20px 25px 40px;
            background: linear-gradient(0deg, #000 50%, transparent 100%);
            backdrop-filter: blur(5px);
        }

        .power-bar-container {
            width: 100%; height: 4px; background: #111;
            border-radius: 10px; margin-bottom: 25px; overflow: hidden;
            border: 1px solid rgba(255,255,255,0.05);
        }

        .power-bar-fill {
            height: 100%; width: 0%;
            background: linear-gradient(90deg, var(--gold), var(--gold-bright));
            box-shadow: 0 0 15px var(--gold);
            transition: 1s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .btn-biturbo {
            width: 100%; padding: 22px; border-radius: 40px;
            background: transparent; border: 1px solid #222;
            color: #fff; font-size: 14px; font-weight: bold;
            letter-spacing: 4px; text-transform: uppercase;
            transition: 0.4s; position: relative; overflow: hidden;
        }

        .btn-biturbo.active {
            border-color: var(--gold); color: var(--gold);
            box-shadow: inset 0 0 20px rgba(212, 175, 55, 0.1);
        }

        .btn-biturbo.active::after {
            content: ''; position: absolute; top: -100%; left: -100%;
            width: 300%; height: 300%;
            background: linear-gradient(45deg, transparent, rgba(255,255,255,0.1), transparent);
            animation: sweep 3s infinite;
        }

        @keyframes sweep {
            0% { transform: translate(-100%, -100%); }
            100% { transform: translate(100%, 100%); }
        }

        /* –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã Smart Pick */
        .smart-row {
            display: flex; justify-content: space-between; margin-top: 20px;
        }
        .smart-item {
            font-size: 10px; color: #444; text-transform: uppercase;
            letter-spacing: 1px; transition: 0.3s; cursor: pointer;
        }
        .smart-item:hover, .smart-item.active { color: var(--gold); }

    </style>
</head>
<body>

<div id="app-content">
    <div class="vchf-dashboard">
        <div class="vchf-title-glow">Bi-Turbo Engine v3.0</div>
        <div class="balance-master">
            <div class="wallet-card active" id="w-vchf" onclick="VCHF.switchWallet('VCHF')">
                <div class="wallet-label">Virtual VCHF</div>
                <div class="wallet-value"><span id="val-vchf">100.00</span></div>
            </div>
            <div class="wallet-card" id="w-chf" onclick="VCHF.switchWallet('CHF')">
                <div class="wallet-label">Real CHF</div>
                <div class="wallet-value"><span id="val-chf">0.00</span></div>
            </div>
        </div>
    </div>

    <div class="period-selector">
        <div class="period-chip active" id="p-month" onclick="VCHF.setPeriod('month')">MONAT</div>
        <div class="period-chip" id="p-year" onclick="VCHF.setPeriod('year')">JAHR</div>
        <div class="period-chip" id="p-all" onclick="VCHF.setPeriod('all')">ALLE</div>
    </div>

    <div class="lotto-grid-container" id="main-grid">
        </div>

    <div class="vchf-footer">
        <div class="power-bar-container">
            <div class="power-bar-fill" id="strike-power"></div>
        </div>
        <button class="btn-biturbo" id="main-action" onclick="VCHF.engage()">
            Engage Bi-Turbo
        </button>
        <div class="smart-row">
            <div class="smart-item" onclick="VCHF.smart('hot')">üî• Hot Summer</div>
            <div class="smart-item" onclick="VCHF.smart('sleeping')">üí§ Sleeping Giant</div>
            <div class="smart-item" onclick="VCHF.smart('random')">üé≤ Chaos Pick</div>
        </div>
    </div>
</div>
<script>
const VCHF = {
    state: {
        balanceVCHF: 100.00,
        balanceCHF: 0.00,
        currency: 'VCHF',
        selected: [],
        period: 'month',
        activeTool: null,
        matrix: {}, // –•—Ä–∞–Ω–∏–ª–∏—â–µ –≤–µ—Å–æ–≤ –¥–ª—è Heatmap
        tickets: []
    },

    init() {
        this.tg = window.Telegram.WebApp;
        this.tg.expand();
        this.generateMatrix();
        this.renderGrid();
        this.updateUI();
        console.log("Spark Vision Engine Active. DNA check: 1771489965074(1).png logic ready.");
    },

    // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≤–µ—Å–æ–≤ –¥–ª—è "–¥—ã—à–∞—â–µ–≥–æ" Heatmap
    generateMatrix() {
        for(let i=1; i<=42; i++) {
            this.state.matrix[i] = {
                month: Math.random(),
                year: Math.random(),
                all: Math.random()
            };
        }
    },

    renderGrid() {
        const grid = document.getElementById('main-grid');
        if(!grid) return;
        grid.innerHTML = '';

        for(let i=1; i<=42; i++) {
            const sphere = document.createElement('div');
            sphere.className = 'vchf-sphere';
            sphere.innerText = i;
            sphere.id = `ball-${i}`;
            
            // –ü—Ä–∏–º–µ–Ω—è–µ–º –≤–µ—Å–∞ —Ç–µ–∫—É—â–µ–≥–æ –ø–µ—Ä–∏–æ–¥–∞
            const weight = this.state.matrix[i][this.state.period];
            if(weight > 0.85) sphere.classList.add('is-hot');
            if(weight < 0.15) sphere.classList.add('is-cold');
            
            if(this.state.selected.includes(i)) sphere.classList.add('selected');
            
            // –ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –∞–Ω–∏–º–∞—Ü–∏–∏ –¥–ª—è "–∂–∏–≤–æ–≥–æ" —ç—Ñ—Ñ–µ–∫—Ç–∞
            sphere.style.animationDelay = `${(Math.random() * 2).toFixed(2)}s`;
            
            sphere.onclick = () => this.toggleNumber(i);
            grid.appendChild(sphere);
        }
    },

    toggleNumber(n) {
        const idx = this.state.selected.indexOf(n);
        if(idx > -1) {
            this.state.selected.splice(idx, 1);
        } else if(this.state.selected.length < 6) {
            this.state.selected.push(n);
            this.haptic('light');
        }
        this.state.activeTool = null;
        this.updateUI();
        this.renderGrid();
    },

    setPeriod(p) {
        this.state.period = p;
        document.querySelectorAll('.period-chip').forEach(c => {
            c.classList.toggle('active', c.id === `p-${p}`);
        });
        this.haptic('medium');
        
        // –ï—Å–ª–∏ –±—ã–ª –∞–∫—Ç–∏–≤–µ–Ω —Å–º–∞—Ä—Ç-—Ñ–∏–ª—å—Ç—Ä, –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ–º –µ–≥–æ –º–≥–Ω–æ–≤–µ–Ω–Ω–æ
        if(this.state.activeTool) {
            this.smart(this.state.activeTool);
        } else {
            this.renderGrid();
        }
    },

    smart(type) {
        this.state.activeTool = type;
        const p = this.state.period;
        let pool = Object.keys(this.state.matrix).map(Number);
        
        if(type === 'hot') {
            pool.sort((a, b) => this.state.matrix[b][p] - this.state.matrix[a][p]);
        } else if(type === 'sleeping') {
            pool.sort((a, b) => this.state.matrix[a][p] - this.state.matrix[b][p]);
        } else {
            pool.sort(() => Math.random() - 0.5);
        }

        this.state.selected = pool.slice(0, 6);
        this.renderGrid();
        this.updateUI();
        this.haptic('success');
    },

    updateUI() {
        const count = this.state.selected.length;
        const power = (count / 6) * 100;
        document.getElementById('strike-power').style.width = `${power}%`;
        
        const btn = document.getElementById('main-action');
        btn.classList.toggle('active', count === 6);
        btn.innerText = count === 6 ? `Best√§tigen (2.50 ${this.state.currency})` : `Pick ${6 - count} more`;

        document.getElementById('val-vchf').innerText = this.state.balanceVCHF.toFixed(2);
        document.getElementById('val-chf').innerText = this.state.balanceCHF.toFixed(2);
    },

    switchWallet(w) {
        this.state.currency = w;
        document.getElementById('w-vchf').classList.toggle('active', w === 'VCHF');
        document.getElementById('w-chf').classList.toggle('active', w === 'CHF');
        this.updateUI();
        this.haptic('light');
    },

    engage() {
        if(this.state.selected.length !== 6) return;
        
        const price = 2.50;
        const balKey = this.state.currency === 'VCHF' ? 'balanceVCHF' : 'balanceCHF';
        
        if(this.state.balanceVCHF >= price) { // –£–ø—Ä–æ—â–µ–Ω–Ω–æ –¥–ª—è —Ç–µ—Å—Ç–∞
            this.state[balKey] -= price;
            this.state.tickets.push([...this.state.selected]);
            this.state.selected = [];
            this.haptic('notification-success');
            this.updateUI();
            this.renderGrid();
            this.tg.showAlert("Ticket Bio-Turbo Engaged! üöÄ");
        } else {
            this.tg.showAlert("Insufficient Funds");
        }
    },

    haptic(type) {
        try {
            if(type === 'light') this.tg.HapticFeedback.impactOccurred('light');
            if(type === 'medium') this.tg.HapticFeedback.impactOccurred('medium');
            if(type === 'success') this.tg.HapticFeedback.notificationOccurred('success');
        } catch(e) {}
    }
};

window.onload = () => VCHF.init();
</script>
</body>
</html>
