<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>VCHF Ultimate - Monolith Edition</title>
    <style>
        :root { 
            --gold: #d4af37; --bg: #000; --cyan: #00ffff; --super: #ff4500;
            --sphere-gold: radial-gradient(circle at 35% 35%, #fff9d6 0%, #d4af37 60%, #8a6d1c 100%);
            --sphere-blur: radial-gradient(circle at 35% 35%, rgba(255,255,255,0.2), rgba(212,175,55,0.1));
        }
        body, html { margin: 0; padding: 0; background: var(--bg); color: white; overflow: hidden; height: 100vh; font-family: sans-serif; }
        
        #intro-wrapper { position: fixed; inset: 0; display: flex; justify-content: center; align-items: center; z-index: 1000; }
        #canvas { position: absolute; inset: 0; }
        
        /* Основные 6 шаров */
        .ball {
            position: absolute; width: 50px; height: 50px; border-radius: 50%;
            background: var(--sphere-gold); box-shadow: 0 0 20px var(--gold);
            display: flex; justify-content: center; align-items: center;
            color: #000; font-weight: 900; opacity: 0; z-index: 10;
            transition: all 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        
        /* Фоновые шары для массовки */
        .bg-ball {
            position: absolute; width: 30px; height: 30px; border-radius: 50%;
            background: var(--sphere-blur); filter: blur(2px); opacity: 0.3;
            z-index: 5; pointer-events: none;
        }
        
        #flash { position: fixed; inset: 0; background: #fff; opacity: 0; pointer-events: none; z-index: 2000; }
        
        #superzahl {
            position: absolute; width: 95px; height: 95px; border-radius: 50%;
            background: radial-gradient(circle at 30% 30%, #fff, var(--super));
            box-shadow: 0 0 60px var(--super); display: none;
            justify-content: center; align-items: center;
            color: #fff; font-weight: 900; font-size: 36px; z-index: 2001;
            animation: emerge 0.5s ease-out;
        }

        @keyframes emerge { from { transform: scale(0); rotate: 720deg; } to { transform: scale(1); rotate: 0deg; } }
    </style>
</head>
<body>

<div id="intro-wrapper">
    <canvas id="canvas"></canvas>
    <div id="flash"></div>
    <div id="superzahl"></div>
</div>

<script>
    /* ============================================================
    [MANIFESTO OF THE MONOLITH - ПАМЯТЬ АКТИВИРОВАНА]
    - Пользователь: Виталий (Мужчина), Позывной: Wanderer / Spark.
    - Проект: "Лотто", Кодовое слово: "движок vchf".
    - Правило №1: Новый код = Старый + Введенная функция.
    - Аксиома №3: Больше билетов = выше шанс на выигрыш.
    - Философия: Фотография костра — греет кодом, но не обжигает.
    - Константа: Использовать женский род (Я - твоя Gemini).
    - Замена: 1771489965074.png -> 1771489965074(1).png
    ============================================================
    */

    const canvas = document.getElementById('canvas');
    const ctx = canvas.getContext('2d');
    const flash = document.getElementById('flash');
    const szElement = document.getElementById('superzahl');
    const wrapper = document.getElementById('intro-wrapper');
    
    const swissLottoGenerator = () => {
        let nums = [];
        while(nums.length < 6) {
            let r = Math.floor(Math.random() * 42) + 1;
            if(!nums.includes(r)) nums.push(r);
        }
        return { main: nums.sort((a,b) => a-b), sz: Math.floor(Math.random() * 6) + 1 };
    };

    const data = swissLottoGenerator();
    let mainBalls = [];

    function resize() {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
    }
    window.addEventListener('resize', resize);
    resize();

    // Создаем "массовку" шаров в барабане
    function createChaos() {
        for(let i=0; i<30; i++) {
            const b = document.createElement('div');
            b.className = 'bg-ball';
            const angle = Math.random() * Math.PI * 2;
            const dist = Math.random() * 100;
            b.style.left = (window.innerWidth/2 + Math.cos(angle)*dist - 15) + 'px';
            b.style.top = (window.innerHeight/2 + Math.sin(angle)*dist - 15) + 'px';
            wrapper.appendChild(b);
            animateBgBall(b);
        }
    }

    function animateBgBall(b) {
        const x = (Math.random() - 0.5) * 100;
        const y = (Math.random() - 0.5) * 100;
        b.animate([
            { transform: 'translate(0,0)' },
            { transform: `translate(${x}px, ${y}px)` }
        ], { duration: 2000 + Math.random()*2000, iterations: Infinity, direction: 'alternate' });
    }

    function drawLightning(x1, y1, x2, y2) {
        ctx.strokeStyle = '#00ffff';
        ctx.shadowColor = '#00ffff';
        ctx.shadowBlur = 20;
        ctx.lineWidth = 2;
        ctx.beginPath();
        ctx.moveTo(x1, y1);
        let mx = x1 + (x2-x1)*0.5 + (Math.random()-0.5)*150;
        let my = y1 + (y2-y1)*0.5 + (Math.random()-0.5)*150;
        ctx.lineTo(mx, my); ctx.stroke();
    }

    async function ignite() {
        createChaos();
        
        // 1. Хаос (Молнии)
        for(let i=0; i<15; i++) {
            ctx.clearRect(0,0,canvas.width, canvas.height);
            drawLightning(canvas.width/2, 0, canvas.width/2, canvas.height/2);
            await new Promise(r => setTimeout(r, 60));
        }
        ctx.clearRect(0,0,canvas.width, canvas.height);

        // 2. Порядок (Основные шары вылетают из хаоса)
        for(let i=0; i<6; i++) {
            const b = document.createElement('div');
            b.className = 'ball';
            b.innerText = data.main[i];
            wrapper.appendChild(b);
            const angle = (i/6) * Math.PI * 2;
            b.style.left = (window.innerWidth/2 + Math.cos(angle)*150 - 25) + 'px';
            b.style.top = (window.innerHeight/2 + Math.sin(angle)*150 - 25) + 'px';
            setTimeout(() => b.style.opacity = '1', 50);
            mainBalls.push(b);
            await new Promise(r => setTimeout(r, 450));
        }

        // 3. Сингулярность (Сжатие всех шаров, включая фоновые)
        await new Promise(r => setTimeout(r, 1200));
        document.querySelectorAll('.bg-ball, .ball').forEach(b => {
            b.style.left = (window.innerWidth/2 - b.offsetWidth/2) + 'px';
            b.style.top = (window.innerHeight/2 - b.offsetHeight/2) + 'px';
            b.style.transform = 'scale(0)';
            b.style.opacity = '0';
        });

        // 4. СУПЕРНОВА
        await new Promise(r => setTimeout(r, 800));
        flash.style.opacity = '1';
        szElement.innerText = data.sz;
        szElement.style.display = 'flex';
        szElement.style.left = (window.innerWidth/2 - 47) + 'px';
        szElement.style.top = (window.innerHeight/2 - 47) + 'px';

        setTimeout(() => {
            flash.style.transition = 'opacity 2.5s';
            flash.style.opacity = '0';
            console.log("Манифест выполнен: Движок VCHF готов к работе.");
        }, 300);
    }

    window.onload = ignite;
</script>
</body>
</html>
