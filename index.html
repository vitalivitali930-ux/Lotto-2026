<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>VCHF Intro Preview</title>
    <style>
        :root {
            --gold: #d4af37;
            --super-red: #ff4444;
            --bg: #000;
        }

        body, html {
            margin: 0; padding: 0;
            background: var(--bg);
            overflow: hidden;
            width: 100vw; height: 100vh;
            display: flex; justify-content: center; align-items: center;
        }

        #intro-stage {
            position: relative;
            width: 100%; height: 100%;
            display: flex; justify-content: center; align-items: center;
        }

        #lightning-canvas {
            position: absolute;
            top: 0; left: 0;
            z-index: 1;
        }

        /* Стеклянный барабан */
        #drum {
            position: absolute;
            width: 280px; height: 280px;
            border: 2px solid rgba(212, 175, 55, 0.3);
            border-radius: 50%;
            background: radial-gradient(circle at 30% 30%, rgba(255,255,255,0.1), transparent);
            box-shadow: inset 0 0 50px rgba(212, 175, 55, 0.1), 0 0 20px rgba(212, 175, 55, 0.2);
            z-index: 2;
            opacity: 0;
            transition: opacity 1.5s ease;
            display: flex; justify-content: center; align-items: center;
        }

        /* Шары лото */
        .ball {
            position: absolute;
            width: 45px; height: 45px;
            border-radius: 50%;
            background: radial-gradient(circle at 30% 30%, #fff, var(--gold));
            box-shadow: 0 0 15px var(--gold);
            display: flex; justify-content: center; align-items: center;
            color: #000; font-weight: 900; font-size: 18px;
            z-index: 3;
            opacity: 0;
            transition: transform 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275), opacity 0.5s;
        }

        .ball.hot {
            animation: pulse-hot 1.5s infinite;
            box-shadow: 0 0 25px #ffcc00;
        }

        @keyframes pulse-hot {
            0% { transform: scale(1); box-shadow: 0 0 15px var(--gold); }
            50% { transform: scale(1.1); box-shadow: 0 0 30px #ff0000; }
            100% { transform: scale(1); box-shadow: 0 0 15px var(--gold); }
        }

        /* Вспышка сверхновой */
        #supernova {
            position: absolute;
            width: 100%; height: 100%;
            background: #fff;
            z-index: 100;
            opacity: 0;
            pointer-events: none;
        }

        #superzahl-ball {
            position: absolute;
            width: 80px; height: 80px;
            border-radius: 50%;
            background: radial-gradient(circle at 30% 30%, #fff, var(--super-red));
            box-shadow: 0 0 50px var(--super-red);
            display: flex; justify-content: center; align-items: center;
            color: #fff; font-weight: 900; font-size: 32px;
            z-index: 101;
            opacity: 0;
            transform: scale(0.1);
        }

        .vchf-logo {
            position: absolute;
            bottom: 50px;
            font-weight: 900;
            letter-spacing: 5px;
            color: var(--gold);
            opacity: 0;
            transition: opacity 2s;
            text-shadow: 0 0 10px var(--gold);
        }
    </style>
</head>
<body>
    <div id="intro-stage">
        <canvas id="lightning-canvas"></canvas>
        <div id="drum"></div>
        <div id="supernova"></div>
        <div id="superzahl-ball">?</div>
        <div class="vchf-logo">VCHF ULTIMATE</div>
    </div>

<script>
    const canvas = document.getElementById('lightning-canvas');
    const ctx = canvas.getContext('2d');
    const ballsData = [4, 15, 23, 30, 31, 40]; // Реальные цифры (мустер)
    const szData = 5; // Superzahl
    const ballsElements = [];

    function resize() {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
    }
    window.addEventListener('resize', resize);
    resize();

    // --- Фаза 1: Молния ---
    function drawLightning(x1, y1, x2, y2, branches) {
        if (branches <= 0) return;
        ctx.strokeStyle = '#00ffff';
        ctx.lineWidth = 2;
        ctx.shadowBlur = 15;
        ctx.shadowColor = '#00ffff';
        ctx.beginPath();
        ctx.moveTo(x1, y1);
        
        let cx = x1 + (x2 - x1) * 0.5 + (Math.random() - 0.5) * 100;
        let cy = y1 + (y2 - y1) * 0.5 + (Math.random() - 0.5) * 100;
        
        ctx.lineTo(cx, cy);
        ctx.stroke();
        
        drawLightning(cx, cy, x2, y2, branches - 1);
    }

    async function startIntro() {
        // Удар молнии
        let strikes = 0;
        const strikeInterval = setInterval(() => {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            drawLightning(canvas.width / 2, 0, canvas.width / 2, canvas.height / 2, 5);
            strikes++;
            if (strikes > 10) {
                clearInterval(strikeInterval);
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                showDrum();
            }
        }, 100);
    }

    // --- Фаза 2: Барабан и вылет шаров ---
    function showDrum() {
        const drum = document.getElementById('drum');
        drum.style.opacity = '1';
        
        setTimeout(() => {
            ballsData.forEach((num, i) => {
                setTimeout(() => {
                    const ball = document.createElement('div');
                    ball.className = 'ball' + (i % 2 === 0 ? ' hot' : '');
                    ball.innerText = num;
                    document.getElementById('intro-stage').appendChild(ball);
                    
                    // Расставляем по кругу
                    const angle = (i / ballsData.length) * Math.PI * 2;
                    const x = Math.cos(angle) * 120;
                    const y = Math.sin(angle) * 120;
                    
                    ball.style.opacity = '1';
                    ball.style.transform = `translate(${x}px, ${y}px)`;
                    ballsElements.push(ball);

                    if (i === ballsData.length - 1) setTimeout(mergeBalls, 2000);
                }, i * 600);
            });
        }, 1000);
    }

    // --- Фаза 3: Слияние и Сверхновая ---
    function mergeBalls() {
        ballsElements.forEach(ball => {
            ball.style.transform = 'translate(0px, 0px) scale(1.5)';
            ball.style.filter = 'blur(10px) brightness(2)';
            ball.style.opacity = '0.5';
        });

        setTimeout(() => {
            const sn = document.getElementById('supernova');
            sn.style.transition = 'opacity 0.2s';
            sn.style.opacity = '1'; // Взрыв!

            setTimeout(() => {
                // Убираем всё старое
                ballsElements.forEach(b => b.remove());
                document.getElementById('drum').style.display = 'none';
                
                // Рождение Superzahl
                const sz = document.getElementById('superzahl-ball');
                sz.innerText = szData;
                sz.style.opacity = '1';
                sz.style.transform = 'scale(1.2)';
                sz.style.transition = 'all 1s cubic-bezier(0.175, 0.885, 0.32, 1.275)';
                
                sn.style.transition = 'opacity 1.5s';
                sn.style.opacity = '0';
                
                document.querySelector('.vchf-logo').style.opacity = '1';
            }, 300);
        }, 1500);
    }

    window.onload = startIntro;
</script>
</body>
</html>
