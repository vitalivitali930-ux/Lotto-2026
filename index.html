<!DOCTYPE html>
<html lang="ru" translate="no">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>VCHF Durak Elite</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --cherry-velvet: radial-gradient(circle, #6b0a0a 0%, #3a0404 70%, #000000 100%);
            --gold: #d4af37;
            --card-white: #ffffff;
            --card-shadow: 0 10px 20px rgba(0,0,0,0.5);
        }

        body, html {
            margin: 0; padding: 0;
            width: 100%; height: 100%;
            background: var(--cherry-velvet);
            font-family: 'Orbitron', sans-serif;
            overflow: hidden;
            color: white;
        }

        /* Игровой стол */
        #table {
            position: relative;
            width: 100vw; height: 100vh;
            display: flex; flex-direction: column;
            justify-content: space-between;
            align-items: center;
            padding: env(safe-area-inset-top) 0 env(safe-area-inset-bottom) 0;
        }

        /* Зоны игроков */
        .hand {
            display: flex;
            justify-content: center;
            gap: -20px; /* Карты чуть внахлест */
            width: 100%;
            height: 150px;
            padding: 10px;
        }

        #enemy-hand { transform: rotate(180deg); } /* Оппонент сверху */

        /* Карточное поле (Бито/Ход) */
        #play-area {
            flex-grow: 1;
            width: 90%;
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            grid-template-rows: repeat(2, 1fr);
            gap: 15px;
            align-content: center;
            justify-items: center;
        }

        /* Стили карты */
        .card {
            width: 70px;
            height: 105px;
            background: var(--card-white);
            border-radius: 8px;
            border: 2px solid var(--gold);
            box-shadow: var(--card-shadow);
            position: relative;
            cursor: pointer;
            transition: transform 0.3s, z-index 0s;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            padding: 5px;
            user-select: none;
        }

        .card.back {
            background: #fff;
            background-image: url('1771489965074(1).png');
            background-size: 70%;
            background-repeat: no-repeat;
            background-position: center;
        }

        .card .suit-top { align-self: flex-start; font-size: 14px; color: black; }
        .card .value { align-self: center; font-size: 20px; font-weight: 900; color: black; }
        .card .suit-bot { align-self: flex-end; font-size: 14px; color: black; }

        .red { color: #d10000 !important; }

        /* Колода и Козырь */
        #deck-container {
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            width: 80px;
        }

        .trump-card {
            transform: rotate(90deg);
            position: absolute;
            left: -30px;
            z-index: 1;
        }

        .deck-stack {
            z-index: 2;
        }

        /* Кнопки управления */
        .controls {
            position: absolute;
            right: 20px;
            bottom: 160px;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .btn-game {
            background: var(--gold);
            border: none;
            padding: 10px 20px;
            font-family: 'Orbitron';
            font-weight: 900;
            border-radius: 5px;
            cursor: pointer;
            box-shadow: 0 0 10px rgba(212, 175, 55, 0.5);
        }

        .btn-game:disabled { background: #555; box-shadow: none; }
    </style>
</head>
<body>

<div id="table">
    <div id="enemy-hand" class="hand"></div>
    
    <div id="play-area"></div>

    <div id="deck-container">
        <div id="trump-slot"></div>
        <div id="main-deck" class="card back deck-stack"></div>
    </div>

    <div class="controls">
        <button id="btn-action" class="btn-game" onclick="actionHandler()">БИТО</button>
    </div>

    <div id="player-hand" class="hand"></div>
</div>

<script>
    /* SPARK LOGIC: DURAK vchf ENGINE 1.0
       Манифест Монолита: Новый код = Старый + Введенная функция
    */

    const suits = ['♠', '♣', '♥', '♦'];
    const values = ['6', '7', '8', '9', '10', 'J', 'Q', 'K', 'A'];
    let deck = [];
    let trump = null;
    let playerHand = [];
    let enemyHand = [];
    let table = []; // Карты на столе: {attack: card, defense: card}

    function createDeck() {
        deck = [];
        for (let s of suits) {
            for (let v of values) {
                deck.push({ suit: s, value: v, isRed: (s === '♥' || s === '♦') });
            }
        }
        shuffle(deck);
        trump = deck[0]; // Последняя карта - козырь
        renderTrump();
    }

    function shuffle(array) {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
    }

    function renderTrump() {
        const slot = document.getElementById('trump-slot');
        slot.innerHTML = '';
        const cardEl = createCardElement(trump, false);
        cardEl.classList.add('trump-card');
        slot.appendChild(cardEl);
    }

    function createCardElement(card, isBack) {
        const div = document.createElement('div');
        div.className = 'card' + (isBack ? ' back' : '');
        if (!isBack) {
            const colorClass = card.isRed ? 'red' : '';
            div.innerHTML = `
                <div class="suit-top ${colorClass}">${card.suit}</div>
                <div class="value ${colorClass}">${card.value}</div>
                <div class="suit-bot ${colorClass}">${card.suit}</div>
            `;
        }
        return div;
    }

    // Первоначальная инициализация
    createDeck();
    
    // В Window 2 перейдем к раздаче и ИИ
</script>
</body>
</html>
