<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Lotto - VCHF Engine Ultimate 3.0</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root { 
            --main-color: #d4af37; 
            --main-glow: rgba(212, 175, 55, 0.4);
            --bg-deep: #000000;
            --sphere-bg: radial-gradient(circle at 35% 35%, #444 0%, #111 100%);
            --text-color: #ffffff;
            --neon-blue: #00f3ff;
            --neon-hot: #ff4500;
            --neon-cold: #1e90ff;
        } 

        /* –¢–ï–ú–´ –û–§–û–†–ú–õ–ï–ù–ò–Ø */
        body.theme-gold { --main-color: #d4af37; --main-glow: rgba(212, 175, 55, 0.4); }
        body.theme-lime { --main-color: #32CD32; --main-glow: rgba(50, 205, 50, 0.4); }
        body.theme-cyan { --main-color: #00ffff; --main-glow: rgba(0, 255, 255, 0.4); }
        body.theme-cherry { --main-color: #C511A4; --main-glow: rgba(197, 17, 164, 0.4); }
        body.theme-silver { --main-color: #c0c0c0; --main-glow: rgba(192, 192, 192, 0.4); }
        
        /* –¢–ï–ú–ê –¢–†–û–ù (TRON LEGACY) */
        body.theme-tron { 
            --main-color: var(--neon-blue); 
            --main-glow: rgba(0, 243, 255, 0.6);
            --bg-deep: #00050a;
            --sphere-bg: radial-gradient(circle at 50% 50%, #001a24 0%, #000 100%);
        }
        body.theme-tron::before {
            content: ''; position: fixed; inset: 0;
            background-image: 
                linear-gradient(rgba(0, 243, 255, 0.05) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0, 243, 255, 0.05) 1px, transparent 1px);
            background-size: 30px 30px; z-index: -1;
        }

        body { 
            background: var(--bg-deep); color: var(--text-color); 
            font-family: -apple-system, sans-serif; text-align: center; 
            margin: 0; overflow: hidden; transition: all 0.5s ease;
        } 

        /* –í–ï–ï–†–ù–´–ô –Ø–ó–´–ö–û–í–û–ô –°–ï–õ–ï–ö–¢–û–† */
        .lang-wrapper { position: relative; height: 80px; margin-top: 15px; z-index: 1001; }
        .lang-main { 
            width: 50px; height: 50px; line-height: 50px; border-radius: 50%;
            background: var(--main-color); color: #000; font-size: 24px;
            margin: 0 auto; cursor: pointer; position: relative; z-index: 10;
            box-shadow: 0 0 15px var(--main-glow); transition: 0.3s;
        }
        .lang-item {
            position: absolute; width: 40px; height: 40px; line-height: 40px;
            background: #111; border: 1px solid var(--main-color);
            border-radius: 50%; font-size: 20px; cursor: pointer;
            transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            opacity: 0; transform: translate(-50%, -50%) scale(0);
            left: 50%; top: 50%;
        }
        .lang-wrapper.active .lang-item { opacity: 1; transform: scale(1); }
        /* RU –∏ UA —Ä–∞–∑–Ω–µ—Å–µ–Ω—ã –≤ —Ä–∞–∑–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã */
        .lang-wrapper.active .pos-ru { left: calc(50% - 110px); top: 30px; }
        .lang-wrapper.active .pos-ua { left: calc(50% + 110px); top: 30px; }
        .lang-wrapper.active .pos-en { left: 50%; top: 70px; }
        .lang-wrapper.active .pos-de { left: calc(50% - 60px); top: 65px; }
        .lang-wrapper.active .pos-it { left: calc(50% + 60px); top: 65px; }
        .lang-wrapper.active .pos-fr { left: 50%; top: -10px; }

        /* –ò–ù–¢–ï–†–§–ï–ô–° –ë–ê–õ–ê–ù–°–ê */
        .balance-master {
            display: flex; gap: 10px; padding: 15px; justify-content: center;
        }
        .bal-card { 
            flex: 1; border-radius: 15px; padding: 12px; 
            background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.1);
            transition: 0.4s; cursor: pointer;
        }
        .bal-card.active { 
            border-color: var(--main-color); background: rgba(255,255,255,0.07);
            box-shadow: 0 0 20px var(--main-glow); transform: translateY(-3px);
        }
        .bal-val { font-size: 22px; font-weight: bold; color: #32CD32; }

        /* –°–ï–¢–ö–ê –°–§–ï–† - Spark Vision */
        .grid-container {
            display: grid; grid-template-columns: repeat(7, 1fr);
            gap: 12px; padding: 10px 20px; max-width: 450px; margin: 0 auto;
        }
        .sphere { 
            aspect-ratio: 1; background: var(--sphere-bg); border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            font-size: 20px; font-weight: 800; cursor: pointer;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            border: 1px solid rgba(255,255,255,0.05);
            position: relative;
        }
        .sphere.selected {
            background: linear-gradient(135deg, #fff, var(--main-color));
            color: #000; transform: scale(1.15) translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.6), 0 0 30px var(--main-color);
            border: 2px solid #fff; z-index: 10;
        }

        /* HEATMAP - –ì–ª—É–±–æ–∫–∏–µ —Ç–µ–Ω–∏ */
        .sphere.heat-hot { box-shadow: 0 0 25px var(--neon-hot); border-color: var(--neon-hot); }
        .sphere.heat-cold { box-shadow: 0 0 25px var(--neon-cold); border-color: var(--neon-cold); }
        
        /* –¢–ï–ú–ê –¢–†–û–ù - –û–°–û–ë–´–ô –°–¢–ò–õ–¨ –°–§–ï–† */
        body.theme-tron .sphere.selected {
            background: #000; color: var(--neon-blue);
            box-shadow: 0 0 40px var(--neon-blue), inset 0 0 20px var(--neon-blue);
            border-color: var(--neon-blue);
        }

        .btn-main {
            width: 85%; padding: 20px; border-radius: 20px;
            background: var(--main-color); color: #000;
            border: none; font-size: 18px; font-weight: 900;
            margin: 20px 0; cursor: pointer; transition: 0.3s;
            text-transform: uppercase; letter-spacing: 2px;
        }
        .btn-main:active { transform: scale(0.95); }

        .theme-panel {
            position: fixed; top: 80px; right: 15px;
            display: flex; flex-direction: column; gap: 10px;
            z-index: 1000;
        }
        .dot { width: 30px; height: 30px; border-radius: 50%; border: 2px solid #fff; cursor: pointer; }

        @keyframes pulse {
            0% { transform: scale(1); opacity: 0.8; }
            50% { transform: scale(1.05); opacity: 1; }
            100% { transform: scale(1); opacity: 0.8; }
        }
    </style>
</head>
<body class="theme-tron">

<div class="theme-panel">
    <div class="dot" style="background: #00f3ff;" onclick="setTheme('tron')"></div>
    <div class="dot" style="background: #d4af37;" onclick="setTheme('gold')"></div>
    <div class="dot" style="background: #32CD32;" onclick="setTheme('lime')"></div>
    <div class="dot" style="background: #00ffff;" onclick="setTheme('cyan')"></div>
    <div class="dot" style="background: #C511A4;" onclick="setTheme('cherry')"></div>
    <div class="dot" style="background: #c0c0c0;" onclick="setTheme('silver')"></div>
</div>

<div id="app-content">
    <div class="lang-wrapper" id="lang-box">
        <div class="lang-main" onclick="document.getElementById('lang-box').classList.toggle('active')">üåê</div>
        <div class="lang-item pos-ru" onclick="setLang('ru')">üá∑üá∫</div>
        <div class="lang-item pos-ua" onclick="setLang('ua')">üá∫üá¶</div>
        <div class="lang-item pos-en" onclick="setLang('en')">üá∫üá∏</div>
        <div class="lang-item pos-de" onclick="setLang('de')">üá©üá™</div>
        <div class="lang-item pos-it" onclick="setLang('it')">üáÆüáπ</div>
        <div class="lang-item pos-fr" onclick="setLang('fr')">üá´üá∑</div>
    </div>

    <div class="balance-master">
        <div class="bal-card active" id="w-vchf" onclick="switchCurrency('VCHF')">
            <div style="font-size:10px;">VIRTUAL</div>
            <div class="bal-val" id="vchf-val">100.00</div>
        </div>
        <div class="bal-card" id="w-chf" onclick="switchCurrency('CHF')">
            <div style="font-size:10px;">REAL</div>
            <div class="bal-val" id="chf-val">0.00</div>
        </div>
    </div>

    <div class="grid-container" id="main-grid"></div>
    
    <div style="margin-top:20px; color:var(--main-color); font-weight:bold; letter-spacing:3px;">SUPERZAHL</div>
    <div class="grid-container" id="super-grid" style="grid-template-columns: repeat(6, 1fr); padding-bottom:100px;"></div>

    <div style="position:fixed; bottom:0; left:0; right:0; background: rgba(0,0,0,0.9); backdrop-filter:blur(10px); border-top:1px solid var(--main-color);">
        <button class="btn-main" id="main-btn" onclick="runEngine()">CONFIRM TICKET</button>
    </div>
</div>
<script>
    const tg = window.Telegram.WebApp;
    tg.expand();

    let state = {
        selected: [],
        superNum: null,
        currency: 'VCHF',
        lang: 'en',
        theme: 'tron',
        matrix: {} // –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –¥–ª—è Heatmap
    };

    const dict = {
        en: { btn: "CONFIRM TICKET", super: "SUPERZAHL", alert: "Select 6 + Super!" },
        ru: { btn: "–ü–û–î–¢–í–ï–†–î–ò–¢–¨", super: "–ë–û–ù–£–°-–®–ê–†", alert: "–í—ã–±–µ—Ä–∏ 6 + –ë–æ–Ω—É—Å!" },
        ua: { btn: "–ü–Ü–î–¢–í–ï–†–î–ò–¢–ò", super: "–ë–û–ù–£–°-–®–ê–†", alert: "–û–±–µ—Ä–∏ 6 + –ë–æ–Ω—É—Å!" },
        de: { btn: "BEST√ÑTIGEN", super: "SUPERZAHL", alert: "W√§hle 6 + Super!" },
        it: { btn: "CONFERMA", super: "NUMERO SUPER", alert: "Scegli 6 + Super!" },
        fr: { btn: "CONFIRMER", super: "SUPER NOMBRE", alert: "Choisis 6 + Super!" }
    };

    function init() {
        // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–ª—É—á–∞–π–Ω–æ–π "—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏" –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ Heatmap
        for(let i=1; i<=42; i++) {
            state.matrix[i] = Math.random();
        }
        renderGrid();
        renderSuperGrid();
        setLang('en');
        console.log("VCHF Engine 3.0 Started. Mode: Tron Legacy.");
    }

    function renderGrid() {
        const grid = document.getElementById('main-grid');
        grid.innerHTML = '';
        for (let i = 1; i <= 42; i++) {
            const s = document.createElement('div');
            s.className = 'sphere';
            s.innerText = i;
            
            // –ü—Ä–∏–º–µ–Ω—è–µ–º –≤–∏–∑—É–∞–ª—å–Ω—ã–π Heatmap
            const weight = state.matrix[i];
            if(weight > 0.8) s.classList.add('heat-hot');
            if(weight < 0.2) s.classList.add('heat-cold');

            if (state.selected.includes(i)) s.classList.add('selected');
            
            s.onclick = () => toggleNumber(i);
            grid.appendChild(s);
        }
    }

    function renderSuperGrid() {
        const grid = document.getElementById('super-grid');
        grid.innerHTML = '';
        for (let i = 1; i <= 6; i++) {
            const s = document.createElement('div');
            s.className = 'sphere';
            s.innerText = i;
            if (state.superNum === i) s.classList.add('selected');
            s.onclick = () => {
                state.superNum = i;
                tg.HapticFeedback.impactOccurred('light');
                renderSuperGrid();
            };
            grid.appendChild(s);
        }
    }

    function toggleNumber(n) {
        const idx = state.selected.indexOf(n);
        if (idx > -1) {
            state.selected.splice(idx, 1);
        } else if (state.selected.length < 6) {
            state.selected.push(n);
            tg.HapticFeedback.impactOccurred('medium');
        }
        renderGrid();
    }

    function setLang(l) {
        state.lang = l;
        document.getElementById('main-btn').innerText = dict[l].btn;
        document.getElementById('lang-box').classList.remove('active');
        tg.HapticFeedback.notificationOccurred('success');
    }

    function setTheme(t) {
        document.body.className = 'theme-' + t;
        state.theme = t;
        tg.HapticFeedback.impactOccurred('heavy');
    }

    function switchCurrency(c) {
        state.currency = c;
        document.getElementById('w-vchf').classList.toggle('active', c === 'VCHF');
        document.getElementById('w-chf').classList.toggle('active', c === 'CHF');
        tg.HapticFeedback.impactOccurred('light');
    }

    function runEngine() {
        if (state.selected.length === 6 && state.superNum) {
            tg.showAlert("VCHF ENGINE: Ticket Confirmed!");
            state.selected = [];
            state.superNum = null;
            renderGrid();
            renderSuperGrid();
        } else {
            tg.showAlert(dict[state.lang].alert);
        }
    }

    window.onload = init;
</script>
</body>
</html>
