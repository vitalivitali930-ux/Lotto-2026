<!DOCTYPE html>
<html>
<head>
    <style>
        body { background: #1a0005; color: white; font-family: sans-serif; display: flex; flex-direction: column; align-items: center; }
        .table { width: 350px; height: 500px; border: 2px solid gold; position: relative; margin-top: 20px; border-radius: 20px; }
        .hand { display: flex; gap: 5px; justify-content: center; position: absolute; width: 100%; }
        .player-hand { bottom: 10px; }
        .enemy-hand { top: 10px; }
        .card { width: 45px; height: 65px; border: 1px solid white; border-radius: 5px; display: flex; 
                align-items: center; justify-content: center; font-weight: bold; cursor: pointer; background: #000; }
        .battlefield { position: absolute; top: 150px; left: 50%; transform: translateX(-50%); display: flex; gap: 10px; }
        .trump { position: absolute; right: 10px; top: 50%; transform: translateY(-50%); font-size: 30px; border: 1px solid gold; padding: 5px; }
        .controls { margin-top: 20px; display: flex; gap: 10px; }
        button { padding: 10px 20px; cursor: pointer; }
    </style>
</head>
<body>
    <h2>ТЕСТ ДВИЖКА (v.0.5)</h2>
    <div class="table">
        <div id="enemy-zone" class="hand enemy-hand"></div>
        <div id="field" class="battlefield"></div>
        <div id="trump-suit" class="trump"></div>
        <div id="player-zone" class="hand player-hand"></div>
    </div>
    <div class="controls">
        <button onclick="takeCards()">ВЗЯТЬ</button>
        <button onclick="passCards()">БИТО</button>
        <button onclick="initGame()" style="background: green; color: white;">РЕСТАРТ</button>
    </div>

<script>
    let deck = [], pHand = [], eHand = [], field = [], trump = '';
    const suits = ['♠', '♣', '♥', '♦'], ranks = ['6','7','8','9','10','J','Q','K','A'];

    function initGame() {
        deck = []; field = [];
        suits.forEach(s => ranks.forEach((r, i) => deck.push({s, r, v: i})));
        deck.sort(() => Math.random() - 0.5);
        trump = deck[0].s;
        document.getElementById('trump-suit').innerText = trump;
        pHand = deck.splice(0, 6);
        eHand = deck.splice(0, 6);
        render();
    }

    function render() {
        const pZone = document.getElementById('player-zone');
        const eZone = document.getElementById('enemy-zone');
        const fZone = document.getElementById('field');
        
        pZone.innerHTML = ''; eZone.innerHTML = ''; fZone.innerHTML = '';
        
        pHand.forEach((c, i) => {
            const div = document.createElement('div');
            div.className = 'card';
            div.style.color = (c.s === '♥' || c.s === '♦') ? 'red' : 'white';
            div.innerText = c.r + c.s;
            div.onclick = () => attack(i);
            pZone.appendChild(div);
        });

        eHand.forEach(() => {
            const div = document.createElement('div');
            div.className = 'card';
            div.innerText = '??';
            eZone.appendChild(div);
        });

        field.forEach(c => {
            const div = document.createElement('div');
            div.className = 'card';
            div.innerText = c.r + c.s;
            fZone.appendChild(div);
        });
    }

    function attack(idx) {
        const card = pHand[idx];
        field.push(pHand.splice(idx, 1)[0]);
        render();
        setTimeout(enemyDefend, 600);
    }

    function enemyDefend() {
        // Простая логика: найти карту той же масти выше или козырь
        const attackCard = field[field.length - 1];
        let found = eHand.findIndex(c => (c.s === attackCard.s && c.v > attackCard.v) || (c.s === trump && attackCard.s !== trump));
        
        if (found !== -1) {
            field.push(eHand.splice(found, 1)[0]);
        } else {
            console.log("Враг берет карты");
        }
        render();
    }

    function takeCards() { pHand.push(...field); field = []; render(); }
    function passCards() { field = []; render(); if(pHand.length < 6) pHand.push(...deck.splice(0, 6 - pHand.length)); render(); }

    initGame();
</script>
</body>
</html>
