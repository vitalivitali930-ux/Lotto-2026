<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Lotto - –î–≤–∏–∂–æ–∫ VCHF v1.3</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root { 
            --main-color: #d4af37; 
            --main-gradient: linear-gradient(145deg, #f9e27d, #d4af37);
            --cell-text: #d4af37; 
            --hot-color: #ff4500;
            --cold-color: #00ffff;
            --process-color: #00ffff; 
            --ball-bg: radial-gradient(circle at 35% 35%, #ffffff 0%, #fcfcfc 25%, #e0e0e0 50%, #b3b3b3 100%);
        }

        body { background: #000 url('Hintergrund.png') no-repeat center center; background-size: cover; color: #fff; font-family: -apple-system, sans-serif; text-align: center; margin: 0; overflow: hidden; }

        /* –ò–°–ü–†–ê–í–õ–ï–ù–ù–´–ô –î–ò–ó–ê–ô–ù –®–ê–†–û–í: –ó–û–õ–û–¢–´–ï –¶–ò–§–†–´ */
        .grid { display: grid; grid-template-columns: repeat(7, 1fr); gap: 10px; padding: 0 15px; max-width: 400px; margin: 0 auto; }
        .cell, .super-cell { 
            aspect-ratio: 1/1; background: var(--ball-bg); border-radius: 50%; display: flex; align-items: center; justify-content: center;
            font-weight: 900; font-size: 19px; 
            color: var(--main-color); /* –ó–û–õ–û–¢–´–ï –¶–ò–§–†–´ –ü–û –£–ú–û–õ–ß–ê–ù–ò–Æ */
            position: relative; 
            box-shadow: inset -3px -3px 7px rgba(0,0,0,0.3), 2px 4px 8px rgba(0,0,0,0.5); 
            transition: color 0.3s ease, transform 0.2s; cursor: pointer; border: none;
        }
        .cell::after, .super-cell::after { content: ''; position: absolute; top: 12%; left: 15%; width: 30%; height: 20%; background: rgba(255,255,255,0.8); border-radius: 50%; filter: blur(1px); pointer-events: none; }

        /* –¢–í–û–Ø –ì–ï–ù–ò–ê–õ–¨–ù–ê–Ø –õ–û–ì–ò–ö–ê –¶–í–ï–¢–û–í –¶–ò–§–† */
        .cell.is-hot, .super-cell.is-hot { color: var(--hot-color) !important; text-shadow: 0 0 8px rgba(255, 69, 0, 0.4); }
        .cell.is-cold, .super-cell.is-cold { color: var(--cold-color) !important; text-shadow: 0 0 8px rgba(0, 255, 255, 0.4); }
        
        /* –í—ã–±—Ä–∞–Ω–Ω—ã–π —à–∞—Ä - –∑–∞–ª–∏–≤–∫–∞ –∑–æ–ª–æ—Ç–æ–º, —Ü–∏—Ñ—Ä–∞ —á–µ—Ä–Ω–∞—è –¥–ª—è –∫–æ–Ω—Ç—Ä–∞—Å—Ç–∞ */
        .cell.selected, .super-cell.selected { background: var(--main-gradient) !important; color: #000 !important; transform: scale(1.1); box-shadow: 0 0 15px var(--main-color); }
        .cell.processing { background: var(--process-color) !important; color: #000 !important; }

        /* –ò–ù–¢–ï–†–ê–ö–¢–ò–í–ù–´–ô –°–û–í–ï–¢–ù–ò–ö */
        #smart-hint { 
            background: rgba(10, 10, 10, 0.9); border: 1px solid var(--main-color); border-radius: 15px; 
            padding: 15px; margin: 10px 20px; display: none; font-size: 13px;
            box-shadow: 0 0 20px rgba(212, 175, 55, 0.2); animation: slideUp 0.3s ease-out;
        }
        .hint-btns { display: flex; gap: 8px; margin-top: 10px; justify-content: center; }
        .hint-opt { padding: 6px 12px; border-radius: 8px; border: 1px solid #444; background: #222; color: #fff; font-size: 10px; cursor: pointer; }
        .hint-opt:hover { border-color: var(--main-color); }

        /* –ö–ù–û–ü–ö–ò –ü–ï–†–ò–û–î–û–í (–¢–í–û–ô –ù–û–í–´–ô –î–ò–ó–ê–ô–ù) */
        .stats-period { display: flex; justify-content: center; gap: 8px; margin-top: 5px; opacity: 0; transition: 0.4s; pointer-events: none; transform: translateY(-10px); }
        .stats-period.visible { opacity: 1; pointer-events: all; transform: translateY(0); }
        .p-btn { 
            padding: 8px 15px; border-radius: 12px; border: 1px solid rgba(212, 175, 55, 0.3); 
            background: linear-gradient(145deg, #222, #000); color: #888; font-size: 11px; font-weight: bold; 
            text-transform: uppercase; cursor: pointer; transition: 0.3s;
        }
        .p-btn.active { color: #000; background: var(--main-gradient); border-color: var(--main-color); box-shadow: 0 0 15px rgba(212, 175, 55, 0.4); }

        /* –û–°–¢–ê–õ–¨–ù–´–ï –°–¢–ò–õ–ò (–ë–ï–ó –ò–ó–ú–ï–ù–ï–ù–ò–ô) */
        .ticket-controls { margin-bottom: 20px; display: flex; flex-direction: column; align-items: center; gap: 10px; }
        .smart-tools { display: flex; gap: 8px; margin-bottom: 5px; }
        .tool-btn { padding: 6px 12px; border-radius: 15px; border: 1px solid var(--main-color); background: rgba(0,0,0,0.6); color: #fff; font-size: 11px; cursor: pointer; }
        .counter-box { display: flex; align-items: center; gap: 15px; background: rgba(255,255,255,0.1); padding: 8px 15px; border-radius: 20px; }
        .btn-round { width: 30px; height: 30px; border-radius: 50%; border: 1px solid var(--main-color); background: none; color: #fff; font-size: 18px; cursor: pointer; }
        .btn-main { width: 85%; padding: 20px; border-radius: 15px; font-size: 18px; margin-top: 25px; margin-bottom: 50px; background: var(--main-gradient); color: #000; font-weight: bold; border: none; }
    </style>
</head>
<body>

<div id="app-content" style="display:block; padding-top: 15px;">
    <div class="ticket-controls">
        <div class="smart-tools">
            <button class="tool-btn" onclick="toggleHeatmap('hot')" id="btn-hot">üî• HOT</button>
            <button class="tool-btn" onclick="toggleHeatmap('cold')" id="btn-cold">‚ùÑÔ∏è COLD</button>
            <button class="tool-btn" onclick="randomFill()">üé≤ RANDOM</button>
        </div>
        
        <div class="stats-period" id="stats-p-box">
            <button class="p-btn active" onclick="setPeriod('month')" id="p-month">MONTH</button>
            <button class="p-btn" onclick="setPeriod('year')" id="p-year">YEAR</button>
            <button class="p-btn" onclick="setPeriod('all')" id="p-all">ALL TIME</button>
        </div>

        <div id="smart-hint">
            <div id="hint-msg"></div>
            <div class="hint-btns">
                <button class="hint-opt" onclick="setStrategy('marathon')">üèÉ –ú–ê–†–ê–§–û–ù</button>
                <button class="hint-opt" onclick="setStrategy('pack')">üî´ –û–ë–û–ô–ú–ê</button>
                <button class="hint-opt" onclick="closeHint()">–û–¢–ú–ï–ù–ê</button>
            </div>
        </div>

        <div class="counter-box">
            <button class="btn-round" onclick="updateTicketCount(-1)">‚àí</button>
            <span id="ticket-count" style="font-size: 18px; font-weight: bold;">1</span>
            <button class="btn-round" onclick="updateTicketCount(1)">+</button>
        </div>
        <div style="font-size: 12px; color: #aaa;">TOTAL: <span id="total-price" style="color:#fff">2.50</span> VCHF</div>
    </div>

    <div class="grid" id="main-grid"></div>
    <div id="l-super" style="margin: 20px 0 10px; color: var(--main-color); font-weight: bold;">SUPERZAHL</div>
    <div class="grid" id="s-grid" style="grid-template-columns: repeat(6, 1fr);"></div>
    <button class="btn-main" id="main-btn" onclick="runEngine()">TICKET BEST√ÑTIGEN</button>
</div>

<script>
    // –¢–≤–æ–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏ –º–∞—Å—Å–∏–≤—ã (dbStats, humorDict –∏ —Ç.–¥. –æ—Å—Ç–∞—é—Ç—Å—è)
    let ticketCount = 1; let currentLang = 'ru'; // –∏–ª–∏ de

    function updateTicketCount(val) {
        let newCount = ticketCount + val;
        if(newCount >= 1) {
            ticketCount = newCount;
            document.getElementById('ticket-count').innerText = ticketCount;
            document.getElementById('total-price').innerText = (ticketCount * 2.50).toFixed(2);
            
            const hint = document.getElementById('smart-hint');
            if (ticketCount > 1) {
                document.getElementById('hint-msg').innerText = "–í—ã –≤—ã–±—Ä–∞–ª–∏ " + ticketCount + " –±–∏–ª–µ—Ç–æ–≤. –ö–∞–∫ –∏–≥—Ä–∞–µ–º?";
                hint.style.display = 'block';
            } else { hint.style.display = 'none'; }
        }
    }

    function setStrategy(type) {
        if(type === 'marathon') {
            tg.showAlert("–í—ã–±—Ä–∞–Ω–æ: –û–¥–∏–Ω –Ω–∞–±–æ—Ä —á–∏—Å–µ–ª –Ω–∞ " + ticketCount + " —Ç–∏—Ä–∞–∂–µ–π –ø–æ–¥—Ä—è–¥!");
        } else {
            tg.showAlert("–í—ã–±—Ä–∞–Ω–æ: " + ticketCount + " —Ä–∞–∑–Ω—ã—Ö –∫–æ–º–±–∏–Ω–∞—Ü–∏–π –Ω–∞ –±–ª–∏–∂–∞–π—à–∏–π —Ç–∏—Ä–∞–∂!");
        }
        document.getElementById('smart-hint').style.display = 'none';
    }
    
    function closeHint() { document.getElementById('smart-hint').style.display = 'none'; }

    // –õ–æ–≥–∏–∫–∞ Heatmap —Å –∏–∑–º–µ–Ω–µ–Ω–∏–µ–º —Ü–≤–µ—Ç–∞ —Ü–∏—Ñ—Ä
    function refreshGrid() {
        document.querySelectorAll('.cell, .super-cell').forEach(c => c.classList.remove('is-hot', 'is-cold'));
        if (!currentMode) return;
        const list = dbStats[currentPeriod][currentMode];
        list.forEach(n => {
            const el = document.getElementById(`cell-${n}`);
            if (el) el.classList.add(currentMode === 'hot' ? 'is-hot' : 'is-cold');
        });
    }

    // ... –æ—Å—Ç–∞–ª—å–Ω–æ–π —Ç–≤–æ–π JS (–≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–µ—Ç–∫–∏, randomFill –∏ —Ç.–¥.)
</script>
</body>
</html>
