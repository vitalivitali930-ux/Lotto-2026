<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Lotto - –î–≤–∏–∂–æ–∫ VCHF</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root { --gold: #D4AF37; --red: #FF4500; --carbon: #0a0a0a; }
        
        body {
            background: #000 url('bg.png') no-repeat center center fixed;
            background-size: cover; color: var(--gold);
            font-family: -apple-system, system-ui, sans-serif;
            margin: 0; padding: 0; text-align: center; overflow: hidden;
        }

        /* SPLASH SCREEN */
        #splash-screen {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #000; z-index: 100000; display: flex; flex-direction: column;
            align-items: center; justify-content: center; transition: opacity 0.8s ease;
        }
        .logo { width: 180px; filter: drop-shadow(0 0 15px var(--gold)); }
        .intro-text { margin-top: 20px; font-size: 24px; font-weight: bold; min-height: 30px; }

        /* –û–ö–ù–û "–†–ï–ê–õ–¨–ù–´–ô –®–ê–ù–°" */
        #chance-modal {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.98); z-index: 99999;
            flex-direction: column; justify-content: center; align-items: center; padding: 30px;
        }
        .modal-content { border: 1px solid var(--gold); padding: 40px 20px; border-radius: 25px; background: #111; }
        .chance-desc { font-size: 18px; line-height: 1.5; color: var(--gold); margin-top: 15px; }

        /* –ì–õ–ê–í–ù–´–ô –ò–ù–¢–ï–†–§–ï–ô–° */
        #main-app { display: none; opacity: 0; transition: opacity 1s ease; height: 100vh; overflow-y: auto; }
        .header { display: flex; justify-content: space-between; padding: 10px 20px; font-size: 12px; opacity: 0.7; }
        
        .balance-row { display: flex; justify-content: center; gap: 10px; margin: 15px 0; }
        .stat-card { background: rgba(20,20,20,0.9); border: 1px solid var(--gold); border-radius: 12px; padding: 12px; min-width: 130px; }
        .label { font-size: 9px; color: #777; text-transform: uppercase; }
        .val { font-size: 22px; font-weight: bold; color: #fff; }

        .grid { display: grid; grid-template-columns: repeat(7, 1fr); gap: 6px; padding: 0 20px; max-width: 400px; margin: 0 auto; }
        .cell { background: rgba(35,35,35,0.8); border: 1px solid #333; padding: 14px 0; border-radius: 8px; font-weight: bold; font-size: 16px; transition: 0.2s; }
        .cell.selected { background: linear-gradient(180deg, #F9D976, var(--gold)); color: #000; box-shadow: 0 0 15px var(--gold); }

        .btn-main {
            background: linear-gradient(180deg, #F9D976, var(--gold)); color: #000;
            border: none; width: 85%; padding: 18px; border-radius: 15px;
            font-size: 18px; font-weight: bold; margin: 20px 0; cursor: pointer;
        }

        .qr-section { margin-top: 20px; border-top: 1px solid #222; padding: 20px; opacity: 0.6; }
        .qr-box { width: 80px; height: 80px; border: 1px dashed var(--gold); margin: 10px auto; display: flex; align-items: center; justify-content: center; font-size: 10px; }
    </style>
</head>
<body>

<div id="splash-screen">
    <img src="1771489965074(1).png" class="logo">
    <div id="intro-msg" class="intro-text"></div>
</div>

<div id="chance-modal">
    <div class="modal-content">
        <div style="font-size: 22px; font-weight: bold;">–£ –¢–ï–ë–Ø –ë–´–õ –†–ï–ê–õ–¨–ù–´–ô –®–ê–ù–°</div>
        <div id="chance-text" class="chance-desc"></div>
        <span style="font-size: 60px; margin-top: 20px; display: block;">üò¢</span>
        <button class="btn-main" style="width:100%" onclick="closeModal()">–ü–û–ù–Ø–¢–ù–û...</button>
    </div>
</div>

<div id="main-app">
    <div class="header">
        <span>PROJECT: –õ–û–¢–¢–û</span>
        <span>üá∑üá∫ üá©üá™ üá´üá∑ üáÆüáπ</span>
    </div>

    <div class="balance-row">
        <div class="stat-card">
            <div class="label">VIRTUAL VCHF</div>
            <div id="vchf-val" class="val">0.00</div>
        </div>
        <div class="stat-card">
            <div class="label">LOYALTY BONUS</div>
            <div id="loyalty-val" class="val">+0</div>
        </div>
    </div>

    <div id="timer" style="color:var(--red); font-size:12px; font-weight:bold; margin-bottom:15px;">SYNCHRONIZING WITH SWISSLOS...</div>

    <div class="grid" id="lotto-grid"></div>

    <button class="btn-main" onclick="confirmTicket()">TICKET BEST√ÑTIGEN</button>

    <div class="qr-section">
        <div style="font-size:10px;">–ü–†–ò–ì–õ–ê–°–ò–¢–¨ –î–†–£–ì–ê (+100 VCHF)</div>
        <div class="qr-box">QR CODE</div>
        <div style="font-size:11px; text-decoration: underline;">COPY MY PERSONAL LINK</div>
    </div>
</div>

<script>
    const tg = window.Telegram.WebApp;
    if(tg) { tg.expand(); tg.ready(); }

    // --- –õ–û–ì–ò–ö–ê –ò–ù–¢–†–û ---
    const msgs = ["Gr√ºezi", "Welcome", "–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å"];
    let mIdx = 0;
    const msgEl = document.getElementById('intro-msg');
    
    const introInterval = setInterval(() => {
        msgEl.innerText = msgs[mIdx];
        mIdx++;
        if(mIdx >= msgs.length) clearInterval(introInterval);
    }, 800);

    setTimeout(() => {
        const ss = document.getElementById('splash-screen');
        const app = document.getElementById('main-app');
        ss.style.opacity = '0';
        setTimeout(() => {
            ss.style.display = 'none';
            app.style.display = 'block';
            setTimeout(() => app.style.opacity = '1', 50);
        }, 800);
    }, 3000);

    // --- –î–í–ò–ñ–û–ö VCHF ---
    let balance = parseFloat(localStorage.getItem('vchf_bal')) || 100.00;
    let loyalty = parseInt(localStorage.getItem('loyalty_pts')) || 0;
    
    // –ü—Ä–æ–≤–µ—Ä–∫–∞ 1-–≥–æ —á–∏—Å–ª–∞
    const now = new Date();
    const lastMonth = localStorage.getItem('last_m');
    if (now.getDate() === 1 && lastMonth !== now.getMonth().toString()) {
        balance += 100.00;
        localStorage.setItem('last_m', now.getMonth());
    }

    function updateStats() {
        document.getElementById('vchf-val').innerText = balance.toFixed(2);
        document.getElementById('loyalty-val').innerText = `+${loyalty}`;
        localStorage.setItem('vchf_bal', balance);
        localStorage.setItem('loyalty_pts', loyalty);
    }
    updateStats();

    // –°–µ—Ç–∫–∞
    const grid = document.getElementById('lotto-grid');
    for (let i = 1; i <= 42; i++) {
        const cell = document.createElement('div');
        cell.className = 'cell';
        cell.innerText = i;
        cell.onclick = () => {
            cell.classList.toggle('selected');
            if(tg.HapticFeedback) tg.HapticFeedback.impactOccurred('light');
        };
        grid.appendChild(cell);
    }

    function confirmTicket() {
        const selCount = document.querySelectorAll('.cell.selected').length;
        if(selCount < 6) {
            alert("–í—ã–±–µ—Ä–∏—Ç–µ 6 —á–∏—Å–µ–ª –¥–ª—è —É—á–∞—Å—Ç–∏—è!");
            return;
        }

        // –ù–∞—á–∏—Å–ª–µ–Ω–∏–µ –∑–∞ –ª–æ—è–ª—å–Ω–æ—Å—Ç—å (–∫–∞–∂–¥—ã–π —Ä–æ–∑—ã–≥—Ä—ã—à)
        loyalty += 10;
        updateStats();
        if(tg.HapticFeedback) tg.HapticFeedback.notificationOccurred('success');

        // –†–∞–Ω–¥–æ–º–Ω–∞—è —Å–∏–º—É–ª—è—Ü–∏—è —à–∞–Ω—Å–∞ (–≤ –±—É–¥—É—â–µ–º - —Ä–µ–∞–ª—å–Ω—ã–π API)
        const mockWin = Math.random() * 150000;
        showChance(mockWin);
    }

    function showChance(sum) {
        let text = "";
        if (sum < 1000) text = "–ü–æ–ª–Ω–æ—Å—Ç—å—é –æ–±–Ω–æ–≤–∏—Ç—å –≥–∞—Ä–¥–µ—Ä–æ–± –∏ –∫—É–ø–∏—Ç—å –Ω–æ–≤—É—é –æ–¥–µ–∂–¥—É...";
        else if (sum < 10000) text = "–£–ª–µ—Ç–µ—Ç—å –≤ –ª—É—á—à–∏–π –æ—Ç–ø—É—Å–∫ –≤ —Ç–≤–æ–µ–π –∂–∏–∑–Ω–∏ —É–∂–µ –∑–∞–≤—Ç—Ä–∞...";
        else if (sum < 100000) text = "–í—ã–µ—Ö–∞—Ç—å –∏–∑ –∞–≤—Ç–æ—Å–∞–ª–æ–Ω–∞ –Ω–∞ –Ω–æ–≤–µ–Ω—å–∫–æ–º –∞–≤—Ç–æ–º–æ–±–∏–ª–µ...";
        else text = "–ë–æ–ª—å—à–µ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ —Ä–∞–±–æ—Ç–∞—Ç—å –∏ –∂–∏—Ç—å –≤ —Å–≤–æ–µ —É–¥–æ–≤–æ–ª—å—Å—Ç–≤–∏–µ...";

        document.getElementById('chance-text').innerText = text;
        document.getElementById('chance-modal').style.display = 'flex';
        if(tg.HapticFeedback) tg.HapticFeedback.notificationOccurred('error');
    }

    function closeModal() {
        document.getElementById('chance-modal').style.display = 'none';
        document.querySelectorAll('.cell').forEach(c => c.classList.remove('selected'));
    }

    // –¢–∞–π–º–µ—Ä
    setInterval(() => {
        const d = new Date();
        document.getElementById('timer').innerText = `NEXT DRAW IN: ${23 - d.getHours()}h ${59 - d.getMinutes()}m ${59 - d.getSeconds()}s`;
    }, 1000);
</script>

</body>
</html>
