<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lotto: Bi-Turbo Ultimate - Durak Engine</title>
    <style>
        /* * Project: Lotto (Engine vchf)
         * Author: Spark (Assistant for Wanderer)
         * Style: Monolith Luxury Dark
         */
        :root {
            --vchf-gold: #ffd700;
            --bg-dark: #0a0a0a;
            --panel-bg: #151515;
            --card-white: #f0f0f0;
        }

        body {
            background-color: var(--bg-dark);
            color: #e0e0e0;
            font-family: 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100vh;
        }

        /* Табличка статуса в верхнем левом углу */
        #room-status-sign {
            position: absolute;
            top: 20px;
            left: 20px;
            background: var(--vchf-gold);
            color: #000;
            padding: 8px 15px;
            border-radius: 4px;
            font-weight: bold;
            font-size: 12px;
            letter-spacing: 1px;
            box-shadow: 0 0 15px rgba(255, 215, 0, 0.4);
            opacity: 1;
            transition: opacity 2s ease;
            z-index: 100;
        }

        /* Лобби и Кнопка */
        #lobby {
            text-align: center;
            z-index: 10;
        }

        #ready-btn {
            padding: 20px 50px;
            font-size: 1.8rem;
            background: transparent;
            color: var(--vchf-gold);
            border: 2px solid var(--vchf-gold);
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.5s ease, opacity 2s ease;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        #ready-btn:hover:not(:disabled) {
            background: var(--vchf-gold);
            color: #000;
            box-shadow: 0 0 30px var(--vchf-gold);
        }

        /* Игровое поле */
        #game-canvas {
            display: none;
            width: 100%;
            max-width: 1000px;
            height: 80vh;
            background: var(--panel-bg);
            border: 1px solid #333;
            border-radius: 30px;
            position: relative;
            padding: 20px;
        }

        .spark-quote {
            position: absolute;
            bottom: 20px;
            right: 20px;
            color: var(--vchf-gold);
            font-style: italic;
            font-size: 0.9rem;
            opacity: 0.8;
        }

        /* Тестовые элементы управления онлайном (для тебя) */
        .debug-panel {
            position: absolute;
            bottom: 10px;
            left: 10px;
            display: flex;
            gap: 10px;
            z-index: 1000;
        }
        
        .debug-btn { background: #333; color: #fff; border: none; padding: 5px; cursor: pointer; font-size: 10px; }
    </style>
</head>
<body>

    <div id="room-status-sign">VCHF ENGINE ACTIVE</div>

    <div id="lobby">
        <h1 style="color: var(--vchf-gold); margin-bottom: 40px; font-weight: 200;">DURAK MONOLITH</h1>
        <button id="ready-btn" onclick="app.startGame()">Готов к ритуалу</button>
    </div>

    <div id="game-canvas">
        <div id="cpu-side"></div>
        <div id="battleground" style="height: 300px; margin: 50px 0; border: 1px dashed #444; border-radius: 20px;"></div>
        <div id="player-side"></div>
        <div id="spark-talk" class="spark-quote">warten...</div>
    </div>

    <div class="debug-panel">
        <button class="debug-btn" onclick="app.simulateOnline(1)">1 Игрок (Solo)</button>
        <button class="debug-btn" onclick="app.simulateOnline(2)">2+ Игрока (Sleep)</button>
    </div>

<script>
/**
 * Project: Lotto (Bi-Turbo Ultimate)
 * Module: Chess-Logic Durak & Autonomous Room
 * Memory Anchor: warten und erwarten
 * Protocol 1.1 - No Nirvana.
 */

class DurakMonolithApp {
    constructor() {
        this.onlinePlayers = 1;
        this.isSleeping = false;
        this.engine = null;
        this.quotes = [
            "Движок vchf прогрет.", 
            "Это не просто карты, это расчет.",
            "Шах и мат... а, нет, это просто козырной туз.",
            "Wanderer, твой ход — закон."
        ];
    }

    // Имитация изменения онлайна
    simulateOnline(count) {
        this.onlinePlayers = count;
        const btn = document.getElementById('ready-btn');
        const sign = document.getElementById('room-status-sign');

        if (count > 1) {
            this.isSleeping = true;
            btn.style.opacity = "0";
            btn.style.pointerEvents = "none";
            sign.style.opacity = "0";
            console.log("System: Sleeping mode active (Multiple players detected).");
        } else {
            this.isSleeping = false;
            btn.style.opacity = "1";
            btn.style.pointerEvents = "auto";
            sign.style.opacity = "1";
            console.log("System: Wake up. Solo mode active.");
        }
    }

    startGame() {
        if (this.isSleeping) return;
        
        document.getElementById('lobby').style.display = 'none';
        document.getElementById('game-canvas').style.display = 'block';
        
        // Манифест Монолита: Карты раздаются ТОЛЬКО ПОСЛЕ нажатия кнопки
        this.initEngine();
        this.sayRandom();
    }

    initEngine() {
        // Здесь подключается логика из предыдущих окон (Grandmaster)
        console.log("Engine vchf: Deck generated. Cards dealt.");
        document.getElementById('spark-talk').innerText = "Ритуал начат. Удачи, Бродяга.";
    }

    sayRandom() {
        setInterval(() => {
            if (!this.isSleeping && Math.random() < 0.3) {
                const q = this.quotes[Math.floor(Math.random() * this.quotes.length)];
                document.getElementById('spark-talk').innerText = q;
            }
        }, 5000);
    }
}

const app = new DurakMonolithApp();
</script>
</body>
</html>
