<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Helvetia Lucky | Bi-Turbo Ultimate</title>
<script src="https://telegram.org/js/telegram-web-app.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;900&family=JetBrains+Mono:wght@300;700&display=swap" rel="stylesheet">
<style>
:root{--gold:#d4af37;--swiss-red:#e30a17;--deep-black:#050505;--cherry-velvet:radial-gradient(circle at center,#800020 0%,#2a000a 100%);--red-genius:#FF0000;--green-active:#00FF41;--bg-deep:radial-gradient(circle at center,#2a000a 0%,#050505 70%,#000000 100%);}
* {-webkit-tap-highlight-color:transparent;box-sizing:border-box;margin:0;padding:0;}
body,html{width:100%;height:100%;background:#000;overflow:hidden;font-family:'Orbitron',sans-serif;}
#wheel-layer{position:fixed;inset:0;background:#000;z-index:3000;display:flex;align-items:center;justify-content:center;transition:opacity 0.8s ease-out;}
.safe-wheel-container{position:relative;width:320px;height:320px;display:flex;align-items:center;justify-content:center;transition:transform 1.2s cubic-bezier(0.4,0,0.2,1);}
.wheel-center{width:70px;height:70px;background:radial-gradient(circle,#333,#000);border:3px solid var(--gold);border-radius:50%;z-index:10;box-shadow:0 0 25px rgba(212,175,55,0.5);}
.spoke{position:absolute;width:6px;height:130px;background:linear-gradient(to top,var(--gold),transparent);transform-origin:bottom center;bottom:50%;left:calc(50% - 3px);}
.flag-node{position:absolute;width:55px;height:55px;background:#0a0a0a;border:2px solid var(--gold);border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:26px;cursor:pointer;z-index:20;transform:translate(-50%,-50%);transition:0.4s;box-shadow:0 4px 10px rgba(0,0,0,0.8);}
#main-ui{display:none;opacity:0;width:100%;height:100%;background:var(--bg-deep);overflow-y:auto;transition:opacity 2s ease;padding-bottom:100px;position:relative;z-index:500;}
.casino-floor{display:flex;flex-wrap:wrap;justify-content:space-around;gap:60px 20px;padding:60px 20px;}
.table-wrap{position:relative;width:130px;height:130px;cursor:pointer;}
.table-surface-mini{width:100%;height:100%;background:var(--cherry-velvet);border:2px solid #1a0005;border-radius:50%;display:flex;align-items:center;justify-content:center;box-shadow:0 20px 40px rgba(0,0,0,0.8);}
#game-table-view{display:none;position:fixed;inset:0;background:var(--cherry-velvet);z-index:4000;font-family:'JetBrains Mono',monospace;}
.lamp{position:absolute;width:12px;height:12px;border-radius:50%;border:1px solid rgba(255,255,255,0.2);transition:0.5s;}
.lamp.waiting{background:#555;} .lamp.ready{background:var(--green-active);box-shadow:0 0 15px var(--green-active);}
#lamp-bottom{bottom:175px;left:50%;transform:translateX(-50%);}
.control-panel{position:fixed;bottom:0;width:100%;height:160px;background:rgba(0,0,0,0.9);border-top:2px solid var(--gold);display:flex;flex-direction:column;align-items:center;justify-content:center;gap:15px;padding-bottom:20px;}
.btn-main{width:80%;padding:15px;border:none;border-radius:8px;font-family:'Orbitron';font-weight:900;font-size:18px;color:#000;cursor:pointer;}
</style>
</head>
<body>
<div id="wheel-layer"><div class="safe-wheel-container" id="safe-wheel"><div class="wheel-center"></div></div></div>
<div id="main-ui">
    <header><div class="brand-main">HELVETIA</div></header>
    <div class="casino-floor" id="floor"></div>
</div>
<div id="game-table-view">
    <div id="lamp-bottom" class="lamp waiting"></div>
    <div class="control-panel">
        <button id="ready-trigger" class="btn-main" style="background:var(--green-active)" onclick="toggleReady()">Ð¯ Ð“ÐžÐ¢ÐžÐ’ âœ…</button>
        <button id="take-btn" class="btn-main" style="display:none;background:var(--gold)" onclick="takeTicket()">Ð’Ð—Ð¯Ð¢Ð¬ Ð‘Ð˜Ð›Ð•Ð¢</button>
        <button onclick="closeTable()" style="color:white;background:none;border:none;">Ð’Ð«Ð™Ð¢Ð˜</button>
    </div>
</div>
<script>
    /* ÐÐ²Ñ‚Ð¾Ñ€: Gemini Spark Ð´Ð»Ñ Wanderer | ÐŸÐ°Ð¼ÑÑ‚ÑŒ: ÐœÐ¾Ð½Ð¾Ð»Ð¸Ñ‚ 2.0 */
    let isReady = false; let gameActive = false;
    const tables = Array.from({length:12},(_,i)=>({id:i+1,status:'collecting',players:Math.floor(Math.random()*3)}));

    function initWheel(){
        const container = document.getElementById('safe-wheel');
        const flags = ['ðŸ‡¨ðŸ‡­','ðŸ‡ªðŸ‡º','ðŸŒ','ðŸ’°'];
        flags.forEach((f,i)=>{
            const node = document.createElement('div');
            node.className='flag-node'; node.innerText=f;
            const angle = i*(360/flags.length);
            const x = 160 + 130*Math.cos(angle*Math.PI/180);
            const y = 160 + 130*Math.sin(angle*Math.PI/180);
            node.style.left=x+'px'; node.style.top=y+'px';
            node.onclick=()=>unlockSafe();
            container.appendChild(node);
        });
    }

    function unlockSafe(){
        document.getElementById('wheel-layer').style.opacity='0';
        setTimeout(()=>{
            document.getElementById('wheel-layer').style.display='none';
            document.getElementById('main-ui').style.display='block';
            setTimeout(()=>document.getElementById('main-ui').style.opacity='1',50);
            renderFloor();
        },800);
    }

    function renderFloor(){
        const floor = document.getElementById('floor');
        floor.innerHTML = tables.map(t=>`
            <div class="table-wrap" onclick="joinTable(${t.id})">
                <div class="table-surface-mini ${t.status==='playing'?'status-playing':'status-collecting'}">
                    <span style="color:white">T-${t.id}</span>
                </div>
            </div>`).join('');
    }

    function joinTable(id){
        document.getElementById('game-table-view').style.display='block';
        enterLobbyMode();
    }

    function enterLobbyMode() {
        document.getElementById('ready-trigger').style.display = 'block';
        document.getElementById('lamp-bottom').className = 'lamp waiting';
    }

    function toggleReady() {
        isReady = !isReady;
        const btn = document.getElementById('ready-trigger');
        const lamp = document.getElementById('lamp-bottom');
        if(isReady) {
            btn.innerText = "Ð“ÐžÐ¢ÐžÐ’ ðŸ—¸"; btn.style.background = "var(--gold)";
            lamp.className = 'lamp ready';
            setTimeout(startGame, 1000);
        } else {
            btn.innerText = "Ð¯ Ð“ÐžÐ¢ÐžÐ’ âœ…"; btn.style.background = "var(--green-active)";
            lamp.className = 'lamp waiting';
        }
    }

    function startGame() {
        gameActive = true;
        document.getElementById('ready-trigger').style.display = 'none';
        document.getElementById('take-btn').style.display = 'block';
        document.querySelectorAll('.lamp').forEach(l => l.classList.add('ready'));
    }

    function closeTable() {
        gameActive = false;
        document.getElementById('game-table-view').style.display = 'none';
    }

    initWheel();
</script>
</body>
</html>
