<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Lotto - –î–≤–∏–∂–æ–∫ VCHF</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root { 
            --main-color: #d4af37; 
            --main-gradient: linear-gradient(145deg, #f9e27d, #d4af37);
            --cell-text: #d4af37; 
            --hot-color: #ff4500;
            --cold-color: #1e90ff;
        }

        body { 
            background: #000 url('Hintergrund.png') no-repeat center center; 
            background-size: cover; color: #fff; 
            font-family: -apple-system, sans-serif; 
            text-align: center; margin: 0; overflow-x: hidden; 
        }

        /* –ò–Ω—Ç—Ä–æ-–∑–∞—Å—Ç–∞–≤–∫–∞ */
        #intro-container { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #000; z-index: 20000; display: flex; justify-content: center; align-items: center; }
        .intro-img { position: absolute; width: 85%; opacity: 0; pointer-events: none; }
        .intro-img.active { animation: shakePop 0.7s ease-out forwards; }
        @keyframes shakePop { 0% { transform: scale(0.1); opacity: 0; } 50% { transform: scale(1.05); opacity: 1; } 100% { transform: scale(1); opacity: 1; } }

        #app-content { display: none; opacity: 0; transition: 1s ease; padding-top: 15px; height: 100vh; overflow-y: auto; }
        
        /* –í—ã–±–æ—Ä —è–∑—ã–∫–∞ */
        .lang-panel { display: flex; justify-content: center; gap: 12px; margin-bottom: 15px; }
        .lang-btn { font-size: 24px; cursor: pointer; opacity: 0.5; transition: 0.3s; }

        /* –®–∞–ø–∫–∞ –ü–µ–Ω—Ç—Ö–∞—É—Å–∞ */
        .penthouse-header { border: 1px solid var(--main-color); border-radius: 12px; padding: 12px; margin: 0 15px 15px; background: rgba(0,0,0,0.8); box-shadow: 0 0 15px rgba(212, 175, 55, 0.2); }
        .rooms-tabs { display: flex; justify-content: space-around; margin: 0 15px 10px; padding: 8px; border-bottom: 1px solid var(--main-color); font-size: 9px; font-weight: bold; }

        /* –°–µ—Ç–∫–∞ —á–∏—Å–µ–ª */
        .grid { display: grid; grid-template-columns: repeat(7, 1fr); gap: 10px; padding: 0 15px; max-width: 400px; margin: 0 auto; }
        .cell { background: transparent; border: none; padding: 12px 0; font-weight: bold; color: var(--cell-text); font-size: 20px; transition: 0.2s; cursor: pointer; border-radius: 50%; position: relative; }
        .cell.selected { background: var(--main-gradient) !important; color: #000 !important; box-shadow: 0 0 15px var(--main-color); }
        
        /* –ü–æ–¥—Å–≤–µ—Ç–∫–∞ VCHF */
        .cell.highlight-hot { color: var(--hot-color) !important; text-shadow: 0 0 12px var(--hot-color); transform: scale(1.1); }
        .cell.highlight-cold { color: var(--cold-color) !important; text-shadow: 0 0 12px var(--cold-color); transform: scale(0.9); opacity: 0.8; }
        .cell.shuffle { background: rgba(212, 175, 55, 0.3); transform: scale(1.1); }

        /* –ù–∏–∂–Ω—è—è –ø–∞–Ω–µ–ª—å */
        .smart-control-panel { background: rgba(0,0,0,0.85); margin: 20px 15px; padding: 15px; border-radius: 15px; border: 1px solid rgba(212, 175, 55, 0.3); }
        .stat-btn { padding: 8px 12px; border-radius: 8px; border: 1px solid var(--main-color); background: transparent; color: #fff; font-size: 10px; cursor: pointer; }
        .stat-btn.active-period { background: var(--main-color); color: #000; }
        .smart-btn { padding: 10px; border-radius: 8px; border: 1px solid var(--main-color); background: #000; color: var(--main-color); font-size: 11px; flex: 1; font-weight: bold; cursor: pointer; }

        /* –ë–æ–Ω—É—Å–Ω—ã–µ —á–∏—Å–ª–∞ */
        .super-cell { width: 40px; height: 40px; border: 2px solid var(--main-color); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: var(--main-color); font-weight: bold; cursor: pointer; }
        .super-cell.selected { background: var(--main-gradient); color: #000; }
        .super-cell.highlight-hot { border-color: var(--hot-color); color: var(--hot-color); }
        .super-cell.highlight-cold { border-color: var(--cold-color); color: var(--cold-color); }

        .btn-main { width: 85%; padding: 20px; border-radius: 15px; background: var(--main-gradient); color: #000; font-weight: bold; font-size: 18px; margin: 20px 0 40px; border: none; cursor: pointer; }

        /* –¢–µ–º—ã */
        .theme-toggle { position: fixed; top: 15px; right: 15px; font-size: 26px; z-index: 1001; cursor: pointer; }
        .theme-panel { position: fixed; top: 60px; right: 15px; display: flex; flex-direction: column; gap: 10px; z-index: 1000; background: rgba(0,0,0,0.9); padding: 10px; border-radius: 20px; border: 1px solid var(--main-color); transition: 0.3s; transform: translateX(100px); }
        .theme-panel.open { transform: translateX(0); }
        .dot { width: 25px; height: 25px; border-radius: 50%; border: 2px solid #fff; cursor: pointer; }
    </style>
</head>
<body>

<div id="intro-container">
    <img src="Bild1.png" id="intro1" class="intro-img">
    <img src="Bild2.png" id="intro2" class="intro-img">
    <img src="Bild3.png" id="intro3" class="intro-img">
</div>

<div id="app-content">
    <div class="lang-panel">
        <span class="lang-btn" id="l-ru" onclick="setLang('ru')">üá∑üá∫</span>
        <span class="lang-btn" id="l-ua" onclick="setLang('ua')">üá∫üá¶</span>
        <span class="lang-btn" id="l-de" onclick="setLang('de')">üá©üá™</span>
        <span class="lang-btn" id="l-fr" onclick="setLang('fr')">üá´üá∑</span>
        <span class="lang-btn" id="l-it" onclick="setLang('it')">üáÆüáπ</span>
    </div>

    <div class="penthouse-header">
        <div id="p-name" style="color:var(--main-color); font-weight:900; font-size: 18px;">–ü–ï–ù–¢–•–ê–£–° –£–î–ê–ß–ò</div>
        <div id="p-sub" style="font-size:10px; margin-top: 4px;">–ì–¥–µ –∂–∏–≤—É—Ç —Ç–≤–æ–∏ –º–∏–ª–ª–∏–æ–Ω—ã</div>
    </div>

    <div class="rooms-tabs">
        <span id="t1" style="color:var(--main-color)">–°–ï–ô–§</span>
        <span id="t2">–í–ò–ù–ù–´–ô –ü–û–ì–†–ï–ë</span>
        <span id="t3">–°–ò–ì–ê–†–ù–ê–Ø</span>
    </div>

    <div class="grid" id="main-grid"></div>

    <div class="smart-control-panel">
        <div style="display: flex; justify-content: center; gap: 8px; margin-bottom: 15px;">
            <button id="btn-m" class="stat-btn active-period" onclick="setPeriod('m')">–ú–ï–°–Ø–¶</button>
            <button id="btn-y" class="stat-btn" onclick="setPeriod('y')">–ì–û–î</button>
            <button id="btn-a" class="stat-btn" onclick="setPeriod('a')">–í–°–Å –í–†–ï–ú–Ø</button>
        </div>
        
        <div class="smart-pick-panel" style="display:flex; gap:8px;">
            <button class="smart-btn" ontouchstart="highlight('hot')" ontouchend="clearHighlight()" onmousedown="highlight('hot')" onmouseup="clearHighlight()">üî• HOT</button>
            <button class="smart-btn" ontouchstart="highlight('cold')" ontouchend="clearHighlight()" onmousedown="highlight('cold')" onmouseup="clearHighlight()">‚ùÑÔ∏è COLD</button>
            <button class="smart-btn" onclick="smartPickRandomWithAnim()">üé≤ RANDOM</button>
        </div>
        <div id="stat-info" style="font-size: 10px; color: #aaa; margin-top: 10px; font-style: italic;">...</div>
    </div>

    <div id="l-super" style="color:var(--main-color); font-weight:bold; margin-bottom:10px; font-size: 14px;">–ë–û–ù–£–°–ù–û–ï –ß–ò–°–õ–û</div>
    <div style="display:flex; justify-content:center; gap:10px;" id="s-grid"></div>

    <button class="btn-main" id="main-btn" onclick="runEngine()">–ü–û–î–¢–í–ï–†–î–ò–¢–¨</button>
</div>

<div class="theme-toggle" onclick="document.querySelector('.theme-panel').classList.toggle('open')">üé®</div>
<div class="theme-panel">
    <div class="dot" style="background: #d4af37;" onclick="setTheme('gold')"></div>
    <div class="dot" style="background: #32CD32;" onclick="setTheme('lime')"></div>
    <div class="dot" style="background: #c0c0c0;" onclick="setTheme('silver')"></div>
    <div class="dot" style="background: #00ffff;" onclick="setTheme('cyan')"></div>
    <div class="dot" style="background: #C511A4;" onclick="setTheme('cherry')"></div>
</div>

<script>
    const tg = window.Telegram.WebApp;
    let selected = [];
    let superNum = null;
    let currentLang = 'de';
    let currentPeriod = 'm';

    const dict = {
        ru: { btn: "–ü–û–î–¢–í–ï–†–î–ò–¢–¨", super: "–ë–û–ù–£–°–ù–û–ï –ß–ò–°–õ–û", pN: "–ü–ï–ù–¢–•–ê–£–° –£–î–ê–ß–ò", pS: "–ì–¥–µ –∂–∏–≤—É—Ç —Ç–≤–æ–∏ –º–∏–ª–ª–∏–æ–Ω—ã", t1: "–°–ï–ô–§", t2: "–í–ò–ù–ù–´–ô –ü–û–ì–†–ï–ë", t3: "–°–ò–ì–ê–†–ù–ê–Ø", m: "–ú–ï–°–Ø–¶", y: "–ì–û–î", a: "–í–°–Å –í–†–ï–ú–Ø", analysis: "–ê–ù–ê–õ–ò–ó VCHF", hotMsg: "üî• –ì–û–†–Ø–ß–ï–ï", coldMsg: "‚ùÑÔ∏è –•–û–õ–û–î–ù–û–ï" },
        ua: { btn: "–ü–Ü–î–¢–í–ï–†–î–ò–¢–Ü", super: "–ë–û–ù–£–°–ù–ï –ß–ò–°–õ–û", pN: "–ü–ï–ù–¢–•–ê–£–° –£–î–ê–ß–Ü", pS: "–î–µ –∂–∏–≤—É—Ç—å —Ç–≤–æ—ó –º—ñ–ª—å–π–æ–Ω–∏", t1: "–°–ï–ô–§", t2: "–í–ò–ù–ù–ò–ô –õ–¨–û–•", t3: "–°–ò–ì–ê–†–ù–ê", m: "–ú–Ü–°–Ø–¶–¨", y: "–†–Ü–ö", a: "–í–ï–°–¨ –ß–ê–°", analysis: "–ê–ù–ê–õ–Ü–ó VCHF", hotMsg: "üî• –ì–ê–†–Ø–ß–ï", coldMsg: "‚ùÑÔ∏è –•–û–õ–û–î–ù–ï" },
        de: { btn: "BEST√ÑTIGEN", super: "SUPERZAHL", pN: "GL√úCKS-PENTHOUSE", pS: "Wo Millionen leben", t1: "AKTIEN-TRESOR", t2: "WEINKELLER", t3: "ZIGARRENZIMMER", m: "MONAT", y: "JAHR", a: "ALLZEIT", analysis: "VCHF ANALYSE", hotMsg: "üî• HEISS", coldMsg: "‚ùÑÔ∏è KALT" },
        fr: { btn: "CONFIRMER", super: "NOMBRE BONUS", pN: "PENTHOUSE CHANCE", pS: "Vos millions ici", t1: "COFFRE", t2: "CAVE", t3: "FUMOIR", m: "MOIS", y: "AN", a: "HISTOIRE", analysis: "ANALYSE VCHF", hotMsg: "üî• CHAUD", coldMsg: "‚ùÑÔ∏è FROID" },
        it: { btn: "CONFERMA", super: "NUMERO BONUS", pN: "ATTICO FORTUNA", pS: "I tuoi millions qui", t1: "CASSAFORTE", t2: "CANTINA", t3: "SALA SIGARI", m: "MESE", y: "ANNO", a: "STORIA", analysis: "ANALISI VCHF", hotMsg: "üî• CALDO", coldMsg: "‚ùÑÔ∏è FREDDO" }
    };

    const stats = {
        m: { hot: [5, 12, 19, 33, 41], cold: [1, 7, 15, 28, 30], sHot: 2, sCold: 5 },
        y: { hot: [10, 18, 24, 32, 40], cold: [3, 9, 21, 35, 39], sHot: 1, sCold: 6 },
        a: { hot: [7, 17, 26, 38, 42], cold: [2, 11, 20, 31, 36], sHot: 4, sCold: 3 }
    };

    // –°–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Ç–∫–∏ –∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Long Press
    const grid = document.getElementById('main-grid');
    for (let i = 1; i <= 42; i++) {
        const c = document.createElement('div');
        c.className = 'cell'; c.id = `cell-${i}`; c.innerText = i;
        c.onclick = () => toggleSelect(i, c);
        
        let timer;
        c.addEventListener('touchstart', () => {
            timer = setTimeout(() => {
                const isHot = stats[currentPeriod].hot.includes(i);
                const isCold = stats[currentPeriod].cold.includes(i);
                const status = isHot ? dict[currentLang].hotMsg : (isCold ? dict[currentLang].coldMsg : "Neutral");
                tg.showAlert(`${dict[currentLang].analysis}\nNumber: ${i}\nStatus: ${status}`);
                tg.HapticFeedback.notificationOccurred('warning');
            }, 800);
        });
        c.addEventListener('touchend', () => clearTimeout(timer));
        grid.appendChild(c);
    }

    // –ë–æ–Ω—É—Å–Ω—ã–µ —á–∏—Å–ª–∞
    const sGrid = document.getElementById('s-grid');
    for(let i=1; i<=6; i++) {
        const sc = document.createElement('div');
        sc.className = 'super-cell'; sc.id = `super-${i}`; sc.innerText = i;
        sc.onclick = () => {
            document.querySelectorAll('.super-cell').forEach(el => el.classList.remove('selected'));
            superNum = i; sc.classList.add('selected');
            tg.HapticFeedback.impactOccurred('medium');
        };
        sGrid.appendChild(sc);
    }

    function toggleSelect(i, el) {
        if(selected.includes(i)) {
            selected = selected.filter(n => n !== i);
            el.classList.remove('selected');
        } else if(selected.length < 6) {
            selected.push(i);
            el.classList.add('selected');
            tg.HapticFeedback.impactOccurred('light');
        }
    }

    function highlight(type) {
        const data = stats[currentPeriod];
        const targets = type === 'hot' ? data.hot : data.cold;
        const cls = type === 'hot' ? 'highlight-hot' : 'highlight-cold';
        targets.forEach(n => document.getElementById(`cell-${n}`).classList.add(cls));
        document.getElementById(`super-${type==='hot'?data.sHot:data.sCold}`).classList.add(cls);
        tg.HapticFeedback.impactOccurred('light');
    }

    function clearHighlight() {
        document.querySelectorAll('.cell, .super-cell').forEach(el => el.classList.remove('highlight-hot', 'highlight-cold'));
    }

    function smartPickRandomWithAnim() {
        selected = [];
        document.querySelectorAll('.cell').forEach(c => c.classList.remove('selected', 'shuffle'));
        let count = 0;
        const itv = setInterval(() => {
            document.querySelectorAll('.cell').forEach(c => c.classList.remove('shuffle'));
            for(let i=0; i<6; i++) document.getElementById(`cell-${Math.floor(Math.random()*42)+1}`).classList.add('shuffle');
            tg.HapticFeedback.impactOccurred('light');
            if(++count > 12) {
                clearInterval(itv);
                document.querySelectorAll('.cell').forEach(c => c.classList.remove('shuffle'));
                while(selected.length < 6) {
                    let r = Math.floor(Math.random()*42)+1;
                    if(!selected.includes(r)) { selected.push(r); document.getElementById(`cell-${r}`).classList.add('selected'); }
                }
                tg.HapticFeedback.notificationOccurred('success');
            }
        }, 80);
    }

    function setLang(l) {
        currentLang = dict[l] ? l : 'de';
        const d = dict[currentLang];
        document.getElementById('main-btn').innerText = d.btn;
        document.getElementById('p-name').innerText = d.pN;
        document.getElementById('p-sub').innerText = d.pS;
        document.getElementById('t1').innerText = d.t1;
        document.getElementById('t2').innerText = d.t2;
        document.getElementById('t3').innerText = d.t3;
        document.getElementById('btn-m').innerText = d.m;
        document.getElementById('btn-y').innerText = d.y;
        document.getElementById('btn-a').innerText = d.a;
        document.getElementById('l-super').innerText = d.super;
        document.querySelectorAll('.lang-btn').forEach(b => b.style.opacity = '0.5');
        document.getElementById('l-' + currentLang).style.opacity = '1';
    }

    function setTheme(t) {
        const themes = {
            gold: ['#d4af37', 'linear-gradient(145deg, #f9e27d, #d4af37)'],
            lime: ['#32CD32', 'linear-gradient(145deg, #7FFF00, #32CD32)'],
            silver: ['#c0c0c0', 'linear-gradient(145deg, #ffffff, #c0c0c0)'],
            cyan: ['#00ffff', 'linear-gradient(145deg, #e0ffff, #00ffff)'],
            cherry: ['#C511A4', 'linear-gradient(145deg, #FF1493, #C511A4)']
        };
        document.documentElement.style.setProperty('--main-color', themes[t][0]);
        document.documentElement.style.setProperty('--main-gradient', themes[t][1]);
        document.documentElement.style.setProperty('--cell-text', themes[t][0]);
        document.querySelector('.theme-panel').classList.remove('open');
        tg.HapticFeedback.impactOccurred('medium');
    }

    function setPeriod(p) {
        currentPeriod = p;
        document.querySelectorAll('.stat-btn').forEach(b => b.classList.remove('active-period'));
        document.getElementById('btn-' + p).classList.add('active-period');
        tg.HapticFeedback.impactOccurred('medium');
    }

    window.onload = () => {
        // –ê–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —è–∑—ã–∫–∞
        const userLang = (tg.initDataUnsafe?.user?.language_code || 'de').substring(0, 2).toLowerCase();
        setLang(userLang);

        // –ò–Ω—Ç—Ä–æ-–∑–∞–ø—É—Å–∫
        const steps = ['intro1', 'intro2', 'intro3'];
        steps.forEach((id, i) => {
            setTimeout(() => document.getElementById(id).classList.add('active'), i * 2200);
            setTimeout(() => document.getElementById(id).style.opacity = '0', (i + 1) * 2100);
        });
        setTimeout(() => {
            document.getElementById('intro-container').style.display = 'none';
            document.getElementById('app-content').style.display = 'block';
            setTimeout(() => document.getElementById('app-content').style.opacity = '1', 50);
        }, 6800);
    };

    function runEngine() {
        if(selected.length < 6 || !superNum) tg.showAlert("Error: Ticket incomplete!");
        else tg.showAlert(`VCHF OK!\nNumbers: ${selected.sort((a,b)=>a-b).join(', ')}\nSuper: ${superNum}`);
    }
</script>
</body>
</html>
