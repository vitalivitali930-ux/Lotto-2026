<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Helvetia Lucky | Swiss VCHF Monolith</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --gold: #d4af37;
            --swiss-red: #e30a17;
            --deep-black: #050505;
            --velvet-green: #072a1a;
        }
        * { -webkit-tap-highlight-color: transparent; box-sizing: border-box; }
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; background: #000; overflow: hidden; font-family: 'Orbitron', sans-serif; }

        /* –≠–¢–ê–ü 1: –®–¢–£–†–í–ê–õ –°–ï–ô–§–ê (–ü–ï–†–í–´–ô –≠–ö–†–ê–ù) */
        #wheel-layer {
            position: fixed; inset: 0; background: #000; z-index: 3000;
            display: flex; align-items: center; justify-content: center;
            transition: opacity 0.8s ease-out;
        }
        .safe-wheel-container {
            position: relative; width: 320px; height: 320px;
            display: flex; align-items: center; justify-content: center;
            transition: transform 1.2s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .wheel-center {
            width: 70px; height: 70px; background: radial-gradient(circle, #333, #000);
            border: 3px solid var(--gold); border-radius: 50%; z-index: 10;
            box-shadow: 0 0 25px rgba(212, 175, 55, 0.5);
        }
        .spoke {
            position: absolute; width: 6px; height: 130px;
            background: linear-gradient(to top, var(--gold), transparent);
            transform-origin: bottom center; bottom: 50%; left: calc(50% - 3px);
        }
        .flag-node {
            position: absolute; width: 55px; height: 55px;
            background: #0a0a0a; border: 2px solid var(--gold);
            border-radius: 50%; display: flex; align-items: center; justify-content: center;
            font-size: 26px; cursor: pointer; z-index: 20;
            transform: translate(-50%, -50%); transition: 0.4s;
            box-shadow: 0 4px 10px rgba(0,0,0,0.8);
        }
        .flag-node:active { transform: translate(-50%, -50%) scale(0.9); }
        .wheel-vanishing .flag-node { opacity: 0; transform: translate(-50%, -50%) scale(0.5); transition: 0.6s; }

        /* –≠–¢–ê–ü 2: –¢–í–û–ï –≠–õ–ò–¢–ê–†–ù–û–ï –ò–ù–¢–†–û (–î–í–ï–†–ò) */
        #brand-layer {
            position: fixed; inset: 0; background: var(--deep-black); z-index: 1000;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
        }
        .door-left, .door-right {
            position: absolute; top: 0; width: 50%; height: 100%; background: #0a0a0a;
            border: 1px solid rgba(212, 175, 55, 0.1); transition: 1.5s cubic-bezier(0.7, 0, 0.3, 1);
        }
        .door-left { left: 0; border-right: 1px solid var(--gold); }
        .door-right { right: 0; border-left: 1px solid var(--gold); }
        .opened .door-left { transform: translateX(-100%); }
        .opened .door-right { transform: translateX(100%); }

        .swiss-shield {
            width: 50px; height: 50px; background: var(--swiss-red);
            margin: 0 auto 20px; position: relative; border-radius: 5px;
            box-shadow: 0 0 30px rgba(227, 10, 23, 0.5);
        }
        .swiss-shield::after { content: ''; position: absolute; background: white; width: 10px; height: 30px; left: 20px; top: 10px; }
        .swiss-shield::before { content: ''; position: absolute; background: white; width: 30px; height: 10px; left: 10px; top: 20px; }
        h1.brand-name { color: var(--gold); font-size: 24px; letter-spacing: 8px; margin: 0; text-align: center; }

        /* –≠–¢–ê–ü 3: –ë–ê–†–•–ê–¢–ù–´–ô –ó–ê–õ */
        #game-room {
            position: fixed; inset: 0; display: none; opacity: 0;
            background: radial-gradient(circle at 50% 20%, rgba(212,175,55,0.08) 0%, #000 85%);
            transition: 2s ease-in-out; z-index: 500;
        }
        #velvet-table {
            position: absolute; bottom: -25%; left: 50%; transform: translateX(-50%);
            width: 150%; height: 80%; background: var(--velvet-green);
            border-radius: 50% / 35%; border: 15px solid #111;
            box-shadow: inset 0 0 200px #000, 0 50px 150px #000;
            background-image: url("https://www.transparenttextures.com/patterns/dark-leather.png");
        }
        .table-light {
            position: absolute; top: -50px; left: 50%; transform: translateX(-50%);
            width: 500px; height: 100px; background: rgba(255,252,210,0.04);
            filter: blur(80px); pointer-events: none;
        }
        .card-monolith {
            position: absolute; width: 68px; height: 100px;
            background: linear-gradient(135deg, #1a1a1a, #000);
            border: 1px solid #333; border-radius: 6px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.6);
            transition: all 3s cubic-bezier(0.19, 1, 0.22, 1);
        }
        .deck-stacked {
            top: 40% !important; left: 18% !important; transform: rotate(-1deg) !important;
            box-shadow: -2px 2px 0 #333, -6px 6px 20px #000 !important;
        }
        #trump-card {
            position: absolute; top: 41%; left: 22%; width: 100px; height: 68px;
            background: #fff; border-radius: 6px; transform: rotate(90deg);
            display: flex; align-items: center; justify-content: center;
            font-weight: 900; font-size: 22px; border: 2px solid var(--gold);
            opacity: 0; transition: 1.8s; z-index: 5;
        }
    </style>
</head>
<body>

<div id="wheel-layer">
    <div class="safe-wheel-container" id="main-wheel">
        <div class="wheel-center"></div>
    </div>
</div>

<div id="brand-layer">
    <div class="door-left"></div>
    <div class="door-right"></div>
    <div class="logo-container">
        <div class="swiss-shield"></div>
        <h1 class="brand-name">HELVETIA LUCKY</h1>
    </div>
</div>

<div id="game-room">
    <div class="table-light"></div>
    <div id="velvet-table">
        <div id="deck-zone"></div>
        <div id="trump-card">‚ô† A</div>
    </div>
</div>

<script>
    /** * –ú–ê–ù–ò–§–ï–°–¢ –ú–û–ù–û–õ–ò–¢–ê. –ò—Å–∫—Ä–∞. */
    const tg = window.Telegram.WebApp;
    tg.ready(); tg.expand();
    
    let audioCtx = null;
    function initAudio() { if(!audioCtx) audioCtx = new (window.AudioContext || window.webkitAudioContext)(); }

    function playSound(f, d, t, v) {
        initAudio();
        const o = audioCtx.createOscillator(); const g = audioCtx.createGain();
        o.type = t; o.frequency.setValueAtTime(f, audioCtx.currentTime);
        g.gain.setValueAtTime(v, audioCtx.currentTime);
        g.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + d);
        o.connect(g); g.connect(audioCtx.destination);
        o.start(); o.stop(audioCtx.currentTime + d);
    }

    // –†–µ–Ω–¥–µ—Ä –®—Ç—É—Ä–≤–∞–ª–∞
    const flags = ['üá∑üá∫','üá©üá™','üá´üá∑','üáÆüáπ','üá∫üá¶','üá¨üáß'];
    const wheel = document.getElementById('main-wheel');
    flags.forEach((img, i) => {
        const angle = i * 60;
        const spoke = document.createElement('div');
        spoke.className = 'spoke'; spoke.style.transform = `rotate(${angle}deg)`;
        const node = document.createElement('div');
        node.className = 'flag-node'; node.innerHTML = img;
        const r = 145;
        node.style.left = `calc(50% + ${Math.sin(angle*Math.PI/180)*r}px)`;
        node.style.top = `calc(50% + ${-Math.cos(angle*Math.PI/180)*r}px)`;
        node.onclick = () => {
            playSound(60, 1, 'triangle', 0.4);
            wheel.style.transform = `rotate(${-angle + 720}deg)`;
            wheel.classList.add('wheel-vanishing');
            setTimeout(() => {
                document.getElementById('wheel-layer').style.opacity = '0';
                setTimeout(() => {
                    document.getElementById('wheel-layer').style.display = 'none';
                    openDoors();
                }, 800);
            }, 1200);
        };
        wheel.appendChild(spoke); wheel.appendChild(node);
    });

    function openDoors() {
        playSound(800, 0.1, 'square', 0.1);
        setTimeout(() => playSound(40, 1.5, 'sawtooth', 0.3), 150);
        document.getElementById('brand-layer').classList.add('opened');
        setTimeout(startTable, 1500);
    }

    function startTable() {
        const room = document.getElementById('game-room');
        room.style.display = 'block';
        setTimeout(() => room.style.opacity = '1', 100);
        const zone = document.getElementById('deck-zone');
        for(let i=0; i<36; i++) {
            const c = document.createElement('div');
            c.className = 'card-monolith';
            c.style.top = Math.random()*40+20+'%'; c.style.left = Math.random()*50+25+'%';
            c.style.transform = `rotate(${Math.random()*360}deg)`;
            zone.appendChild(c);
            setTimeout(() => {
                c.classList.add('deck-stacked'); c.style.zIndex = i;
                if(i%4===0) playSound(1200, 0.05, 'sine', 0.02);
            }, 1000 + (i*35));
        }
        setTimeout(() => {
            const t = document.getElementById('trump-card');
            t.style.opacity = '1'; t.style.left = '25%';
            playSound(600, 0.2, 'triangle', 0.05);
        }, 5000);
    }
</script>
</body>
</html>
