<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Lotto Engine VCHF 2.0</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root { 
            --main-gold: #d4af37; 
            --bg-dark: #0a0a0a;
            --cell-white: #ffffff;
            --hot-fire: #ff4500;
            --cold-ice: #00ffff;
        }

        body { 
            background: #000 url('Hintergrund.png') no-repeat center center; 
            background-size: cover; color: #fff; font-family: -apple-system, sans-serif; 
            margin: 0; text-align: center; overflow-x: hidden;
        }

        /* –ò–Ω—Ç—Ä–æ 2.0 */
        #intro-container { position: fixed; inset: 0; background: #000; z-index: 30000; display: flex; justify-content: center; align-items: center; }
        .intro-img { position: absolute; width: 80%; opacity: 0; transform: scale(0.8); transition: 0.8s; }
        .intro-img.active { opacity: 1; transform: scale(1); }

        #app-content { display: none; opacity: 0; transition: 1s; padding: 15px; }

        /* –ë–∞–ª–∞–Ω—Å –∏ –°–∏–Ω–¥–∏–∫–∞—Ç */
        .header-box { display: flex; gap: 10px; margin-bottom: 20px; }
        .card { flex: 1; background: rgba(20,20,20,0.85); border: 1px solid #333; border-radius: 15px; padding: 10px; transition: 0.3s; }
        .card.active { border-color: var(--main-gold); box-shadow: 0 0 15px rgba(212,175,55,0.3); }
        .val { font-size: 18px; font-weight: bold; color: #32CD32; }

        /* –¢–µ–ø–ª–æ–≤–∞—è –∫–∞—Ä—Ç–∞ –∏ –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã */
        .toolbar { display: flex; justify-content: center; gap: 8px; margin-bottom: 15px; }
        .tool-btn { background: rgba(255,255,255,0.05); border: 1px solid #444; color: #fff; padding: 8px 12px; border-radius: 10px; font-size: 12px; cursor: pointer; }
        .tool-btn.active { background: var(--main-gold); color: #000; border-color: #fff; }

        /* –°–µ—Ç–∫–∞ —à–∞—Ä–æ–≤ */
        .grid { display: grid; grid-template-columns: repeat(7, 1fr); gap: 8px; max-width: 400px; margin: 0 auto; }
        .cell { aspect-ratio: 1; display: flex; align-items: center; justify-content: center; font-size: 18px; font-weight: bold; color: var(--cell-white); border-radius: 50%; transition: 0.3s; cursor: pointer; }
        .cell.selected { background: var(--main-gold) !important; color: #000 !important; box-shadow: 0 0 15px var(--main-gold); }
        
        /* –≠—Ñ—Ñ–µ–∫—Ç—ã Heatmap */
        .heat-high { color: var(--hot-fire) !important; text-shadow: 0 0 8px var(--hot-fire); transform: scale(1.1); }
        .heat-low { color: var(--cold-ice) !important; text-shadow: 0 0 8px var(--cold-ice); opacity: 0.7; }

        .super-box { margin-top: 20px; padding: 15px; background: rgba(212,175,55,0.05); border-radius: 20px; }
        .super-grid { display: flex; justify-content: center; gap: 12px; margin-top: 10px; }
        .s-cell { width: 40px; height: 40px; border: 2px solid #fff; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; cursor: pointer; }
        .s-cell.selected { background: var(--main-gold); border-color: var(--main-gold); color: #000; }

        .main-btn { width: 100%; padding: 18px; border-radius: 15px; border: none; background: var(--main-gold); font-size: 18px; font-weight: bold; margin-top: 25px; cursor: pointer; }
    </style>
</head>
<body>

<div id="intro-container">
    <img src="Bild1.png" id="i1" class="intro-img">
    <img src="Bild2.png" id="i2" class="intro-img">
    <img src="Bild3.png" id="i3" class="intro-img">
</div>

<div id="app-content">
    <div class="header-box">
        <div class="card active" id="w-vchf" onclick="selW('VCHF')">
            <div style="font-size:9px;">VIRTUAL VCHF</div>
            <div class="val">100.00</div>
        </div>
        <div class="card" id="w-chf" onclick="selW('CHF')">
            <div style="font-size:9px;">REAL CHF</div>
            <div class="val">0.00</div>
        </div>
    </div>

    <div class="toolbar">
        <button class="tool-btn" id="btn-hot" onclick="toggleHeat('hot')">üî• HOT SUMMER</button>
        <button class="tool-btn" id="btn-cold" onclick="toggleHeat('cold')">‚ùÑÔ∏è SLEEPING GIANT</button>
        <button class="tool-btn" onclick="autoRandom()">üé≤ RANDOM</button>
    </div>

    <div class="grid" id="main-grid"></div>

    <div class="super-box">
        <div style="font-size:12px; font-weight:bold; color:var(--main-gold);">SUPERZAHL 2.0</div>
        <div class="super-grid" id="s-grid"></div>
    </div>

    <button class="main-btn" onclick="finalize()">TICKET –ü–û–î–¢–í–ï–†–î–ò–¢–¨</button>
</div>

<script>
    const tg = window.Telegram.WebApp;
    tg.expand();

    let selected = [];
    let superNum = null;
    let heatMode = null;

    // –î–∞–Ω–Ω—ã–µ –¥–ª—è Heatmap 2.0
    const stats = {
        hot: [5, 12, 18, 24, 31, 42],
        cold: [1, 9, 15, 27, 33, 40]
    };

    function render() {
        const g = document.getElementById('main-grid');
        g.innerHTML = '';
        for(let i=1; i<=42; i++) {
            const c = document.createElement('div');
            c.className = 'cell';
            c.id = `c-${i}`;
            c.innerText = i;
            c.onclick = () => clickNum(i);
            g.appendChild(c);
        }

        const sg = document.getElementById('s-grid');
        sg.innerHTML = '';
        for(let i=1; i<=6; i++) {
            const sc = document.createElement('div');
            sc.className = 's-cell';
            sc.innerText = i;
            sc.onclick = () => clickSuper(i);
            sg.appendChild(sc);
        }
    }

    function clickNum(n) {
        tg.HapticFeedback.impactOccurred('light');
        const el = document.getElementById(`c-${n}`);
        if(selected.includes(n)) {
            selected = selected.filter(x => x !== n);
            el.classList.remove('selected');
        } else if(selected.length < 6) {
            selected.push(n);
            el.classList.add('selected');
        }
    }

    function clickSuper(n) {
        tg.HapticFeedback.impactOccurred('medium');
        superNum = n;
        document.querySelectorAll('.s-cell').forEach(c => {
            c.classList.toggle('selected', c.innerText == n);
        });
    }

    function toggleHeat(mode) {
        tg.HapticFeedback.selectionChanged();
        heatMode = (heatMode === mode) ? null : mode;
        
        document.querySelectorAll('.cell').forEach(c => c.classList.remove('heat-high', 'heat-low'));
        document.getElementById('btn-hot').classList.toggle('active', heatMode === 'hot');
        document.getElementById('btn-cold').classList.toggle('active', heatMode === 'cold');

        if(heatMode) {
            stats[heatMode].forEach(n => {
                const el = document.getElementById(`c-${n}`);
                if(el) el.classList.add(heatMode === 'hot' ? 'heat-high' : 'heat-low');
            });
        }
    }

    function autoRandom() {
        tg.HapticFeedback.notificationOccurred('success');
        selected = [];
        document.querySelectorAll('.cell').forEach(c => c.classList.remove('selected'));
        while(selected.length < 6) {
            let r = Math.floor(Math.random() * 42) + 1;
            if(!selected.includes(r)) clickNum(r);
        }
    }

    function finalize() {
        if(selected.length < 6 || !superNum) {
            tg.showAlert("–î–≤–∏–∂–æ–∫ vchf: –í—ã–±–µ—Ä–∏ –≤—Å–µ —á–∏—Å–ª–∞!");
            return;
        }
        tg.HapticFeedback.notificationOccurred('success');
        tg.showConfirm("–í–µ—Ä—Å–∏—è 2.0: –ë–∏–ª–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –≤ –æ–±—Ä–∞–±–æ—Ç–∫—É!");
    }

    window.onload = () => {
        setTimeout(() => document.getElementById('i1').classList.add('active'), 500);
        setTimeout(() => document.getElementById('i1').classList.remove('active'), 2000);
        setTimeout(() => document.getElementById('i2').classList.add('active'), 2200);
        setTimeout(() => document.getElementById('i2').classList.remove('active'), 3700);
        setTimeout(() => {
            document.getElementById('intro-container').style.display = 'none';
            document.getElementById('app-content').style.display = 'block';
            setTimeout(() => document.getElementById('app-content').style.opacity = '1', 50);
            render();
        }, 4200);
    };
</script>
</body>
</html>
