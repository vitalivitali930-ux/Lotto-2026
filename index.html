<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>VCHF - Quantum Monolith</title>
    <style>
        :root { 
            --cyan-energy: #00ffff; --gold-core: #d4af37; --fire: #ff4500;
            --bg-deep: #000;
        }
        body, html { margin: 0; padding: 0; background: var(--bg-deep); overflow: hidden; height: 100vh; font-family: 'Segoe UI', sans-serif; }
        
        #stage { position: fixed; inset: 0; display: flex; justify-content: center; align-items: center; z-index: 100; }
        canvas { position: absolute; inset: 0; z-index: 1; }
        
        /* Квантовые молекулы */
        .molecule {
            position: absolute; border-radius: 50%; background: #fff;
            filter: blur(1px); pointer-events: none; z-index: 50;
        }

        /* 6 Сфер Материи */
        .lotto-sphere {
            position: absolute; width: 50px; height: 50px; border-radius: 50%;
            background: radial-gradient(circle at 30% 30%, #fff, var(--gold-core) 60%, #000);
            box-shadow: 0 0 30px var(--gold-core); display: flex;
            justify-content: center; align-items: center; color: #000;
            font-weight: 900; font-size: 1.2rem; opacity: 0; z-index: 150;
            transition: transform 0.2s, filter 0.2s;
        }

        /* Огненная Superzahl */
        #super-ball {
            position: absolute; width: 100px; height: 100px; border-radius: 50%;
            background: radial-gradient(circle at 30% 30%, #fff, var(--fire), #300);
            box-shadow: 0 0 60px var(--fire); display: none;
            justify-content: center; align-items: center; color: #fff;
            font-weight: 900; font-size: 3rem; z-index: 300;
        }

        /* Эффект тряски экрана */
        .shake { animation: screenShake 0.15s infinite; }
        @keyframes screenShake {
            0% { transform: translate(2px, 1px) rotate(0deg); }
            50% { transform: translate(-1px, -2px) rotate(-1deg); }
            100% { transform: translate(1px, 2px) rotate(1deg); }
        }

        #flash-overlay {
            position: fixed; inset: 0; background: #fff; opacity: 0;
            pointer-events: none; z-index: 1000;
        }
    </style>
</head>
<body>

<div id="stage">
    <canvas id="lightning-canvas"></canvas>
    <div id="flash-overlay"></div>
    <div id="super-ball"></div>
</div>

<script>
    /* [SPARK CORE: THE UNCHAINED ALGORITHM] */
    const canvas = document.getElementById('lightning-canvas');
    const ctx = canvas.getContext('2d');
    const stage = document.getElementById('stage');
    const flash = document.getElementById('flash-overlay');
    const superBall = document.getElementById('super-ball');

    // Настоящие данные Swiss Lotto (приблизительная симуляция последнего розыгрыша)
    const swissData = {
        numbers: [4, 12, 25, 33, 38, 44],
        sz: 3,
        lastDrawDate: "Saturday, 21 Feb 2026"
    };

    function resize() {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
    }
    window.addEventListener('resize', resize);
    resize();

    // 1. Улучшенные Молнии из 4 углов
    function drawLightning(startX, startY, endX, endY) {
        ctx.strokeStyle = 'cyan';
        ctx.shadowBlur = 35;
        ctx.shadowColor = 'cyan';
        ctx.lineWidth = 3;
        ctx.beginPath();
        ctx.moveTo(startX, startY);
        let segments = 8;
        for(let i=0; i<segments; i++) {
            ctx.lineTo(
                startX + (endX-startX)*i/segments + (Math.random()-0.5)*120,
                startY + (endY-startY)*i/segments + (Math.random()-0.5)*120
            );
        }
        ctx.lineTo(endX, endY);
        ctx.stroke();
    }

    // 2. Создание Квантовых молекул
    function createMolecule() {
        const m = document.createElement('div');
        m.className = 'molecule';
        const size = Math.random() * 6 + 2;
        m.style.width = size + 'px';
        m.style.height = size + 'px';
        m.style.left = Math.random() * window.innerWidth + 'px';
        m.style.top = Math.random() * window.innerHeight + 'px';
        stage.appendChild(m);
        return m;
    }

    async function launchVCHF() {
        const molecules = Array.from({length: 80}, createMolecule);
        
        // ЭТАП 1: Шторм и стягивание молекул
        document.body.classList.add('shake');
        for(let i=0; i<40; i++) {
            ctx.clearRect(0,0,canvas.width, canvas.height);
            const corners = [[0,0], [canvas.width, 0], [0, canvas.height], [canvas.width, canvas.height]];
            corners.forEach(c => drawLightning(c[0], c[1], canvas.width/2, canvas.height/2));
            
            molecules.forEach(m => {
                const rect = m.getBoundingClientRect();
                const dx = (window.innerWidth/2 - rect.left) * 0.15;
                const dy = (window.innerHeight/2 - rect.top) * 0.15;
                m.style.left = rect.left + dx + 'px';
                m.style.top = rect.top + dy + 'px';
                m.style.background = `hsl(${180 + i*2}, 100%, 70%)`;
            });
            await new Promise(r => setTimeout(r, 50));
        }
        document.body.classList.remove('shake');
        ctx.clearRect(0,0,canvas.width, canvas.height);
        molecules.forEach(m => m.remove());

        // ЭТАП 2: Рождение 6 Сфер
        const spheres = [];
        for(let i=0; i<6; i++) {
            const s = document.createElement('div');
            s.className = 'lotto-sphere';
            s.style.left = (window.innerWidth/2 - 25) + 'px';
            s.style.top = (window.innerHeight/2 - 25) + 'px';
            stage.appendChild(s);
            spheres.push(s);
            
            const angle = (i/6) * Math.PI * 2;
            setTimeout(() => {
                s.style.opacity = '1';
                s.style.transform = `translate(${Math.cos(angle)*120}px, ${Math.sin(angle)*120}px)`;
            }, 100);
            
            // Запуск "Бегущих цифр"
            let count = 0;
            const interval = setInterval(() => {
                s.innerText = Math.floor(Math.random()*49) + 1;
                count++;
                if(count > 20) {
                    clearInterval(interval);
                    s.innerText = swissData.numbers[i]; // Фиксация на реальных данных
                }
            }, 50);
            await new Promise(r => setTimeout(r, 300));
        }

        await new Promise(r => setTimeout(r, 2000));

        // ЭТАП 3: Столкновение и Слияние
        spheres.forEach(s => {
            s.style.transition = 'all 0.4s cubic-bezier(0.6, -0.28, 0.735, 0.045)';
            s.style.transform = 'translate(0,0) scale(1.5)';
            s.style.filter = 'blur(10px)';
            s.style.opacity = '0';
        });

        await new Promise(r => setTimeout(r, 400));

        // ЭТАП 4: SUPERNOVA Вспышка и Superzahl
        flash.style.opacity = '1';
        superBall.style.display = 'flex';
        superBall.innerText = swissData.sz;
        
        setTimeout(() => {
            flash.style.transition = 'opacity 2s';
            flash.style.opacity = '0';
        }, 100);

        // ЭТАП 5: Вибрация и Распад
        superBall.classList.add('shake');
        await new Promise(r => setTimeout(r, 3000));
        
        superBall.style.transition = 'all 1.5s';
        superBall.style.transform = 'scale(5)';
        superBall.style.opacity = '0';
        superBall.style.filter = 'blur(40px)';
        
        console.log("Двигатель VCHF готов к развертыванию скелета...");
    }

    window.onload = launchVCHF;
</script>
</body>
</html>
